{"version":3,"file":"script.min.js","sources":["js/utils/url.mjs","js/lib/marked.js","js/core/startpage/const.mjs","js/core/startpage/dom/createCloseButton.mjs","js/core/startpage/helpers/resetEditor.mjs","js/lib/codejar.js","js/core/startpage/helpers/highlightCode.mjs","js/core/startpage/helpers/optionsEditor.mjs","js/core/startpage/helpers/updateCards.mjs","js/core/startpage/editor.mjs","js/core/startpage/dom/createEditor.mjs","js/core/startpage/helpers/initCodeJar.mjs","js/core/startpage/events/keyboard.mjs","js/core/startpage/events/mouse.mjs","js/core/markdown/parseMarkdown.mjs","js/lib/textFit.js","js/lib/js-yaml.js","js/core/markdown/yaml.mjs","js/utils/audio.mjs","js/core/game/helpers/extractContentCards.js","js/core/game/gameLogic.mjs","js/core/game/helpers/initializeTitle.mjs","js/core/game/helpers/initializeInstructions.mjs","js/utils/arrays.mjs","js/core/game/helpers/isCardMatch.js","js/core/startpage/defaultContent.mjs","js/core/startpage/footer/buildFooter.mjs","js/core/startpage/footer/events.mjs","js/core/game/createMemoryFromMarkdown.mjs","js/main.mjs"],"sourcesContent":["export function handleURL(url, options) {\n\tconst corsProxy = \"https://corsproxy.io/?url=\";\n\t// Permet d'utiliser le répertoire de jeu https://forge.apps.education.fr/memorymd/jeu\n\t// avec simplement le nom du fichier de memory dans le hash de l'URL\n\t// sans l'extension .md à la fin\n\tif (url.startsWith(\"jeu/\") && !url.includes(\".md\")) {\n\t\treturn url + \".md\";\n\t}\n\tif (url !== \"\") {\n\t\tlet addCorsProxy = options && options.useCorsProxy ? true : false;\n\t\t// Gestion des fichiers hébergés sur la forge et publiés sur une page web\n\t\tif (url.includes(\".forge\")) {\n\t\t\taddCorsProxy = false;\n\t\t}\n\t\t// Gestion des fichiers hébergés sur github\n\t\tif (url.startsWith(\"https://github.com\")) {\n\t\t\taddCorsProxy = false;\n\t\t\turl = url.replace(\n\t\t\t\t\"https://github.com\",\n\t\t\t\t\"https://raw.githubusercontent.com\",\n\t\t\t);\n\t\t\turl = url.replace(\"/blob/\", \"/\");\n\t\t}\n\t\t// gestion des fichiers hébergés sur codiMD / hedgedoc / digipage\n\t\tif (\n\t\t\turl.startsWith(\"https://codimd\") ||\n\t\t\turl.startsWith(\"https://pad.numerique.gouv.fr/\") ||\n\t\t\turl.includes(\"hedgedoc\") ||\n\t\t\turl.includes(\"digipage\")\n\t\t) {\n\t\t\taddCorsProxy = false;\n\t\t\turl = url\n\t\t\t\t.replace(\"?edit\", \"\")\n\t\t\t\t.replace(\"?both\", \"\")\n\t\t\t\t.replace(\"?view\", \"\")\n\t\t\t\t.replace(/#$/, \"\")\n\t\t\t\t.replace(/\\/$/, \"\");\n\t\t\turl = url.indexOf(\"download\") === -1 ? url + \"/download\" : url;\n\t\t}\n\t\t// gestion des fichiers hébergés sur framapad ou digidoc\n\t\tif (\n\t\t\t(url.includes(\"framapad\") || url.includes(\"digidoc\")) &&\n\t\t\t!url.endsWith(\"/export/txt\")\n\t\t) {\n\t\t\taddCorsProxy = false;\n\t\t\turl = url.replace(/\\?.*/, \"\") + \"/export/txt\";\n\t\t}\n\t\turl = addCorsProxy ? corsProxy + url : url;\n\t}\n\treturn url;\n}\n\nexport function getMarkdownFromURL(url) {\n\treturn fetch(url)\n\t\t.then((response) => {\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(\"Network response was not ok\");\n\t\t\t}\n\t\t\treturn response.text();\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error(\n\t\t\t\t\"There has been a problem with your fetch operation:\",\n\t\t\t\terror,\n\t\t\t);\n\t\t\treturn \"\";\n\t\t});\n}\n\nexport function getURLfromHash() {\n\tconst hash = window.location.hash.substring(1);\n\treturn handleURL(hash) || \"\";\n}\n\nexport function redirectToUrl(input, baseURL = window.location.origin) {\n\tconst hash = input.value.trim();\n\tbaseURL = input.getAttribute(\"data-base-url\")\n\t\t? \"https://\" + input.getAttribute(\"data-base-url\")\n\t\t: baseURL;\n\tif (hash) {\n\t\tconst fullUrl = baseURL + `#${hash}`;\n\t\twindow.open(fullUrl, \"_blank\");\n\t} else {\n\t\talert(\"Veuillez entrer une URL valide.\");\n\t}\n}\n\nexport function loadScript(src, name) {\n\tconst prefixScript = \"script-\";\n\t// Fonction pour charger des scripts\n\tconst alreadyLoaded = document.querySelector(\"#\" + prefixScript + name);\n\treturn new Promise((resolve, reject) => {\n\t\tif (!alreadyLoaded) {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src = src;\n\t\t\tscript.id = prefixScript + name;\n\t\t\tscript.onload = resolve;\n\t\t\tscript.onerror = reject;\n\t\t\tdocument.head.appendChild(script);\n\t\t} else {\n\t\t\tresolve();\n\t\t}\n\t});\n}\nexport function loadCSS(src, name) {\n\tconst prefixCSS = \"css-\";\n\t// Fonction pour charger des CSS\n\tconst cssElement = document.querySelector(\"#\" + prefixCSS + name);\n\tif (!cssElement) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet styleElement;\n\t\t\tif (src.startsWith(\"<style>\")) {\n\t\t\t\tstyleElement = document.createElement(\"style\");\n\t\t\t\tstyleElement.id = prefixCSS + name;\n\t\t\t\tstyleElement.textContent = src\n\t\t\t\t\t.replace(\"<style>\", \"\")\n\t\t\t\t\t.replace(\"</style>\", \"\");\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\tstyleElement = document.createElement(\"link\");\n\t\t\t\tstyleElement.href = src;\n\t\t\t\tstyleElement.id = prefixCSS + name;\n\t\t\t\tstyleElement.rel = \"stylesheet\";\n\t\t\t\tstyleElement.onload = resolve;\n\t\t\t\tstyleElement.onerror = reject;\n\t\t\t}\n\t\t\tdocument.head.appendChild(styleElement);\n\t\t});\n\t}\n}\n","/**\n * marked v16.3.0 - a markdown parser\n * Copyright (c) 2011-2025, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction L() {\n\treturn {\n\t\tasync: !1,\n\t\tbreaks: !1,\n\t\textensions: null,\n\t\tgfm: !0,\n\t\thooks: null,\n\t\tpedantic: !1,\n\t\trenderer: null,\n\t\tsilent: !1,\n\t\ttokenizer: null,\n\t\twalkTokens: null,\n\t};\n}\nvar O = L();\nfunction G(l) {\n\tO = l;\n}\nvar E = { exec: () => null };\nfunction h(l, e = \"\") {\n\tlet t = typeof l == \"string\" ? l : l.source,\n\t\tn = {\n\t\t\treplace: (r, i) => {\n\t\t\t\tlet s = typeof i == \"string\" ? i : i.source;\n\t\t\t\treturn (s = s.replace(m.caret, \"$1\")), (t = t.replace(r, s)), n;\n\t\t\t},\n\t\t\tgetRegex: () => new RegExp(t, e),\n\t\t};\n\treturn n;\n}\nvar m = {\n\t\tcodeRemoveIndent: /^(?: {1,4}| {0,3}\\t)/gm,\n\t\toutputLinkReplace: /\\\\([\\[\\]])/g,\n\t\tindentCodeCompensation: /^(\\s+)(?:```)/,\n\t\tbeginningSpace: /^\\s+/,\n\t\tendingHash: /#$/,\n\t\tstartingSpaceChar: /^ /,\n\t\tendingSpaceChar: / $/,\n\t\tnonSpaceChar: /[^ ]/,\n\t\tnewLineCharGlobal: /\\n/g,\n\t\ttabCharGlobal: /\\t/g,\n\t\tmultipleSpaceGlobal: /\\s+/g,\n\t\tblankLine: /^[ \\t]*$/,\n\t\tdoubleBlankLine: /\\n[ \\t]*\\n[ \\t]*$/,\n\t\tblockquoteStart: /^ {0,3}>/,\n\t\tblockquoteSetextReplace: /\\n {0,3}((?:=+|-+) *)(?=\\n|$)/g,\n\t\tblockquoteSetextReplace2: /^ {0,3}>[ \\t]?/gm,\n\t\tlistReplaceTabs: /^\\t+/,\n\t\tlistReplaceNesting: /^ {1,4}(?=( {4})*[^ ])/g,\n\t\tlistIsTask: /^\\[[ xX]\\] /,\n\t\tlistReplaceTask: /^\\[[ xX]\\] +/,\n\t\tanyLine: /\\n.*\\n/,\n\t\threfBrackets: /^<(.*)>$/,\n\t\ttableDelimiter: /[:|]/,\n\t\ttableAlignChars: /^\\||\\| *$/g,\n\t\ttableRowBlankLine: /\\n[ \\t]*$/,\n\t\ttableAlignRight: /^ *-+: *$/,\n\t\ttableAlignCenter: /^ *:-+: *$/,\n\t\ttableAlignLeft: /^ *:-+ *$/,\n\t\tstartATag: /^<a /i,\n\t\tendATag: /^<\\/a>/i,\n\t\tstartPreScriptTag: /^<(pre|code|kbd|script)(\\s|>)/i,\n\t\tendPreScriptTag: /^<\\/(pre|code|kbd|script)(\\s|>)/i,\n\t\tstartAngleBracket: /^</,\n\t\tendAngleBracket: />$/,\n\t\tpedanticHrefTitle: /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/,\n\t\tunicodeAlphaNumeric: /[\\p{L}\\p{N}]/u,\n\t\tescapeTest: /[&<>\"']/,\n\t\tescapeReplace: /[&<>\"']/g,\n\t\tescapeTestNoEncode: /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/,\n\t\tescapeReplaceNoEncode: /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/g,\n\t\tunescapeTest: /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/gi,\n\t\tcaret: /(^|[^\\[])\\^/g,\n\t\tpercentDecode: /%25/g,\n\t\tfindPipe: /\\|/g,\n\t\tsplitPipe: / \\|/,\n\t\tslashPipe: /\\\\\\|/g,\n\t\tcarriageReturn: /\\r\\n|\\r/g,\n\t\tspaceLine: /^ +$/gm,\n\t\tnotSpaceStart: /^\\S*/,\n\t\tendingNewline: /\\n$/,\n\t\tlistItemRegex: (l) => new RegExp(`^( {0,3}${l})((?:[\t ][^\\\\n]*)?(?:\\\\n|$))`),\n\t\tnextBulletRegex: (l) =>\n\t\t\tnew RegExp(\n\t\t\t\t`^ {0,${Math.min(3, l - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \t][^\\\\n]*)?(?:\\\\n|$))`\n\t\t\t),\n\t\thrRegex: (l) =>\n\t\t\tnew RegExp(\n\t\t\t\t`^ {0,${Math.min(3, l - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`\n\t\t\t),\n\t\tfencesBeginRegex: (l) =>\n\t\t\tnew RegExp(`^ {0,${Math.min(3, l - 1)}}(?:\\`\\`\\`|~~~)`),\n\t\theadingBeginRegex: (l) => new RegExp(`^ {0,${Math.min(3, l - 1)}}#`),\n\t\thtmlBeginRegex: (l) =>\n\t\t\tnew RegExp(`^ {0,${Math.min(3, l - 1)}}<(?:[a-z].*>|!--)`, \"i\"),\n\t},\n\txe = /^(?:[ \\t]*(?:\\n|$))+/,\n\tbe = /^((?: {4}| {0,3}\\t)[^\\n]+(?:\\n(?:[ \\t]*(?:\\n|$))*)?)+/,\n\tRe =\n\t\t/^ {0,3}(`{3,}(?=[^`\\n]*(?:\\n|$))|~{3,})([^\\n]*)(?:\\n|$)(?:|([\\s\\S]*?)(?:\\n|$))(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,\n\tC = /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/,\n\tOe = /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n\tj = /(?:[*+-]|\\d{1,9}[.)])/,\n\tse =\n\t\t/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\\n(?!\\s*?\\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n\tie = h(se)\n\t\t.replace(/bull/g, j)\n\t\t.replace(/blockCode/g, /(?: {4}| {0,3}\\t)/)\n\t\t.replace(/fences/g, / {0,3}(?:`{3,}|~{3,})/)\n\t\t.replace(/blockquote/g, / {0,3}>/)\n\t\t.replace(/heading/g, / {0,3}#{1,6}/)\n\t\t.replace(/html/g, / {0,3}<[^\\n>]+>\\n/)\n\t\t.replace(/\\|table/g, \"\")\n\t\t.getRegex(),\n\tTe = h(se)\n\t\t.replace(/bull/g, j)\n\t\t.replace(/blockCode/g, /(?: {4}| {0,3}\\t)/)\n\t\t.replace(/fences/g, / {0,3}(?:`{3,}|~{3,})/)\n\t\t.replace(/blockquote/g, / {0,3}>/)\n\t\t.replace(/heading/g, / {0,3}#{1,6}/)\n\t\t.replace(/html/g, / {0,3}<[^\\n>]+>\\n/)\n\t\t.replace(/table/g, / {0,3}\\|?(?:[:\\- ]*\\|)+[\\:\\- ]*\\n/)\n\t\t.getRegex(),\n\tF =\n\t\t/^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,\n\twe = /^[^\\n]+/,\n\tQ = /(?!\\s*\\])(?:\\\\[\\s\\S]|[^\\[\\]\\\\])+/,\n\tye = h(\n\t\t/^ {0,3}\\[(label)\\]: *(?:\\n[ \\t]*)?([^<\\s][^\\s]*|<.*?>)(?:(?: +(?:\\n[ \\t]*)?| *\\n[ \\t]*)(title))? *(?:\\n+|$)/\n\t)\n\t\t.replace(\"label\", Q)\n\t\t.replace(\n\t\t\t\"title\",\n\t\t\t/(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/\n\t\t)\n\t\t.getRegex(),\n\tPe = h(/^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/)\n\t\t.replace(/bull/g, j)\n\t\t.getRegex(),\n\tv =\n\t\t\"address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul\",\n\tU = /<!--(?:-?>|[\\s\\S]*?(?:-->|$))/,\n\tSe = h(\n\t\t\"^ {0,3}(?:<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)|comment[^\\\\n]*(\\\\n+|$)|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n[ \t]*)+\\\\n|$)|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \t]*)+\\\\n|$)|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \t]*)+\\\\n|$))\",\n\t\t\"i\"\n\t)\n\t\t.replace(\"comment\", U)\n\t\t.replace(\"tag\", v)\n\t\t.replace(\n\t\t\t\"attribute\",\n\t\t\t/ +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/\n\t\t)\n\t\t.getRegex(),\n\toe = h(F)\n\t\t.replace(\"hr\", C)\n\t\t.replace(\"heading\", \" {0,3}#{1,6}(?:\\\\s|$)\")\n\t\t.replace(\"|lheading\", \"\")\n\t\t.replace(\"|table\", \"\")\n\t\t.replace(\"blockquote\", \" {0,3}>\")\n\t\t.replace(\"fences\", \" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\")\n\t\t.replace(\"list\", \" {0,3}(?:[*+-]|1[.)]) \")\n\t\t.replace(\n\t\t\t\"html\",\n\t\t\t\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\"\n\t\t)\n\t\t.replace(\"tag\", v)\n\t\t.getRegex(),\n\t$e = h(/^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/)\n\t\t.replace(\"paragraph\", oe)\n\t\t.getRegex(),\n\tK = {\n\t\tblockquote: $e,\n\t\tcode: be,\n\t\tdef: ye,\n\t\tfences: Re,\n\t\theading: Oe,\n\t\thr: C,\n\t\thtml: Se,\n\t\tlheading: ie,\n\t\tlist: Pe,\n\t\tnewline: xe,\n\t\tparagraph: oe,\n\t\ttable: E,\n\t\ttext: we,\n\t},\n\tre = h(\n\t\t\"^ *([^\\\\n ].*)\\\\n {0,3}((?:\\\\| *)?:?-+:? *(?:\\\\| *:?-+:? *)*(?:\\\\| *)?)(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)\"\n\t)\n\t\t.replace(\"hr\", C)\n\t\t.replace(\"heading\", \" {0,3}#{1,6}(?:\\\\s|$)\")\n\t\t.replace(\"blockquote\", \" {0,3}>\")\n\t\t.replace(\"code\", \"(?: {4}| {0,3}\t)[^\\\\n]\")\n\t\t.replace(\"fences\", \" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\")\n\t\t.replace(\"list\", \" {0,3}(?:[*+-]|1[.)]) \")\n\t\t.replace(\n\t\t\t\"html\",\n\t\t\t\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\"\n\t\t)\n\t\t.replace(\"tag\", v)\n\t\t.getRegex(),\n\t_e = {\n\t\t...K,\n\t\tlheading: Te,\n\t\ttable: re,\n\t\tparagraph: h(F)\n\t\t\t.replace(\"hr\", C)\n\t\t\t.replace(\"heading\", \" {0,3}#{1,6}(?:\\\\s|$)\")\n\t\t\t.replace(\"|lheading\", \"\")\n\t\t\t.replace(\"table\", re)\n\t\t\t.replace(\"blockquote\", \" {0,3}>\")\n\t\t\t.replace(\"fences\", \" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\")\n\t\t\t.replace(\"list\", \" {0,3}(?:[*+-]|1[.)]) \")\n\t\t\t.replace(\n\t\t\t\t\"html\",\n\t\t\t\t\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\"\n\t\t\t)\n\t\t\t.replace(\"tag\", v)\n\t\t\t.getRegex(),\n\t},\n\tLe = {\n\t\t...K,\n\t\thtml: h(\n\t\t\t`^ *(?:comment *(?:\\\\n|\\\\s*$)|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\\\s[^'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))`\n\t\t)\n\t\t\t.replace(\"comment\", U)\n\t\t\t.replace(\n\t\t\t\t/tag/g,\n\t\t\t\t\"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b\"\n\t\t\t)\n\t\t\t.getRegex(),\n\t\tdef: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n\t\theading: /^(#{1,6})(.*)(?:\\n+|$)/,\n\t\tfences: E,\n\t\tlheading: /^(.+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n\t\tparagraph: h(F)\n\t\t\t.replace(\"hr\", C)\n\t\t\t.replace(\n\t\t\t\t\"heading\",\n\t\t\t\t` *#{1,6} *[^\n]`\n\t\t\t)\n\t\t\t.replace(\"lheading\", ie)\n\t\t\t.replace(\"|table\", \"\")\n\t\t\t.replace(\"blockquote\", \" {0,3}>\")\n\t\t\t.replace(\"|fences\", \"\")\n\t\t\t.replace(\"|list\", \"\")\n\t\t\t.replace(\"|html\", \"\")\n\t\t\t.replace(\"|tag\", \"\")\n\t\t\t.getRegex(),\n\t},\n\tMe = /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n\tze = /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n\tae = /^( {2,}|\\\\)\\n(?!\\s*$)/,\n\tAe =\n\t\t/^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n\tD = /[\\p{P}\\p{S}]/u,\n\tW = /[\\s\\p{P}\\p{S}]/u,\n\tle = /[^\\s\\p{P}\\p{S}]/u,\n\tEe = h(/^((?![*_])punctSpace)/, \"u\")\n\t\t.replace(/punctSpace/g, W)\n\t\t.getRegex(),\n\tue = /(?!~)[\\p{P}\\p{S}]/u,\n\tCe = /(?!~)[\\s\\p{P}\\p{S}]/u,\n\tIe = /(?:[^\\s\\p{P}\\p{S}]|~)/u,\n\tBe =\n\t\t/\\[[^\\[\\]]*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)|`[^`]*?`|<(?! )[^<>]*?>/g,\n\tpe = /^(?:\\*+(?:((?!\\*)punct)|[^\\s*]))|^_+(?:((?!_)punct)|([^\\s_]))/,\n\tqe = h(pe, \"u\").replace(/punct/g, D).getRegex(),\n\tve = h(pe, \"u\").replace(/punct/g, ue).getRegex(),\n\tce =\n\t\t\"^[^_*]*?__[^_*]*?\\\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\\\*)punct(\\\\*+)(?=[\\\\s]|$)|notPunctSpace(\\\\*+)(?!\\\\*)(?=punctSpace|$)|(?!\\\\*)punctSpace(\\\\*+)(?=notPunctSpace)|[\\\\s](\\\\*+)(?!\\\\*)(?=punct)|(?!\\\\*)punct(\\\\*+)(?!\\\\*)(?=punct)|notPunctSpace(\\\\*+)(?=notPunctSpace)\",\n\tDe = h(ce, \"gu\")\n\t\t.replace(/notPunctSpace/g, le)\n\t\t.replace(/punctSpace/g, W)\n\t\t.replace(/punct/g, D)\n\t\t.getRegex(),\n\tHe = h(ce, \"gu\")\n\t\t.replace(/notPunctSpace/g, Ie)\n\t\t.replace(/punctSpace/g, Ce)\n\t\t.replace(/punct/g, ue)\n\t\t.getRegex(),\n\tZe = h(\n\t\t\"^[^_*]*?\\\\*\\\\*[^_*]*?_[^_*]*?(?=\\\\*\\\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)\",\n\t\t\"gu\"\n\t)\n\t\t.replace(/notPunctSpace/g, le)\n\t\t.replace(/punctSpace/g, W)\n\t\t.replace(/punct/g, D)\n\t\t.getRegex(),\n\tGe = h(/\\\\(punct)/, \"gu\")\n\t\t.replace(/punct/g, D)\n\t\t.getRegex(),\n\tNe = h(/^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/)\n\t\t.replace(\"scheme\", /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/)\n\t\t.replace(\n\t\t\t\"email\",\n\t\t\t/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/\n\t\t)\n\t\t.getRegex(),\n\tje = h(U).replace(\"(?:-->|$)\", \"-->\").getRegex(),\n\tFe = h(\n\t\t\"^comment|^</[a-zA-Z][\\\\w:-]*\\\\s*>|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>|^<\\\\?[\\\\s\\\\S]*?\\\\?>|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\"\n\t)\n\t\t.replace(\"comment\", je)\n\t\t.replace(\n\t\t\t\"attribute\",\n\t\t\t/\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/\n\t\t)\n\t\t.getRegex(),\n\tq = /(?:\\[(?:\\\\[\\s\\S]|[^\\[\\]\\\\])*\\]|\\\\[\\s\\S]|`[^`]*`|[^\\[\\]\\\\`])*?/,\n\tQe = h(/^!?\\[(label)\\]\\(\\s*(href)(?:(?:[ \\t]*(?:\\n[ \\t]*)?)(title))?\\s*\\)/)\n\t\t.replace(\"label\", q)\n\t\t.replace(\"href\", /<(?:\\\\.|[^\\n<>\\\\])+>|[^ \\t\\n\\x00-\\x1f]*/)\n\t\t.replace(\n\t\t\t\"title\",\n\t\t\t/\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/\n\t\t)\n\t\t.getRegex(),\n\the = h(/^!?\\[(label)\\]\\[(ref)\\]/)\n\t\t.replace(\"label\", q)\n\t\t.replace(\"ref\", Q)\n\t\t.getRegex(),\n\tde = h(/^!?\\[(ref)\\](?:\\[\\])?/)\n\t\t.replace(\"ref\", Q)\n\t\t.getRegex(),\n\tUe = h(\"reflink|nolink(?!\\\\()\", \"g\")\n\t\t.replace(\"reflink\", he)\n\t\t.replace(\"nolink\", de)\n\t\t.getRegex(),\n\tX = {\n\t\t_backpedal: E,\n\t\tanyPunctuation: Ge,\n\t\tautolink: Ne,\n\t\tblockSkip: Be,\n\t\tbr: ae,\n\t\tcode: ze,\n\t\tdel: E,\n\t\temStrongLDelim: qe,\n\t\temStrongRDelimAst: De,\n\t\temStrongRDelimUnd: Ze,\n\t\tescape: Me,\n\t\tlink: Qe,\n\t\tnolink: de,\n\t\tpunctuation: Ee,\n\t\treflink: he,\n\t\treflinkSearch: Ue,\n\t\ttag: Fe,\n\t\ttext: Ae,\n\t\turl: E,\n\t},\n\tKe = {\n\t\t...X,\n\t\tlink: h(/^!?\\[(label)\\]\\((.*?)\\)/)\n\t\t\t.replace(\"label\", q)\n\t\t\t.getRegex(),\n\t\treflink: h(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n\t\t\t.replace(\"label\", q)\n\t\t\t.getRegex(),\n\t},\n\tN = {\n\t\t...X,\n\t\temStrongRDelimAst: He,\n\t\temStrongLDelim: ve,\n\t\turl: h(\n\t\t\t/^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n\t\t\t\"i\"\n\t\t)\n\t\t\t.replace(\n\t\t\t\t\"email\",\n\t\t\t\t/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/\n\t\t\t)\n\t\t\t.getRegex(),\n\t\t_backpedal:\n\t\t\t/(?:[^?!.,:;*_'\"~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'\"~)]+(?!$))+/,\n\t\tdel: /^(~~?)(?=[^\\s~])((?:\\\\[\\s\\S]|[^\\\\])*?(?:\\\\[\\s\\S]|[^\\s~\\\\]))\\1(?=[^~]|$)/,\n\t\ttext: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/,\n\t},\n\tWe = {\n\t\t...N,\n\t\tbr: h(ae).replace(\"{2,}\", \"*\").getRegex(),\n\t\ttext: h(N.text)\n\t\t\t.replace(\"\\\\b_\", \"\\\\b_| {2,}\\\\n\")\n\t\t\t.replace(/\\{2,\\}/g, \"*\")\n\t\t\t.getRegex(),\n\t},\n\tI = { normal: K, gfm: _e, pedantic: Le },\n\tM = { normal: X, gfm: N, breaks: We, pedantic: Ke };\nvar Xe = {\n\t\t\"&\": \"&amp;\",\n\t\t\"<\": \"&lt;\",\n\t\t\">\": \"&gt;\",\n\t\t'\"': \"&quot;\",\n\t\t\"'\": \"&#39;\",\n\t},\n\tke = (l) => Xe[l];\nfunction w(l, e) {\n\tif (e) {\n\t\tif (m.escapeTest.test(l)) return l.replace(m.escapeReplace, ke);\n\t} else if (m.escapeTestNoEncode.test(l))\n\t\treturn l.replace(m.escapeReplaceNoEncode, ke);\n\treturn l;\n}\nfunction J(l) {\n\ttry {\n\t\tl = encodeURI(l).replace(m.percentDecode, \"%\");\n\t} catch {\n\t\treturn null;\n\t}\n\treturn l;\n}\nfunction V(l, e) {\n\tlet t = l.replace(m.findPipe, (i, s, o) => {\n\t\t\tlet a = !1,\n\t\t\t\tu = s;\n\t\t\tfor (; --u >= 0 && o[u] === \"\\\\\"; ) a = !a;\n\t\t\treturn a ? \"|\" : \" |\";\n\t\t}),\n\t\tn = t.split(m.splitPipe),\n\t\tr = 0;\n\tif (\n\t\t(n[0].trim() || n.shift(), n.length > 0 && !n.at(-1)?.trim() && n.pop(), e)\n\t)\n\t\tif (n.length > e) n.splice(e);\n\t\telse for (; n.length < e; ) n.push(\"\");\n\tfor (; r < n.length; r++) n[r] = n[r].trim().replace(m.slashPipe, \"|\");\n\treturn n;\n}\nfunction z(l, e, t) {\n\tlet n = l.length;\n\tif (n === 0) return \"\";\n\tlet r = 0;\n\tfor (; r < n; ) {\n\t\tlet i = l.charAt(n - r - 1);\n\t\tif (i === e && !t) r++;\n\t\telse if (i !== e && t) r++;\n\t\telse break;\n\t}\n\treturn l.slice(0, n - r);\n}\nfunction ge(l, e) {\n\tif (l.indexOf(e[1]) === -1) return -1;\n\tlet t = 0;\n\tfor (let n = 0; n < l.length; n++)\n\t\tif (l[n] === \"\\\\\") n++;\n\t\telse if (l[n] === e[0]) t++;\n\t\telse if (l[n] === e[1] && (t--, t < 0)) return n;\n\treturn t > 0 ? -2 : -1;\n}\nfunction fe(l, e, t, n, r) {\n\tlet i = e.href,\n\t\ts = e.title || null,\n\t\to = l[1].replace(r.other.outputLinkReplace, \"$1\");\n\tn.state.inLink = !0;\n\tlet a = {\n\t\ttype: l[0].charAt(0) === \"!\" ? \"image\" : \"link\",\n\t\traw: t,\n\t\thref: i,\n\t\ttitle: s,\n\t\ttext: o,\n\t\ttokens: n.inlineTokens(o),\n\t};\n\treturn (n.state.inLink = !1), a;\n}\nfunction Je(l, e, t) {\n\tlet n = l.match(t.other.indentCodeCompensation);\n\tif (n === null) return e;\n\tlet r = n[1];\n\treturn e\n\t\t.split(\n\t\t\t`\n`\n\t\t)\n\t\t.map((i) => {\n\t\t\tlet s = i.match(t.other.beginningSpace);\n\t\t\tif (s === null) return i;\n\t\t\tlet [o] = s;\n\t\t\treturn o.length >= r.length ? i.slice(r.length) : i;\n\t\t}).join(`\n`);\n}\nvar y = class {\n\toptions;\n\trules;\n\tlexer;\n\tconstructor(e) {\n\t\tthis.options = e || O;\n\t}\n\tspace(e) {\n\t\tlet t = this.rules.block.newline.exec(e);\n\t\tif (t && t[0].length > 0) return { type: \"space\", raw: t[0] };\n\t}\n\tcode(e) {\n\t\tlet t = this.rules.block.code.exec(e);\n\t\tif (t) {\n\t\t\tlet n = t[0].replace(this.rules.other.codeRemoveIndent, \"\");\n\t\t\treturn {\n\t\t\t\ttype: \"code\",\n\t\t\t\traw: t[0],\n\t\t\t\tcodeBlockStyle: \"indented\",\n\t\t\t\ttext: this.options.pedantic\n\t\t\t\t\t? n\n\t\t\t\t\t: z(\n\t\t\t\t\t\t\tn,\n\t\t\t\t\t\t\t`\n`\n\t\t\t\t\t\t),\n\t\t\t};\n\t\t}\n\t}\n\tfences(e) {\n\t\tlet t = this.rules.block.fences.exec(e);\n\t\tif (t) {\n\t\t\tlet n = t[0],\n\t\t\t\tr = Je(n, t[3] || \"\", this.rules);\n\t\t\treturn {\n\t\t\t\ttype: \"code\",\n\t\t\t\traw: n,\n\t\t\t\tlang: t[2]\n\t\t\t\t\t? t[2].trim().replace(this.rules.inline.anyPunctuation, \"$1\")\n\t\t\t\t\t: t[2],\n\t\t\t\ttext: r,\n\t\t\t};\n\t\t}\n\t}\n\theading(e) {\n\t\tlet t = this.rules.block.heading.exec(e);\n\t\tif (t) {\n\t\t\tlet n = t[2].trim();\n\t\t\tif (this.rules.other.endingHash.test(n)) {\n\t\t\t\tlet r = z(n, \"#\");\n\t\t\t\t(this.options.pedantic ||\n\t\t\t\t\t!r ||\n\t\t\t\t\tthis.rules.other.endingSpaceChar.test(r)) &&\n\t\t\t\t\t(n = r.trim());\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttype: \"heading\",\n\t\t\t\traw: t[0],\n\t\t\t\tdepth: t[1].length,\n\t\t\t\ttext: n,\n\t\t\t\ttokens: this.lexer.inline(n),\n\t\t\t};\n\t\t}\n\t}\n\thr(e) {\n\t\tlet t = this.rules.block.hr.exec(e);\n\t\tif (t)\n\t\t\treturn {\n\t\t\t\ttype: \"hr\",\n\t\t\t\traw: z(\n\t\t\t\t\tt[0],\n\t\t\t\t\t`\n`\n\t\t\t\t),\n\t\t\t};\n\t}\n\tblockquote(e) {\n\t\tlet t = this.rules.block.blockquote.exec(e);\n\t\tif (t) {\n\t\t\tlet n = z(\n\t\t\t\t\tt[0],\n\t\t\t\t\t`\n`\n\t\t\t\t).split(`\n`),\n\t\t\t\tr = \"\",\n\t\t\t\ti = \"\",\n\t\t\t\ts = [];\n\t\t\tfor (; n.length > 0; ) {\n\t\t\t\tlet o = !1,\n\t\t\t\t\ta = [],\n\t\t\t\t\tu;\n\t\t\t\tfor (u = 0; u < n.length; u++)\n\t\t\t\t\tif (this.rules.other.blockquoteStart.test(n[u]))\n\t\t\t\t\t\ta.push(n[u]), (o = !0);\n\t\t\t\t\telse if (!o) a.push(n[u]);\n\t\t\t\t\telse break;\n\t\t\t\tn = n.slice(u);\n\t\t\t\tlet p = a.join(`\n`),\n\t\t\t\t\tc = p\n\t\t\t\t\t\t.replace(\n\t\t\t\t\t\t\tthis.rules.other.blockquoteSetextReplace,\n\t\t\t\t\t\t\t`\n    $1`\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.replace(this.rules.other.blockquoteSetextReplace2, \"\");\n\t\t\t\t(r = r\n\t\t\t\t\t? `${r}\n${p}`\n\t\t\t\t\t: p),\n\t\t\t\t\t(i = i\n\t\t\t\t\t\t? `${i}\n${c}`\n\t\t\t\t\t\t: c);\n\t\t\t\tlet f = this.lexer.state.top;\n\t\t\t\tif (\n\t\t\t\t\t((this.lexer.state.top = !0),\n\t\t\t\t\tthis.lexer.blockTokens(c, s, !0),\n\t\t\t\t\t(this.lexer.state.top = f),\n\t\t\t\t\tn.length === 0)\n\t\t\t\t)\n\t\t\t\t\tbreak;\n\t\t\t\tlet k = s.at(-1);\n\t\t\t\tif (k?.type === \"code\") break;\n\t\t\t\tif (k?.type === \"blockquote\") {\n\t\t\t\t\tlet x = k,\n\t\t\t\t\t\tg =\n\t\t\t\t\t\t\tx.raw +\n\t\t\t\t\t\t\t`\n` +\n\t\t\t\t\t\t\tn.join(`\n`),\n\t\t\t\t\t\tT = this.blockquote(g);\n\t\t\t\t\t(s[s.length - 1] = T),\n\t\t\t\t\t\t(r = r.substring(0, r.length - x.raw.length) + T.raw),\n\t\t\t\t\t\t(i = i.substring(0, i.length - x.text.length) + T.text);\n\t\t\t\t\tbreak;\n\t\t\t\t} else if (k?.type === \"list\") {\n\t\t\t\t\tlet x = k,\n\t\t\t\t\t\tg =\n\t\t\t\t\t\t\tx.raw +\n\t\t\t\t\t\t\t`\n` +\n\t\t\t\t\t\t\tn.join(`\n`),\n\t\t\t\t\t\tT = this.list(g);\n\t\t\t\t\t(s[s.length - 1] = T),\n\t\t\t\t\t\t(r = r.substring(0, r.length - k.raw.length) + T.raw),\n\t\t\t\t\t\t(i = i.substring(0, i.length - x.raw.length) + T.raw),\n\t\t\t\t\t\t(n = g.substring(s.at(-1).raw.length).split(`\n`));\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn { type: \"blockquote\", raw: r, tokens: s, text: i };\n\t\t}\n\t}\n\tlist(e) {\n\t\tlet t = this.rules.block.list.exec(e);\n\t\tif (t) {\n\t\t\tlet n = t[1].trim(),\n\t\t\t\tr = n.length > 1,\n\t\t\t\ti = {\n\t\t\t\t\ttype: \"list\",\n\t\t\t\t\traw: \"\",\n\t\t\t\t\tordered: r,\n\t\t\t\t\tstart: r ? +n.slice(0, -1) : \"\",\n\t\t\t\t\tloose: !1,\n\t\t\t\t\titems: [],\n\t\t\t\t};\n\t\t\t(n = r ? `\\\\d{1,9}\\\\${n.slice(-1)}` : `\\\\${n}`),\n\t\t\t\tthis.options.pedantic && (n = r ? n : \"[*+-]\");\n\t\t\tlet s = this.rules.other.listItemRegex(n),\n\t\t\t\to = !1;\n\t\t\tfor (; e; ) {\n\t\t\t\tlet u = !1,\n\t\t\t\t\tp = \"\",\n\t\t\t\t\tc = \"\";\n\t\t\t\tif (!(t = s.exec(e)) || this.rules.block.hr.test(e)) break;\n\t\t\t\t(p = t[0]), (e = e.substring(p.length));\n\t\t\t\tlet f = t[2]\n\t\t\t\t\t\t.split(\n\t\t\t\t\t\t\t`\n`,\n\t\t\t\t\t\t\t1\n\t\t\t\t\t\t)[0]\n\t\t\t\t\t\t.replace(this.rules.other.listReplaceTabs, (H) =>\n\t\t\t\t\t\t\t\" \".repeat(3 * H.length)\n\t\t\t\t\t\t),\n\t\t\t\t\tk = e.split(\n\t\t\t\t\t\t`\n`,\n\t\t\t\t\t\t1\n\t\t\t\t\t)[0],\n\t\t\t\t\tx = !f.trim(),\n\t\t\t\t\tg = 0;\n\t\t\t\tif (\n\t\t\t\t\t(this.options.pedantic\n\t\t\t\t\t\t? ((g = 2), (c = f.trimStart()))\n\t\t\t\t\t\t: x\n\t\t\t\t\t\t\t? (g = t[1].length + 1)\n\t\t\t\t\t\t\t: ((g = t[2].search(this.rules.other.nonSpaceChar)),\n\t\t\t\t\t\t\t\t(g = g > 4 ? 1 : g),\n\t\t\t\t\t\t\t\t(c = f.slice(g)),\n\t\t\t\t\t\t\t\t(g += t[1].length)),\n\t\t\t\t\tx &&\n\t\t\t\t\t\tthis.rules.other.blankLine.test(k) &&\n\t\t\t\t\t\t((p +=\n\t\t\t\t\t\t\tk +\n\t\t\t\t\t\t\t`\n`),\n\t\t\t\t\t\t(e = e.substring(k.length + 1)),\n\t\t\t\t\t\t(u = !0)),\n\t\t\t\t\t!u)\n\t\t\t\t) {\n\t\t\t\t\tlet H = this.rules.other.nextBulletRegex(g),\n\t\t\t\t\t\tee = this.rules.other.hrRegex(g),\n\t\t\t\t\t\tte = this.rules.other.fencesBeginRegex(g),\n\t\t\t\t\t\tne = this.rules.other.headingBeginRegex(g),\n\t\t\t\t\t\tme = this.rules.other.htmlBeginRegex(g);\n\t\t\t\t\tfor (; e; ) {\n\t\t\t\t\t\tlet Z = e.split(\n\t\t\t\t\t\t\t\t`\n`,\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t)[0],\n\t\t\t\t\t\t\tA;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t((k = Z),\n\t\t\t\t\t\t\tthis.options.pedantic\n\t\t\t\t\t\t\t\t? ((k = k.replace(this.rules.other.listReplaceNesting, \"  \")),\n\t\t\t\t\t\t\t\t\t(A = k))\n\t\t\t\t\t\t\t\t: (A = k.replace(this.rules.other.tabCharGlobal, \"    \")),\n\t\t\t\t\t\t\tte.test(k) || ne.test(k) || me.test(k) || H.test(k) || ee.test(k))\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tif (A.search(this.rules.other.nonSpaceChar) >= g || !k.trim())\n\t\t\t\t\t\t\tc +=\n\t\t\t\t\t\t\t\t`\n` + A.slice(g);\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tx ||\n\t\t\t\t\t\t\t\tf\n\t\t\t\t\t\t\t\t\t.replace(this.rules.other.tabCharGlobal, \"    \")\n\t\t\t\t\t\t\t\t\t.search(this.rules.other.nonSpaceChar) >= 4 ||\n\t\t\t\t\t\t\t\tte.test(f) ||\n\t\t\t\t\t\t\t\tne.test(f) ||\n\t\t\t\t\t\t\t\tee.test(f)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tc +=\n\t\t\t\t\t\t\t\t`\n` + k;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t!x && !k.trim() && (x = !0),\n\t\t\t\t\t\t\t(p +=\n\t\t\t\t\t\t\t\tZ +\n\t\t\t\t\t\t\t\t`\n`),\n\t\t\t\t\t\t\t(e = e.substring(Z.length + 1)),\n\t\t\t\t\t\t\t(f = A.slice(g));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ti.loose ||\n\t\t\t\t\t(o\n\t\t\t\t\t\t? (i.loose = !0)\n\t\t\t\t\t\t: this.rules.other.doubleBlankLine.test(p) && (o = !0));\n\t\t\t\tlet T = null,\n\t\t\t\t\tY;\n\t\t\t\tthis.options.gfm &&\n\t\t\t\t\t((T = this.rules.other.listIsTask.exec(c)),\n\t\t\t\t\tT &&\n\t\t\t\t\t\t((Y = T[0] !== \"[ ] \"),\n\t\t\t\t\t\t(c = c.replace(this.rules.other.listReplaceTask, \"\")))),\n\t\t\t\t\ti.items.push({\n\t\t\t\t\t\ttype: \"list_item\",\n\t\t\t\t\t\traw: p,\n\t\t\t\t\t\ttask: !!T,\n\t\t\t\t\t\tchecked: Y,\n\t\t\t\t\t\tloose: !1,\n\t\t\t\t\t\ttext: c,\n\t\t\t\t\t\ttokens: [],\n\t\t\t\t\t}),\n\t\t\t\t\t(i.raw += p);\n\t\t\t}\n\t\t\tlet a = i.items.at(-1);\n\t\t\tif (a) (a.raw = a.raw.trimEnd()), (a.text = a.text.trimEnd());\n\t\t\telse return;\n\t\t\ti.raw = i.raw.trimEnd();\n\t\t\tfor (let u = 0; u < i.items.length; u++)\n\t\t\t\tif (\n\t\t\t\t\t((this.lexer.state.top = !1),\n\t\t\t\t\t(i.items[u].tokens = this.lexer.blockTokens(i.items[u].text, [])),\n\t\t\t\t\t!i.loose)\n\t\t\t\t) {\n\t\t\t\t\tlet p = i.items[u].tokens.filter((f) => f.type === \"space\"),\n\t\t\t\t\t\tc =\n\t\t\t\t\t\t\tp.length > 0 &&\n\t\t\t\t\t\t\tp.some((f) => this.rules.other.anyLine.test(f.raw));\n\t\t\t\t\ti.loose = c;\n\t\t\t\t}\n\t\t\tif (i.loose)\n\t\t\t\tfor (let u = 0; u < i.items.length; u++) i.items[u].loose = !0;\n\t\t\treturn i;\n\t\t}\n\t}\n\thtml(e) {\n\t\tlet t = this.rules.block.html.exec(e);\n\t\tif (t)\n\t\t\treturn {\n\t\t\t\ttype: \"html\",\n\t\t\t\tblock: !0,\n\t\t\t\traw: t[0],\n\t\t\t\tpre: t[1] === \"pre\" || t[1] === \"script\" || t[1] === \"style\",\n\t\t\t\ttext: t[0],\n\t\t\t};\n\t}\n\tdef(e) {\n\t\tlet t = this.rules.block.def.exec(e);\n\t\tif (t) {\n\t\t\tlet n = t[1]\n\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t.replace(this.rules.other.multipleSpaceGlobal, \" \"),\n\t\t\t\tr = t[2]\n\t\t\t\t\t? t[2]\n\t\t\t\t\t\t\t.replace(this.rules.other.hrefBrackets, \"$1\")\n\t\t\t\t\t\t\t.replace(this.rules.inline.anyPunctuation, \"$1\")\n\t\t\t\t\t: \"\",\n\t\t\t\ti = t[3]\n\t\t\t\t\t? t[3]\n\t\t\t\t\t\t\t.substring(1, t[3].length - 1)\n\t\t\t\t\t\t\t.replace(this.rules.inline.anyPunctuation, \"$1\")\n\t\t\t\t\t: t[3];\n\t\t\treturn { type: \"def\", tag: n, raw: t[0], href: r, title: i };\n\t\t}\n\t}\n\ttable(e) {\n\t\tlet t = this.rules.block.table.exec(e);\n\t\tif (!t || !this.rules.other.tableDelimiter.test(t[2])) return;\n\t\tlet n = V(t[1]),\n\t\t\tr = t[2].replace(this.rules.other.tableAlignChars, \"\").split(\"|\"),\n\t\t\ti = t[3]?.trim()\n\t\t\t\t? t[3].replace(this.rules.other.tableRowBlankLine, \"\").split(`\n`)\n\t\t\t\t: [],\n\t\t\ts = { type: \"table\", raw: t[0], header: [], align: [], rows: [] };\n\t\tif (n.length === r.length) {\n\t\t\tfor (let o of r)\n\t\t\t\tthis.rules.other.tableAlignRight.test(o)\n\t\t\t\t\t? s.align.push(\"right\")\n\t\t\t\t\t: this.rules.other.tableAlignCenter.test(o)\n\t\t\t\t\t\t? s.align.push(\"center\")\n\t\t\t\t\t\t: this.rules.other.tableAlignLeft.test(o)\n\t\t\t\t\t\t\t? s.align.push(\"left\")\n\t\t\t\t\t\t\t: s.align.push(null);\n\t\t\tfor (let o = 0; o < n.length; o++)\n\t\t\t\ts.header.push({\n\t\t\t\t\ttext: n[o],\n\t\t\t\t\ttokens: this.lexer.inline(n[o]),\n\t\t\t\t\theader: !0,\n\t\t\t\t\talign: s.align[o],\n\t\t\t\t});\n\t\t\tfor (let o of i)\n\t\t\t\ts.rows.push(\n\t\t\t\t\tV(o, s.header.length).map((a, u) => ({\n\t\t\t\t\t\ttext: a,\n\t\t\t\t\t\ttokens: this.lexer.inline(a),\n\t\t\t\t\t\theader: !1,\n\t\t\t\t\t\talign: s.align[u],\n\t\t\t\t\t}))\n\t\t\t\t);\n\t\t\treturn s;\n\t\t}\n\t}\n\tlheading(e) {\n\t\tlet t = this.rules.block.lheading.exec(e);\n\t\tif (t)\n\t\t\treturn {\n\t\t\t\ttype: \"heading\",\n\t\t\t\traw: t[0],\n\t\t\t\tdepth: t[2].charAt(0) === \"=\" ? 1 : 2,\n\t\t\t\ttext: t[1],\n\t\t\t\ttokens: this.lexer.inline(t[1]),\n\t\t\t};\n\t}\n\tparagraph(e) {\n\t\tlet t = this.rules.block.paragraph.exec(e);\n\t\tif (t) {\n\t\t\tlet n =\n\t\t\t\tt[1].charAt(t[1].length - 1) ===\n\t\t\t\t`\n`\n\t\t\t\t\t? t[1].slice(0, -1)\n\t\t\t\t\t: t[1];\n\t\t\treturn {\n\t\t\t\ttype: \"paragraph\",\n\t\t\t\traw: t[0],\n\t\t\t\ttext: n,\n\t\t\t\ttokens: this.lexer.inline(n),\n\t\t\t};\n\t\t}\n\t}\n\ttext(e) {\n\t\tlet t = this.rules.block.text.exec(e);\n\t\tif (t)\n\t\t\treturn {\n\t\t\t\ttype: \"text\",\n\t\t\t\traw: t[0],\n\t\t\t\ttext: t[0],\n\t\t\t\ttokens: this.lexer.inline(t[0]),\n\t\t\t};\n\t}\n\tescape(e) {\n\t\tlet t = this.rules.inline.escape.exec(e);\n\t\tif (t) return { type: \"escape\", raw: t[0], text: t[1] };\n\t}\n\ttag(e) {\n\t\tlet t = this.rules.inline.tag.exec(e);\n\t\tif (t)\n\t\t\treturn (\n\t\t\t\t!this.lexer.state.inLink && this.rules.other.startATag.test(t[0])\n\t\t\t\t\t? (this.lexer.state.inLink = !0)\n\t\t\t\t\t: this.lexer.state.inLink &&\n\t\t\t\t\t\tthis.rules.other.endATag.test(t[0]) &&\n\t\t\t\t\t\t(this.lexer.state.inLink = !1),\n\t\t\t\t!this.lexer.state.inRawBlock &&\n\t\t\t\tthis.rules.other.startPreScriptTag.test(t[0])\n\t\t\t\t\t? (this.lexer.state.inRawBlock = !0)\n\t\t\t\t\t: this.lexer.state.inRawBlock &&\n\t\t\t\t\t\tthis.rules.other.endPreScriptTag.test(t[0]) &&\n\t\t\t\t\t\t(this.lexer.state.inRawBlock = !1),\n\t\t\t\t{\n\t\t\t\t\ttype: \"html\",\n\t\t\t\t\traw: t[0],\n\t\t\t\t\tinLink: this.lexer.state.inLink,\n\t\t\t\t\tinRawBlock: this.lexer.state.inRawBlock,\n\t\t\t\t\tblock: !1,\n\t\t\t\t\ttext: t[0],\n\t\t\t\t}\n\t\t\t);\n\t}\n\tlink(e) {\n\t\tlet t = this.rules.inline.link.exec(e);\n\t\tif (t) {\n\t\t\tlet n = t[2].trim();\n\t\t\tif (\n\t\t\t\t!this.options.pedantic &&\n\t\t\t\tthis.rules.other.startAngleBracket.test(n)\n\t\t\t) {\n\t\t\t\tif (!this.rules.other.endAngleBracket.test(n)) return;\n\t\t\t\tlet s = z(n.slice(0, -1), \"\\\\\");\n\t\t\t\tif ((n.length - s.length) % 2 === 0) return;\n\t\t\t} else {\n\t\t\t\tlet s = ge(t[2], \"()\");\n\t\t\t\tif (s === -2) return;\n\t\t\t\tif (s > -1) {\n\t\t\t\t\tlet a = (t[0].indexOf(\"!\") === 0 ? 5 : 4) + t[1].length + s;\n\t\t\t\t\t(t[2] = t[2].substring(0, s)),\n\t\t\t\t\t\t(t[0] = t[0].substring(0, a).trim()),\n\t\t\t\t\t\t(t[3] = \"\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet r = t[2],\n\t\t\t\ti = \"\";\n\t\t\tif (this.options.pedantic) {\n\t\t\t\tlet s = this.rules.other.pedanticHrefTitle.exec(r);\n\t\t\t\ts && ((r = s[1]), (i = s[3]));\n\t\t\t} else i = t[3] ? t[3].slice(1, -1) : \"\";\n\t\t\treturn (\n\t\t\t\t(r = r.trim()),\n\t\t\t\tthis.rules.other.startAngleBracket.test(r) &&\n\t\t\t\t\t(this.options.pedantic && !this.rules.other.endAngleBracket.test(n)\n\t\t\t\t\t\t? (r = r.slice(1))\n\t\t\t\t\t\t: (r = r.slice(1, -1))),\n\t\t\t\tfe(\n\t\t\t\t\tt,\n\t\t\t\t\t{\n\t\t\t\t\t\thref: r && r.replace(this.rules.inline.anyPunctuation, \"$1\"),\n\t\t\t\t\t\ttitle: i && i.replace(this.rules.inline.anyPunctuation, \"$1\"),\n\t\t\t\t\t},\n\t\t\t\t\tt[0],\n\t\t\t\t\tthis.lexer,\n\t\t\t\t\tthis.rules\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\treflink(e, t) {\n\t\tlet n;\n\t\tif (\n\t\t\t(n = this.rules.inline.reflink.exec(e)) ||\n\t\t\t(n = this.rules.inline.nolink.exec(e))\n\t\t) {\n\t\t\tlet r = (n[2] || n[1]).replace(this.rules.other.multipleSpaceGlobal, \" \"),\n\t\t\t\ti = t[r.toLowerCase()];\n\t\t\tif (!i) {\n\t\t\t\tlet s = n[0].charAt(0);\n\t\t\t\treturn { type: \"text\", raw: s, text: s };\n\t\t\t}\n\t\t\treturn fe(n, i, n[0], this.lexer, this.rules);\n\t\t}\n\t}\n\temStrong(e, t, n = \"\") {\n\t\tlet r = this.rules.inline.emStrongLDelim.exec(e);\n\t\tif (!r || (r[3] && n.match(this.rules.other.unicodeAlphaNumeric))) return;\n\t\tif (!(r[1] || r[2] || \"\") || !n || this.rules.inline.punctuation.exec(n)) {\n\t\t\tlet s = [...r[0]].length - 1,\n\t\t\t\to,\n\t\t\t\ta,\n\t\t\t\tu = s,\n\t\t\t\tp = 0,\n\t\t\t\tc =\n\t\t\t\t\tr[0][0] === \"*\"\n\t\t\t\t\t\t? this.rules.inline.emStrongRDelimAst\n\t\t\t\t\t\t: this.rules.inline.emStrongRDelimUnd;\n\t\t\tfor (\n\t\t\t\tc.lastIndex = 0, t = t.slice(-1 * e.length + s);\n\t\t\t\t(r = c.exec(t)) != null;\n\n\t\t\t) {\n\t\t\t\tif (((o = r[1] || r[2] || r[3] || r[4] || r[5] || r[6]), !o)) continue;\n\t\t\t\tif (((a = [...o].length), r[3] || r[4])) {\n\t\t\t\t\tu += a;\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if ((r[5] || r[6]) && s % 3 && !((s + a) % 3)) {\n\t\t\t\t\tp += a;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (((u -= a), u > 0)) continue;\n\t\t\t\ta = Math.min(a, a + u + p);\n\t\t\t\tlet f = [...r[0]][0].length,\n\t\t\t\t\tk = e.slice(0, s + r.index + f + a);\n\t\t\t\tif (Math.min(s, a) % 2) {\n\t\t\t\t\tlet g = k.slice(1, -1);\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: \"em\",\n\t\t\t\t\t\traw: k,\n\t\t\t\t\t\ttext: g,\n\t\t\t\t\t\ttokens: this.lexer.inlineTokens(g),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tlet x = k.slice(2, -2);\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"strong\",\n\t\t\t\t\traw: k,\n\t\t\t\t\ttext: x,\n\t\t\t\t\ttokens: this.lexer.inlineTokens(x),\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\tcodespan(e) {\n\t\tlet t = this.rules.inline.code.exec(e);\n\t\tif (t) {\n\t\t\tlet n = t[2].replace(this.rules.other.newLineCharGlobal, \" \"),\n\t\t\t\tr = this.rules.other.nonSpaceChar.test(n),\n\t\t\t\ti =\n\t\t\t\t\tthis.rules.other.startingSpaceChar.test(n) &&\n\t\t\t\t\tthis.rules.other.endingSpaceChar.test(n);\n\t\t\treturn (\n\t\t\t\tr && i && (n = n.substring(1, n.length - 1)),\n\t\t\t\t{ type: \"codespan\", raw: t[0], text: n }\n\t\t\t);\n\t\t}\n\t}\n\tbr(e) {\n\t\tlet t = this.rules.inline.br.exec(e);\n\t\tif (t) return { type: \"br\", raw: t[0] };\n\t}\n\tdel(e) {\n\t\tlet t = this.rules.inline.del.exec(e);\n\t\tif (t)\n\t\t\treturn {\n\t\t\t\ttype: \"del\",\n\t\t\t\traw: t[0],\n\t\t\t\ttext: t[2],\n\t\t\t\ttokens: this.lexer.inlineTokens(t[2]),\n\t\t\t};\n\t}\n\tautolink(e) {\n\t\tlet t = this.rules.inline.autolink.exec(e);\n\t\tif (t) {\n\t\t\tlet n, r;\n\t\t\treturn (\n\t\t\t\tt[2] === \"@\"\n\t\t\t\t\t? ((n = t[1]), (r = \"mailto:\" + n))\n\t\t\t\t\t: ((n = t[1]), (r = n)),\n\t\t\t\t{\n\t\t\t\t\ttype: \"link\",\n\t\t\t\t\traw: t[0],\n\t\t\t\t\ttext: n,\n\t\t\t\t\thref: r,\n\t\t\t\t\ttokens: [{ type: \"text\", raw: n, text: n }],\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\turl(e) {\n\t\tlet t;\n\t\tif ((t = this.rules.inline.url.exec(e))) {\n\t\t\tlet n, r;\n\t\t\tif (t[2] === \"@\") (n = t[0]), (r = \"mailto:\" + n);\n\t\t\telse {\n\t\t\t\tlet i;\n\t\t\t\tdo\n\t\t\t\t\t(i = t[0]),\n\t\t\t\t\t\t(t[0] = this.rules.inline._backpedal.exec(t[0])?.[0] ?? \"\");\n\t\t\t\twhile (i !== t[0]);\n\t\t\t\t(n = t[0]), t[1] === \"www.\" ? (r = \"http://\" + t[0]) : (r = t[0]);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttype: \"link\",\n\t\t\t\traw: t[0],\n\t\t\t\ttext: n,\n\t\t\t\thref: r,\n\t\t\t\ttokens: [{ type: \"text\", raw: n, text: n }],\n\t\t\t};\n\t\t}\n\t}\n\tinlineText(e) {\n\t\tlet t = this.rules.inline.text.exec(e);\n\t\tif (t) {\n\t\t\tlet n = this.lexer.state.inRawBlock;\n\t\t\treturn { type: \"text\", raw: t[0], text: t[0], escaped: n };\n\t\t}\n\t}\n};\nvar b = class l {\n\ttokens;\n\toptions;\n\tstate;\n\ttokenizer;\n\tinlineQueue;\n\tconstructor(e) {\n\t\t(this.tokens = []),\n\t\t\t(this.tokens.links = Object.create(null)),\n\t\t\t(this.options = e || O),\n\t\t\t(this.options.tokenizer = this.options.tokenizer || new y()),\n\t\t\t(this.tokenizer = this.options.tokenizer),\n\t\t\t(this.tokenizer.options = this.options),\n\t\t\t(this.tokenizer.lexer = this),\n\t\t\t(this.inlineQueue = []),\n\t\t\t(this.state = { inLink: !1, inRawBlock: !1, top: !0 });\n\t\tlet t = { other: m, block: I.normal, inline: M.normal };\n\t\tthis.options.pedantic\n\t\t\t? ((t.block = I.pedantic), (t.inline = M.pedantic))\n\t\t\t: this.options.gfm &&\n\t\t\t\t((t.block = I.gfm),\n\t\t\t\tthis.options.breaks ? (t.inline = M.breaks) : (t.inline = M.gfm)),\n\t\t\t(this.tokenizer.rules = t);\n\t}\n\tstatic get rules() {\n\t\treturn { block: I, inline: M };\n\t}\n\tstatic lex(e, t) {\n\t\treturn new l(t).lex(e);\n\t}\n\tstatic lexInline(e, t) {\n\t\treturn new l(t).inlineTokens(e);\n\t}\n\tlex(e) {\n\t\t(e = e.replace(\n\t\t\tm.carriageReturn,\n\t\t\t`\n`\n\t\t)),\n\t\t\tthis.blockTokens(e, this.tokens);\n\t\tfor (let t = 0; t < this.inlineQueue.length; t++) {\n\t\t\tlet n = this.inlineQueue[t];\n\t\t\tthis.inlineTokens(n.src, n.tokens);\n\t\t}\n\t\treturn (this.inlineQueue = []), this.tokens;\n\t}\n\tblockTokens(e, t = [], n = !1) {\n\t\tfor (\n\t\t\tthis.options.pedantic &&\n\t\t\t(e = e.replace(m.tabCharGlobal, \"    \").replace(m.spaceLine, \"\"));\n\t\t\te;\n\n\t\t) {\n\t\t\tlet r;\n\t\t\tif (\n\t\t\t\tthis.options.extensions?.block?.some((s) =>\n\t\t\t\t\t(r = s.call({ lexer: this }, e, t))\n\t\t\t\t\t\t? ((e = e.substring(r.raw.length)), t.push(r), !0)\n\t\t\t\t\t\t: !1\n\t\t\t\t)\n\t\t\t)\n\t\t\t\tcontinue;\n\t\t\tif ((r = this.tokenizer.space(e))) {\n\t\t\t\te = e.substring(r.raw.length);\n\t\t\t\tlet s = t.at(-1);\n\t\t\t\tr.raw.length === 1 && s !== void 0\n\t\t\t\t\t? (s.raw += `\n`)\n\t\t\t\t\t: t.push(r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((r = this.tokenizer.code(e))) {\n\t\t\t\te = e.substring(r.raw.length);\n\t\t\t\tlet s = t.at(-1);\n\t\t\t\ts?.type === \"paragraph\" || s?.type === \"text\"\n\t\t\t\t\t? ((s.raw +=\n\t\t\t\t\t\t\t(s.raw.endsWith(`\n`)\n\t\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t\t: `\n`) + r.raw),\n\t\t\t\t\t\t(s.text +=\n\t\t\t\t\t\t\t`\n` + r.text),\n\t\t\t\t\t\t(this.inlineQueue.at(-1).src = s.text))\n\t\t\t\t\t: t.push(r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((r = this.tokenizer.fences(e))) {\n\t\t\t\t(e = e.substring(r.raw.length)), t.push(r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((r = this.tokenizer.heading(e))) {\n\t\t\t\t(e = e.substring(r.raw.length)), t.push(r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((r = this.tokenizer.hr(e))) {\n\t\t\t\t(e = e.substring(r.raw.length)), t.push(r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((r = this.tokenizer.blockquote(e))) {\n\t\t\t\t(e = e.substring(r.raw.length)), t.push(r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((r = this.tokenizer.list(e))) {\n\t\t\t\t(e = e.substring(r.raw.length)), t.push(r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((r = this.tokenizer.html(e))) {\n\t\t\t\t(e = e.substring(r.raw.length)), t.push(r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((r = this.tokenizer.def(e))) {\n\t\t\t\te = e.substring(r.raw.length);\n\t\t\t\tlet s = t.at(-1);\n\t\t\t\ts?.type === \"paragraph\" || s?.type === \"text\"\n\t\t\t\t\t? ((s.raw +=\n\t\t\t\t\t\t\t(s.raw.endsWith(`\n`)\n\t\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t\t: `\n`) + r.raw),\n\t\t\t\t\t\t(s.text +=\n\t\t\t\t\t\t\t`\n` + r.raw),\n\t\t\t\t\t\t(this.inlineQueue.at(-1).src = s.text))\n\t\t\t\t\t: this.tokens.links[r.tag] ||\n\t\t\t\t\t\t((this.tokens.links[r.tag] = { href: r.href, title: r.title }),\n\t\t\t\t\t\tt.push(r));\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((r = this.tokenizer.table(e))) {\n\t\t\t\t(e = e.substring(r.raw.length)), t.push(r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((r = this.tokenizer.lheading(e))) {\n\t\t\t\t(e = e.substring(r.raw.length)), t.push(r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet i = e;\n\t\t\tif (this.options.extensions?.startBlock) {\n\t\t\t\tlet s = 1 / 0,\n\t\t\t\t\to = e.slice(1),\n\t\t\t\t\ta;\n\t\t\t\tthis.options.extensions.startBlock.forEach((u) => {\n\t\t\t\t\t(a = u.call({ lexer: this }, o)),\n\t\t\t\t\t\ttypeof a == \"number\" && a >= 0 && (s = Math.min(s, a));\n\t\t\t\t}),\n\t\t\t\t\ts < 1 / 0 && s >= 0 && (i = e.substring(0, s + 1));\n\t\t\t}\n\t\t\tif (this.state.top && (r = this.tokenizer.paragraph(i))) {\n\t\t\t\tlet s = t.at(-1);\n\t\t\t\tn && s?.type === \"paragraph\"\n\t\t\t\t\t? ((s.raw +=\n\t\t\t\t\t\t\t(s.raw.endsWith(`\n`)\n\t\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t\t: `\n`) + r.raw),\n\t\t\t\t\t\t(s.text +=\n\t\t\t\t\t\t\t`\n` + r.text),\n\t\t\t\t\t\tthis.inlineQueue.pop(),\n\t\t\t\t\t\t(this.inlineQueue.at(-1).src = s.text))\n\t\t\t\t\t: t.push(r),\n\t\t\t\t\t(n = i.length !== e.length),\n\t\t\t\t\t(e = e.substring(r.raw.length));\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((r = this.tokenizer.text(e))) {\n\t\t\t\te = e.substring(r.raw.length);\n\t\t\t\tlet s = t.at(-1);\n\t\t\t\ts?.type === \"text\"\n\t\t\t\t\t? ((s.raw +=\n\t\t\t\t\t\t\t(s.raw.endsWith(`\n`)\n\t\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t\t: `\n`) + r.raw),\n\t\t\t\t\t\t(s.text +=\n\t\t\t\t\t\t\t`\n` + r.text),\n\t\t\t\t\t\tthis.inlineQueue.pop(),\n\t\t\t\t\t\t(this.inlineQueue.at(-1).src = s.text))\n\t\t\t\t\t: t.push(r);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (e) {\n\t\t\t\tlet s = \"Infinite loop on byte: \" + e.charCodeAt(0);\n\t\t\t\tif (this.options.silent) {\n\t\t\t\t\tconsole.error(s);\n\t\t\t\t\tbreak;\n\t\t\t\t} else throw new Error(s);\n\t\t\t}\n\t\t}\n\t\treturn (this.state.top = !0), t;\n\t}\n\tinline(e, t = []) {\n\t\treturn this.inlineQueue.push({ src: e, tokens: t }), t;\n\t}\n\tinlineTokens(e, t = []) {\n\t\tlet n = e,\n\t\t\tr = null;\n\t\tif (this.tokens.links) {\n\t\t\tlet o = Object.keys(this.tokens.links);\n\t\t\tif (o.length > 0)\n\t\t\t\tfor (\n\t\t\t\t\t;\n\t\t\t\t\t(r = this.tokenizer.rules.inline.reflinkSearch.exec(n)) != null;\n\n\t\t\t\t)\n\t\t\t\t\to.includes(r[0].slice(r[0].lastIndexOf(\"[\") + 1, -1)) &&\n\t\t\t\t\t\t(n =\n\t\t\t\t\t\t\tn.slice(0, r.index) +\n\t\t\t\t\t\t\t\"[\" +\n\t\t\t\t\t\t\t\"a\".repeat(r[0].length - 2) +\n\t\t\t\t\t\t\t\"]\" +\n\t\t\t\t\t\t\tn.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex));\n\t\t}\n\t\tfor (; (r = this.tokenizer.rules.inline.anyPunctuation.exec(n)) != null; )\n\t\t\tn =\n\t\t\t\tn.slice(0, r.index) +\n\t\t\t\t\"++\" +\n\t\t\t\tn.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);\n\t\tfor (; (r = this.tokenizer.rules.inline.blockSkip.exec(n)) != null; )\n\t\t\tn =\n\t\t\t\tn.slice(0, r.index) +\n\t\t\t\t\"[\" +\n\t\t\t\t\"a\".repeat(r[0].length - 2) +\n\t\t\t\t\"]\" +\n\t\t\t\tn.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n\t\tn = this.options.hooks?.emStrongMask?.call({ lexer: this }, n) ?? n;\n\t\tlet i = !1,\n\t\t\ts = \"\";\n\t\tfor (; e; ) {\n\t\t\ti || (s = \"\"), (i = !1);\n\t\t\tlet o;\n\t\t\tif (\n\t\t\t\tthis.options.extensions?.inline?.some((u) =>\n\t\t\t\t\t(o = u.call({ lexer: this }, e, t))\n\t\t\t\t\t\t? ((e = e.substring(o.raw.length)), t.push(o), !0)\n\t\t\t\t\t\t: !1\n\t\t\t\t)\n\t\t\t)\n\t\t\t\tcontinue;\n\t\t\tif ((o = this.tokenizer.escape(e))) {\n\t\t\t\t(e = e.substring(o.raw.length)), t.push(o);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((o = this.tokenizer.tag(e))) {\n\t\t\t\t(e = e.substring(o.raw.length)), t.push(o);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((o = this.tokenizer.link(e))) {\n\t\t\t\t(e = e.substring(o.raw.length)), t.push(o);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((o = this.tokenizer.reflink(e, this.tokens.links))) {\n\t\t\t\te = e.substring(o.raw.length);\n\t\t\t\tlet u = t.at(-1);\n\t\t\t\to.type === \"text\" && u?.type === \"text\"\n\t\t\t\t\t? ((u.raw += o.raw), (u.text += o.text))\n\t\t\t\t\t: t.push(o);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((o = this.tokenizer.emStrong(e, n, s))) {\n\t\t\t\t(e = e.substring(o.raw.length)), t.push(o);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((o = this.tokenizer.codespan(e))) {\n\t\t\t\t(e = e.substring(o.raw.length)), t.push(o);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((o = this.tokenizer.br(e))) {\n\t\t\t\t(e = e.substring(o.raw.length)), t.push(o);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((o = this.tokenizer.del(e))) {\n\t\t\t\t(e = e.substring(o.raw.length)), t.push(o);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((o = this.tokenizer.autolink(e))) {\n\t\t\t\t(e = e.substring(o.raw.length)), t.push(o);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!this.state.inLink && (o = this.tokenizer.url(e))) {\n\t\t\t\t(e = e.substring(o.raw.length)), t.push(o);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet a = e;\n\t\t\tif (this.options.extensions?.startInline) {\n\t\t\t\tlet u = 1 / 0,\n\t\t\t\t\tp = e.slice(1),\n\t\t\t\t\tc;\n\t\t\t\tthis.options.extensions.startInline.forEach((f) => {\n\t\t\t\t\t(c = f.call({ lexer: this }, p)),\n\t\t\t\t\t\ttypeof c == \"number\" && c >= 0 && (u = Math.min(u, c));\n\t\t\t\t}),\n\t\t\t\t\tu < 1 / 0 && u >= 0 && (a = e.substring(0, u + 1));\n\t\t\t}\n\t\t\tif ((o = this.tokenizer.inlineText(a))) {\n\t\t\t\t(e = e.substring(o.raw.length)),\n\t\t\t\t\to.raw.slice(-1) !== \"_\" && (s = o.raw.slice(-1)),\n\t\t\t\t\t(i = !0);\n\t\t\t\tlet u = t.at(-1);\n\t\t\t\tu?.type === \"text\" ? ((u.raw += o.raw), (u.text += o.text)) : t.push(o);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (e) {\n\t\t\t\tlet u = \"Infinite loop on byte: \" + e.charCodeAt(0);\n\t\t\t\tif (this.options.silent) {\n\t\t\t\t\tconsole.error(u);\n\t\t\t\t\tbreak;\n\t\t\t\t} else throw new Error(u);\n\t\t\t}\n\t\t}\n\t\treturn t;\n\t}\n};\nvar P = class {\n\toptions;\n\tparser;\n\tconstructor(e) {\n\t\tthis.options = e || O;\n\t}\n\tspace(e) {\n\t\treturn \"\";\n\t}\n\tcode({ text: e, lang: t, escaped: n }) {\n\t\tlet r = (t || \"\").match(m.notSpaceStart)?.[0],\n\t\t\ti =\n\t\t\t\te.replace(m.endingNewline, \"\") +\n\t\t\t\t`\n`;\n\t\treturn r\n\t\t\t? '<pre><code class=\"language-' +\n\t\t\t\t\tw(r) +\n\t\t\t\t\t'\">' +\n\t\t\t\t\t(n ? i : w(i, !0)) +\n\t\t\t\t\t`</code></pre>\n`\n\t\t\t: \"<pre><code>\" +\n\t\t\t\t\t(n ? i : w(i, !0)) +\n\t\t\t\t\t`</code></pre>\n`;\n\t}\n\tblockquote({ tokens: e }) {\n\t\treturn `<blockquote>\n${this.parser.parse(e)}</blockquote>\n`;\n\t}\n\thtml({ text: e }) {\n\t\treturn e;\n\t}\n\tdef(e) {\n\t\treturn \"\";\n\t}\n\theading({ tokens: e, depth: t }) {\n\t\treturn `<h${t}>${this.parser.parseInline(e)}</h${t}>\n`;\n\t}\n\thr(e) {\n\t\treturn `<hr>\n`;\n\t}\n\tlist(e) {\n\t\tlet t = e.ordered,\n\t\t\tn = e.start,\n\t\t\tr = \"\";\n\t\tfor (let o = 0; o < e.items.length; o++) {\n\t\t\tlet a = e.items[o];\n\t\t\tr += this.listitem(a);\n\t\t}\n\t\tlet i = t ? \"ol\" : \"ul\",\n\t\t\ts = t && n !== 1 ? ' start=\"' + n + '\"' : \"\";\n\t\treturn (\n\t\t\t\"<\" +\n\t\t\ti +\n\t\t\ts +\n\t\t\t`>\n` +\n\t\t\tr +\n\t\t\t\"</\" +\n\t\t\ti +\n\t\t\t`>\n`\n\t\t);\n\t}\n\tlistitem(e) {\n\t\tlet t = \"\";\n\t\tif (e.task) {\n\t\t\tlet n = this.checkbox({ checked: !!e.checked });\n\t\t\te.loose\n\t\t\t\t? e.tokens[0]?.type === \"paragraph\"\n\t\t\t\t\t? ((e.tokens[0].text = n + \" \" + e.tokens[0].text),\n\t\t\t\t\t\te.tokens[0].tokens &&\n\t\t\t\t\t\t\te.tokens[0].tokens.length > 0 &&\n\t\t\t\t\t\t\te.tokens[0].tokens[0].type === \"text\" &&\n\t\t\t\t\t\t\t((e.tokens[0].tokens[0].text =\n\t\t\t\t\t\t\t\tn + \" \" + w(e.tokens[0].tokens[0].text)),\n\t\t\t\t\t\t\t(e.tokens[0].tokens[0].escaped = !0)))\n\t\t\t\t\t: e.tokens.unshift({\n\t\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\t\traw: n + \" \",\n\t\t\t\t\t\t\ttext: n + \" \",\n\t\t\t\t\t\t\tescaped: !0,\n\t\t\t\t\t\t})\n\t\t\t\t: (t += n + \" \");\n\t\t}\n\t\treturn (\n\t\t\t(t += this.parser.parse(e.tokens, !!e.loose)),\n\t\t\t`<li>${t}</li>\n`\n\t\t);\n\t}\n\tcheckbox({ checked: e }) {\n\t\treturn (\n\t\t\t\"<input \" + (e ? 'checked=\"\" ' : \"\") + 'disabled=\"\" type=\"checkbox\">'\n\t\t);\n\t}\n\tparagraph({ tokens: e }) {\n\t\treturn `<p>${this.parser.parseInline(e)}</p>\n`;\n\t}\n\ttable(e) {\n\t\tlet t = \"\",\n\t\t\tn = \"\";\n\t\tfor (let i = 0; i < e.header.length; i++) n += this.tablecell(e.header[i]);\n\t\tt += this.tablerow({ text: n });\n\t\tlet r = \"\";\n\t\tfor (let i = 0; i < e.rows.length; i++) {\n\t\t\tlet s = e.rows[i];\n\t\t\tn = \"\";\n\t\t\tfor (let o = 0; o < s.length; o++) n += this.tablecell(s[o]);\n\t\t\tr += this.tablerow({ text: n });\n\t\t}\n\t\treturn (\n\t\t\tr && (r = `<tbody>${r}</tbody>`),\n\t\t\t`<table>\n<thead>\n` +\n\t\t\t\tt +\n\t\t\t\t`</thead>\n` +\n\t\t\t\tr +\n\t\t\t\t`</table>\n`\n\t\t);\n\t}\n\ttablerow({ text: e }) {\n\t\treturn `<tr>\n${e}</tr>\n`;\n\t}\n\ttablecell(e) {\n\t\tlet t = this.parser.parseInline(e.tokens),\n\t\t\tn = e.header ? \"th\" : \"td\";\n\t\treturn (\n\t\t\t(e.align ? `<${n} align=\"${e.align}\">` : `<${n}>`) +\n\t\t\tt +\n\t\t\t`</${n}>\n`\n\t\t);\n\t}\n\tstrong({ tokens: e }) {\n\t\treturn `<strong>${this.parser.parseInline(e)}</strong>`;\n\t}\n\tem({ tokens: e }) {\n\t\treturn `<em>${this.parser.parseInline(e)}</em>`;\n\t}\n\tcodespan({ text: e }) {\n\t\treturn `<code>${w(e, !0)}</code>`;\n\t}\n\tbr(e) {\n\t\treturn \"<br>\";\n\t}\n\tdel({ tokens: e }) {\n\t\treturn `<del>${this.parser.parseInline(e)}</del>`;\n\t}\n\tlink({ href: e, title: t, tokens: n }) {\n\t\tlet r = this.parser.parseInline(n),\n\t\t\ti = J(e);\n\t\tif (i === null) return r;\n\t\te = i;\n\t\tlet s = '<a href=\"' + e + '\"';\n\t\treturn t && (s += ' title=\"' + w(t) + '\"'), (s += \">\" + r + \"</a>\"), s;\n\t}\n\timage({ href: e, title: t, text: n, tokens: r }) {\n\t\tr && (n = this.parser.parseInline(r, this.parser.textRenderer));\n\t\tlet i = J(e);\n\t\tif (i === null) return w(n);\n\t\te = i;\n\t\tlet s = `<img src=\"${e}\" alt=\"${n}\"`;\n\t\treturn t && (s += ` title=\"${w(t)}\"`), (s += \">\"), s;\n\t}\n\ttext(e) {\n\t\treturn \"tokens\" in e && e.tokens\n\t\t\t? this.parser.parseInline(e.tokens)\n\t\t\t: \"escaped\" in e && e.escaped\n\t\t\t\t? e.text\n\t\t\t\t: w(e.text);\n\t}\n};\nvar $ = class {\n\tstrong({ text: e }) {\n\t\treturn e;\n\t}\n\tem({ text: e }) {\n\t\treturn e;\n\t}\n\tcodespan({ text: e }) {\n\t\treturn e;\n\t}\n\tdel({ text: e }) {\n\t\treturn e;\n\t}\n\thtml({ text: e }) {\n\t\treturn e;\n\t}\n\ttext({ text: e }) {\n\t\treturn e;\n\t}\n\tlink({ text: e }) {\n\t\treturn \"\" + e;\n\t}\n\timage({ text: e }) {\n\t\treturn \"\" + e;\n\t}\n\tbr() {\n\t\treturn \"\";\n\t}\n};\nvar R = class l {\n\toptions;\n\trenderer;\n\ttextRenderer;\n\tconstructor(e) {\n\t\t(this.options = e || O),\n\t\t\t(this.options.renderer = this.options.renderer || new P()),\n\t\t\t(this.renderer = this.options.renderer),\n\t\t\t(this.renderer.options = this.options),\n\t\t\t(this.renderer.parser = this),\n\t\t\t(this.textRenderer = new $());\n\t}\n\tstatic parse(e, t) {\n\t\treturn new l(t).parse(e);\n\t}\n\tstatic parseInline(e, t) {\n\t\treturn new l(t).parseInline(e);\n\t}\n\tparse(e, t = !0) {\n\t\tlet n = \"\";\n\t\tfor (let r = 0; r < e.length; r++) {\n\t\t\tlet i = e[r];\n\t\t\tif (this.options.extensions?.renderers?.[i.type]) {\n\t\t\t\tlet o = i,\n\t\t\t\t\ta = this.options.extensions.renderers[o.type].call(\n\t\t\t\t\t\t{ parser: this },\n\t\t\t\t\t\to\n\t\t\t\t\t);\n\t\t\t\tif (\n\t\t\t\t\ta !== !1 ||\n\t\t\t\t\t![\n\t\t\t\t\t\t\"space\",\n\t\t\t\t\t\t\"hr\",\n\t\t\t\t\t\t\"heading\",\n\t\t\t\t\t\t\"code\",\n\t\t\t\t\t\t\"table\",\n\t\t\t\t\t\t\"blockquote\",\n\t\t\t\t\t\t\"list\",\n\t\t\t\t\t\t\"html\",\n\t\t\t\t\t\t\"def\",\n\t\t\t\t\t\t\"paragraph\",\n\t\t\t\t\t\t\"text\",\n\t\t\t\t\t].includes(o.type)\n\t\t\t\t) {\n\t\t\t\t\tn += a || \"\";\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet s = i;\n\t\t\tswitch (s.type) {\n\t\t\t\tcase \"space\": {\n\t\t\t\t\tn += this.renderer.space(s);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcase \"hr\": {\n\t\t\t\t\tn += this.renderer.hr(s);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcase \"heading\": {\n\t\t\t\t\tn += this.renderer.heading(s);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcase \"code\": {\n\t\t\t\t\tn += this.renderer.code(s);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcase \"table\": {\n\t\t\t\t\tn += this.renderer.table(s);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcase \"blockquote\": {\n\t\t\t\t\tn += this.renderer.blockquote(s);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcase \"list\": {\n\t\t\t\t\tn += this.renderer.list(s);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcase \"html\": {\n\t\t\t\t\tn += this.renderer.html(s);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcase \"def\": {\n\t\t\t\t\tn += this.renderer.def(s);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcase \"paragraph\": {\n\t\t\t\t\tn += this.renderer.paragraph(s);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcase \"text\": {\n\t\t\t\t\tlet o = s,\n\t\t\t\t\t\ta = this.renderer.text(o);\n\t\t\t\t\tfor (; r + 1 < e.length && e[r + 1].type === \"text\"; )\n\t\t\t\t\t\t(o = e[++r]),\n\t\t\t\t\t\t\t(a +=\n\t\t\t\t\t\t\t\t`\n` + this.renderer.text(o));\n\t\t\t\t\tt\n\t\t\t\t\t\t? (n += this.renderer.paragraph({\n\t\t\t\t\t\t\t\ttype: \"paragraph\",\n\t\t\t\t\t\t\t\traw: a,\n\t\t\t\t\t\t\t\ttext: a,\n\t\t\t\t\t\t\t\ttokens: [{ type: \"text\", raw: a, text: a, escaped: !0 }],\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t: (n += a);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\tlet o = 'Token with \"' + s.type + '\" type was not found.';\n\t\t\t\t\tif (this.options.silent) return console.error(o), \"\";\n\t\t\t\t\tthrow new Error(o);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn n;\n\t}\n\tparseInline(e, t = this.renderer) {\n\t\tlet n = \"\";\n\t\tfor (let r = 0; r < e.length; r++) {\n\t\t\tlet i = e[r];\n\t\t\tif (this.options.extensions?.renderers?.[i.type]) {\n\t\t\t\tlet o = this.options.extensions.renderers[i.type].call(\n\t\t\t\t\t{ parser: this },\n\t\t\t\t\ti\n\t\t\t\t);\n\t\t\t\tif (\n\t\t\t\t\to !== !1 ||\n\t\t\t\t\t![\n\t\t\t\t\t\t\"escape\",\n\t\t\t\t\t\t\"html\",\n\t\t\t\t\t\t\"link\",\n\t\t\t\t\t\t\"image\",\n\t\t\t\t\t\t\"strong\",\n\t\t\t\t\t\t\"em\",\n\t\t\t\t\t\t\"codespan\",\n\t\t\t\t\t\t\"br\",\n\t\t\t\t\t\t\"del\",\n\t\t\t\t\t\t\"text\",\n\t\t\t\t\t].includes(i.type)\n\t\t\t\t) {\n\t\t\t\t\tn += o || \"\";\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet s = i;\n\t\t\tswitch (s.type) {\n\t\t\t\tcase \"escape\": {\n\t\t\t\t\tn += t.text(s);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"html\": {\n\t\t\t\t\tn += t.html(s);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"link\": {\n\t\t\t\t\tn += t.link(s);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"image\": {\n\t\t\t\t\tn += t.image(s);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"strong\": {\n\t\t\t\t\tn += t.strong(s);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"em\": {\n\t\t\t\t\tn += t.em(s);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"codespan\": {\n\t\t\t\t\tn += t.codespan(s);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"br\": {\n\t\t\t\t\tn += t.br(s);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"del\": {\n\t\t\t\t\tn += t.del(s);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"text\": {\n\t\t\t\t\tn += t.text(s);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\tlet o = 'Token with \"' + s.type + '\" type was not found.';\n\t\t\t\t\tif (this.options.silent) return console.error(o), \"\";\n\t\t\t\t\tthrow new Error(o);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn n;\n\t}\n};\nvar S = class {\n\toptions;\n\tblock;\n\tconstructor(e) {\n\t\tthis.options = e || O;\n\t}\n\tstatic passThroughHooks = new Set([\n\t\t\"preprocess\",\n\t\t\"postprocess\",\n\t\t\"processAllTokens\",\n\t\t\"emStrongMask\",\n\t]);\n\tstatic passThroughHooksRespectAsync = new Set([\n\t\t\"preprocess\",\n\t\t\"postprocess\",\n\t\t\"processAllTokens\",\n\t]);\n\tpreprocess(e) {\n\t\treturn e;\n\t}\n\tpostprocess(e) {\n\t\treturn e;\n\t}\n\tprocessAllTokens(e) {\n\t\treturn e;\n\t}\n\temStrongMask(e) {\n\t\treturn e;\n\t}\n\tprovideLexer() {\n\t\treturn this.block ? b.lex : b.lexInline;\n\t}\n\tprovideParser() {\n\t\treturn this.block ? R.parse : R.parseInline;\n\t}\n};\nvar B = class {\n\tdefaults = L();\n\toptions = this.setOptions;\n\tparse = this.parseMarkdown(!0);\n\tparseInline = this.parseMarkdown(!1);\n\tParser = R;\n\tRenderer = P;\n\tTextRenderer = $;\n\tLexer = b;\n\tTokenizer = y;\n\tHooks = S;\n\tconstructor(...e) {\n\t\tthis.use(...e);\n\t}\n\twalkTokens(e, t) {\n\t\tlet n = [];\n\t\tfor (let r of e)\n\t\t\tswitch (((n = n.concat(t.call(this, r))), r.type)) {\n\t\t\t\tcase \"table\": {\n\t\t\t\t\tlet i = r;\n\t\t\t\t\tfor (let s of i.header) n = n.concat(this.walkTokens(s.tokens, t));\n\t\t\t\t\tfor (let s of i.rows)\n\t\t\t\t\t\tfor (let o of s) n = n.concat(this.walkTokens(o.tokens, t));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"list\": {\n\t\t\t\t\tlet i = r;\n\t\t\t\t\tn = n.concat(this.walkTokens(i.items, t));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\tlet i = r;\n\t\t\t\t\tthis.defaults.extensions?.childTokens?.[i.type]\n\t\t\t\t\t\t? this.defaults.extensions.childTokens[i.type].forEach((s) => {\n\t\t\t\t\t\t\t\tlet o = i[s].flat(1 / 0);\n\t\t\t\t\t\t\t\tn = n.concat(this.walkTokens(o, t));\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t: i.tokens && (n = n.concat(this.walkTokens(i.tokens, t)));\n\t\t\t\t}\n\t\t\t}\n\t\treturn n;\n\t}\n\tuse(...e) {\n\t\tlet t = this.defaults.extensions || { renderers: {}, childTokens: {} };\n\t\treturn (\n\t\t\te.forEach((n) => {\n\t\t\t\tlet r = { ...n };\n\t\t\t\tif (\n\t\t\t\t\t((r.async = this.defaults.async || r.async || !1),\n\t\t\t\t\tn.extensions &&\n\t\t\t\t\t\t(n.extensions.forEach((i) => {\n\t\t\t\t\t\t\tif (!i.name) throw new Error(\"extension name required\");\n\t\t\t\t\t\t\tif (\"renderer\" in i) {\n\t\t\t\t\t\t\t\tlet s = t.renderers[i.name];\n\t\t\t\t\t\t\t\ts\n\t\t\t\t\t\t\t\t\t? (t.renderers[i.name] = function (...o) {\n\t\t\t\t\t\t\t\t\t\t\tlet a = i.renderer.apply(this, o);\n\t\t\t\t\t\t\t\t\t\t\treturn a === !1 && (a = s.apply(this, o)), a;\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t: (t.renderers[i.name] = i.renderer);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (\"tokenizer\" in i) {\n\t\t\t\t\t\t\t\tif (!i.level || (i.level !== \"block\" && i.level !== \"inline\"))\n\t\t\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t\t\t\"extension level must be 'block' or 'inline'\"\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tlet s = t[i.level];\n\t\t\t\t\t\t\t\ts ? s.unshift(i.tokenizer) : (t[i.level] = [i.tokenizer]),\n\t\t\t\t\t\t\t\t\ti.start &&\n\t\t\t\t\t\t\t\t\t\t(i.level === \"block\"\n\t\t\t\t\t\t\t\t\t\t\t? t.startBlock\n\t\t\t\t\t\t\t\t\t\t\t\t? t.startBlock.push(i.start)\n\t\t\t\t\t\t\t\t\t\t\t\t: (t.startBlock = [i.start])\n\t\t\t\t\t\t\t\t\t\t\t: i.level === \"inline\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t(t.startInline\n\t\t\t\t\t\t\t\t\t\t\t\t\t? t.startInline.push(i.start)\n\t\t\t\t\t\t\t\t\t\t\t\t\t: (t.startInline = [i.start])));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\"childTokens\" in i &&\n\t\t\t\t\t\t\t\ti.childTokens &&\n\t\t\t\t\t\t\t\t(t.childTokens[i.name] = i.childTokens);\n\t\t\t\t\t\t}),\n\t\t\t\t\t\t(r.extensions = t)),\n\t\t\t\t\tn.renderer)\n\t\t\t\t) {\n\t\t\t\t\tlet i = this.defaults.renderer || new P(this.defaults);\n\t\t\t\t\tfor (let s in n.renderer) {\n\t\t\t\t\t\tif (!(s in i)) throw new Error(`renderer '${s}' does not exist`);\n\t\t\t\t\t\tif ([\"options\", \"parser\"].includes(s)) continue;\n\t\t\t\t\t\tlet o = s,\n\t\t\t\t\t\t\ta = n.renderer[o],\n\t\t\t\t\t\t\tu = i[o];\n\t\t\t\t\t\ti[o] = (...p) => {\n\t\t\t\t\t\t\tlet c = a.apply(i, p);\n\t\t\t\t\t\t\treturn c === !1 && (c = u.apply(i, p)), c || \"\";\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tr.renderer = i;\n\t\t\t\t}\n\t\t\t\tif (n.tokenizer) {\n\t\t\t\t\tlet i = this.defaults.tokenizer || new y(this.defaults);\n\t\t\t\t\tfor (let s in n.tokenizer) {\n\t\t\t\t\t\tif (!(s in i)) throw new Error(`tokenizer '${s}' does not exist`);\n\t\t\t\t\t\tif ([\"options\", \"rules\", \"lexer\"].includes(s)) continue;\n\t\t\t\t\t\tlet o = s,\n\t\t\t\t\t\t\ta = n.tokenizer[o],\n\t\t\t\t\t\t\tu = i[o];\n\t\t\t\t\t\ti[o] = (...p) => {\n\t\t\t\t\t\t\tlet c = a.apply(i, p);\n\t\t\t\t\t\t\treturn c === !1 && (c = u.apply(i, p)), c;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tr.tokenizer = i;\n\t\t\t\t}\n\t\t\t\tif (n.hooks) {\n\t\t\t\t\tlet i = this.defaults.hooks || new S();\n\t\t\t\t\tfor (let s in n.hooks) {\n\t\t\t\t\t\tif (!(s in i)) throw new Error(`hook '${s}' does not exist`);\n\t\t\t\t\t\tif ([\"options\", \"block\"].includes(s)) continue;\n\t\t\t\t\t\tlet o = s,\n\t\t\t\t\t\t\ta = n.hooks[o],\n\t\t\t\t\t\t\tu = i[o];\n\t\t\t\t\t\tS.passThroughHooks.has(s)\n\t\t\t\t\t\t\t? (i[o] = (p) => {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tthis.defaults.async &&\n\t\t\t\t\t\t\t\t\t\tS.passThroughHooksRespectAsync.has(s)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\treturn Promise.resolve(a.call(i, p)).then((f) =>\n\t\t\t\t\t\t\t\t\t\t\tu.call(i, f)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tlet c = a.call(i, p);\n\t\t\t\t\t\t\t\t\treturn u.call(i, c);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t: (i[o] = (...p) => {\n\t\t\t\t\t\t\t\t\tlet c = a.apply(i, p);\n\t\t\t\t\t\t\t\t\treturn c === !1 && (c = u.apply(i, p)), c;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tr.hooks = i;\n\t\t\t\t}\n\t\t\t\tif (n.walkTokens) {\n\t\t\t\t\tlet i = this.defaults.walkTokens,\n\t\t\t\t\t\ts = n.walkTokens;\n\t\t\t\t\tr.walkTokens = function (o) {\n\t\t\t\t\t\tlet a = [];\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\ta.push(s.call(this, o)), i && (a = a.concat(i.call(this, o))), a\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tthis.defaults = { ...this.defaults, ...r };\n\t\t\t}),\n\t\t\tthis\n\t\t);\n\t}\n\tsetOptions(e) {\n\t\treturn (this.defaults = { ...this.defaults, ...e }), this;\n\t}\n\tlexer(e, t) {\n\t\treturn b.lex(e, t ?? this.defaults);\n\t}\n\tparser(e, t) {\n\t\treturn R.parse(e, t ?? this.defaults);\n\t}\n\tparseMarkdown(e) {\n\t\treturn (n, r) => {\n\t\t\tlet i = { ...r },\n\t\t\t\ts = { ...this.defaults, ...i },\n\t\t\t\to = this.onError(!!s.silent, !!s.async);\n\t\t\tif (this.defaults.async === !0 && i.async === !1)\n\t\t\t\treturn o(\n\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\"marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise.\"\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tif (typeof n > \"u\" || n === null)\n\t\t\t\treturn o(new Error(\"marked(): input parameter is undefined or null\"));\n\t\t\tif (typeof n != \"string\")\n\t\t\t\treturn o(\n\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\"marked(): input parameter is of type \" +\n\t\t\t\t\t\t\tObject.prototype.toString.call(n) +\n\t\t\t\t\t\t\t\", string expected\"\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\ts.hooks && ((s.hooks.options = s), (s.hooks.block = e));\n\t\t\tlet a = s.hooks ? s.hooks.provideLexer() : e ? b.lex : b.lexInline,\n\t\t\t\tu = s.hooks ? s.hooks.provideParser() : e ? R.parse : R.parseInline;\n\t\t\tif (s.async)\n\t\t\t\treturn Promise.resolve(s.hooks ? s.hooks.preprocess(n) : n)\n\t\t\t\t\t.then((p) => a(p, s))\n\t\t\t\t\t.then((p) => (s.hooks ? s.hooks.processAllTokens(p) : p))\n\t\t\t\t\t.then((p) =>\n\t\t\t\t\t\ts.walkTokens\n\t\t\t\t\t\t\t? Promise.all(this.walkTokens(p, s.walkTokens)).then(() => p)\n\t\t\t\t\t\t\t: p\n\t\t\t\t\t)\n\t\t\t\t\t.then((p) => u(p, s))\n\t\t\t\t\t.then((p) => (s.hooks ? s.hooks.postprocess(p) : p))\n\t\t\t\t\t.catch(o);\n\t\t\ttry {\n\t\t\t\ts.hooks && (n = s.hooks.preprocess(n));\n\t\t\t\tlet p = a(n, s);\n\t\t\t\ts.hooks && (p = s.hooks.processAllTokens(p)),\n\t\t\t\t\ts.walkTokens && this.walkTokens(p, s.walkTokens);\n\t\t\t\tlet c = u(p, s);\n\t\t\t\treturn s.hooks && (c = s.hooks.postprocess(c)), c;\n\t\t\t} catch (p) {\n\t\t\t\treturn o(p);\n\t\t\t}\n\t\t};\n\t}\n\tonError(e, t) {\n\t\treturn (n) => {\n\t\t\tif (\n\t\t\t\t((n.message += `\nPlease report this to https://github.com/markedjs/marked.`),\n\t\t\t\te)\n\t\t\t) {\n\t\t\t\tlet r =\n\t\t\t\t\t\"<p>An error occurred:</p><pre>\" + w(n.message + \"\", !0) + \"</pre>\";\n\t\t\t\treturn t ? Promise.resolve(r) : r;\n\t\t\t}\n\t\t\tif (t) return Promise.reject(n);\n\t\t\tthrow n;\n\t\t};\n\t}\n};\nvar _ = new B();\nfunction d(l, e) {\n\treturn _.parse(l, e);\n}\nd.options = d.setOptions = function (l) {\n\treturn _.setOptions(l), (d.defaults = _.defaults), G(d.defaults), d;\n};\nd.getDefaults = L;\nd.defaults = O;\nd.use = function (...l) {\n\treturn _.use(...l), (d.defaults = _.defaults), G(d.defaults), d;\n};\nd.walkTokens = function (l, e) {\n\treturn _.walkTokens(l, e);\n};\nd.parseInline = _.parseInline;\nd.Parser = R;\nd.parser = R.parse;\nd.Renderer = P;\nd.TextRenderer = $;\nd.Lexer = b;\nd.lexer = b.lex;\nd.Tokenizer = y;\nd.Hooks = S;\nd.parse = d;\nvar Dt = d.options,\n\tHt = d.setOptions,\n\tZt = d.use,\n\tGt = d.walkTokens,\n\tNt = d.parseInline,\n\tjt = d,\n\tFt = R.parse,\n\tQt = b.lex;\nexport {\n\tS as Hooks,\n\tb as Lexer,\n\tB as Marked,\n\tR as Parser,\n\tP as Renderer,\n\t$ as TextRenderer,\n\ty as Tokenizer,\n\tO as defaults,\n\tL as getDefaults,\n\tQt as lexer,\n\td as marked,\n\tDt as options,\n\tjt as parse,\n\tNt as parseInline,\n\tFt as parser,\n\tHt as setOptions,\n\tZt as use,\n\tGt as walkTokens,\n};\n//# sourceMappingURL=marked.esm.js.map\n","export const defaultMD = `Coucou !\nHi !\n\n![](assets/perso_educajou.svg)\n\n![](assets/brigit_et_komit.png)\nBrigit & Komit\n`;\n\nexport const rulesReminder = `\n\n**Règle 1**\nOn sépare chaque carte avec une ligne vide.\n\n**Règle 2**\nSi vous voulez associer deux éléments, écrivez le premier élément sur une ligne, puis allez à la ligne pour écrire le deuxième élément : utilisez la syntaxe Markdown pour écrire votre texte ou insérer une image.\n\n**Règle 3**\nSi une seule ligne est présente, au lieu d'associer deux éléments différents, la carte sera répétée deux fois et il s'agira alors de retrouver la carte identique.\n\n**Règle 4**\nPour insérer une image, utilisez la syntaxe Markdown classique \\`![](URL_de_l_image)\\`\n\n**Règle 5**\nPour insérer un fichier audio, utilisez la syntaxe suivante : \\`audio: URL_DU_FICHIER_AUDIO\\`\n\n\n`;\n","import { resetEditor } from \"../helpers/resetEditor.mjs\";\n\nexport function createCloseButton(editorWrapper, jar, Memory) {\n\tconst button = document.createElement(\"button\");\n\tbutton.className = \"close-editor-button\";\n\tbutton.title = \"Fermer l'éditeur Markdown\";\n\tbutton.innerHTML = \"Fermer l'éditeur\";\n\n\tbutton.addEventListener(\"click\", () => {\n\t\tconst confirmClose = confirm(\n\t\t\t\"Voulez-vous vraiment fermer l'éditeur Markdown ?\\n\\n\" +\n\t\t\t\t\"Vos modifications seront perdues si vous n'avez pas copié le contenu.\",\n\t\t);\n\t\tif (confirmClose) {\n\t\t\tresetEditor(jar, Memory, editorWrapper, button);\n\t\t}\n\t});\n\n\teditorWrapper.appendChild(button);\n}\n","import { defaultMD, rulesReminder } from \"../const.mjs\";\n\nexport function resetEditor(jar, Memory, editorWrapper, closeEditorButton) {\n\tdocument.body.classList.remove(\"editMode\");\n\tcloseEditorButton.style.display = \"none\";\n\teditorWrapper.style.display = \"none\";\n\n\tconst footer = document.querySelector(\"footer\");\n\tfooter.style.display = \"block\";\n\tfooter.style.top = \"25vh\";\n\n\tconst style = document.querySelector(\"style#cardsVisible\");\n\tjar.updateCode(defaultMD + rulesReminder);\n\tMemory.init(defaultMD);\n\tif (style) style.remove();\n}\n","const globalWindow = window;\n\nexport function CodeJar(editor, highlight, opt = {}) {\n\tconst options = {\n\t\ttab: \"\\t\",\n\t\tindentOn: /[({\\[]$/,\n\t\tmoveToNewLine: /^[)}\\]]/,\n\t\tspellcheck: false,\n\t\tcatchTab: true,\n\t\tpreserveIdent: true,\n\t\taddClosing: true,\n\t\thistory: true,\n\t\twindow: globalWindow,\n\t\t...opt,\n\t};\n\n\tconst window = options.window;\n\tconst document = window.document;\n\n\tconst listeners = [];\n\tconst history = [];\n\tlet at = -1;\n\tlet focus = false;\n\tlet onUpdate = () => void 0;\n\tlet prev; // code content prior keydown event\n\n\teditor.setAttribute(\"contenteditable\", \"plaintext-only\");\n\teditor.setAttribute(\"spellcheck\", options.spellcheck ? \"true\" : \"false\");\n\teditor.style.outline = \"none\";\n\teditor.style.overflowWrap = \"break-word\";\n\teditor.style.overflowY = \"auto\";\n\teditor.style.whiteSpace = \"pre-wrap\";\n\n\tconst doHighlight = (editor, pos) => {\n\t\thighlight(editor, pos);\n\t};\n\n\tconst matchFirefoxVersion =\n\t\twindow.navigator.userAgent.match(/Firefox\\/([0-9]+)\\./);\n\tconst firefoxVersion = matchFirefoxVersion\n\t\t? parseInt(matchFirefoxVersion[1])\n\t\t: 0;\n\tlet isLegacy = false; // true if plaintext-only is not supported\n\tif (editor.contentEditable !== \"plaintext-only\" || firefoxVersion >= 136)\n\t\tisLegacy = true;\n\tif (isLegacy) editor.setAttribute(\"contenteditable\", \"true\");\n\n\tconst debounceHighlight = debounce(() => {\n\t\tconst pos = save();\n\t\tdoHighlight(editor, pos);\n\t\trestore(pos);\n\t}, 30);\n\n\tlet recording = false;\n\tconst shouldRecord = (event) => {\n\t\treturn (\n\t\t\t!isUndo(event) &&\n\t\t\t!isRedo(event) &&\n\t\t\tevent.key !== \"Meta\" &&\n\t\t\tevent.key !== \"Control\" &&\n\t\t\tevent.key !== \"Alt\" &&\n\t\t\t!event.key.startsWith(\"Arrow\")\n\t\t);\n\t};\n\tconst debounceRecordHistory = debounce((event) => {\n\t\tif (shouldRecord(event)) {\n\t\t\trecordHistory();\n\t\t\trecording = false;\n\t\t}\n\t}, 300);\n\n\tconst on = (type, fn) => {\n\t\tlisteners.push([type, fn]);\n\t\teditor.addEventListener(type, fn);\n\t};\n\n\ton(\"keydown\", (event) => {\n\t\tif (event.defaultPrevented) return;\n\n\t\tprev = toString();\n\t\tif (options.preserveIdent) handleNewLine(event);\n\t\telse legacyNewLineFix(event);\n\t\tif (options.catchTab) handleTabCharacters(event);\n\t\tif (options.addClosing) handleSelfClosingCharacters(event);\n\t\tif (options.history) {\n\t\t\thandleUndoRedo(event);\n\t\t\tif (shouldRecord(event) && !recording) {\n\t\t\t\trecordHistory();\n\t\t\t\trecording = true;\n\t\t\t}\n\t\t}\n\t\tif (isLegacy && !isCopy(event)) restore(save());\n\t});\n\n\ton(\"keyup\", (event) => {\n\t\tif (event.defaultPrevented) return;\n\t\tif (event.isComposing) return;\n\n\t\tif (prev !== toString()) debounceHighlight();\n\t\tdebounceRecordHistory(event);\n\t\tonUpdate(toString());\n\t});\n\n\ton(\"focus\", (_event) => {\n\t\tfocus = true;\n\t});\n\n\ton(\"blur\", (_event) => {\n\t\tfocus = false;\n\t});\n\n\ton(\"paste\", (event) => {\n\t\trecordHistory();\n\t\thandlePaste(event);\n\t\trecordHistory();\n\t\tonUpdate(toString());\n\t});\n\n\ton(\"cut\", (event) => {\n\t\trecordHistory();\n\t\thandleCut(event);\n\t\trecordHistory();\n\t\tonUpdate(toString());\n\t});\n\n\tfunction save() {\n\t\tconst s = getSelection();\n\t\tconst pos = { start: 0, end: 0, dir: undefined };\n\n\t\tlet { anchorNode, anchorOffset, focusNode, focusOffset } = s;\n\t\tif (!anchorNode || !focusNode) throw \"error1\";\n\n\t\t// If the anchor and focus are the editor element, return either a full\n\t\t// highlight or a start/end cursor position depending on the selection\n\t\tif (anchorNode === editor && focusNode === editor) {\n\t\t\tpos.start =\n\t\t\t\tanchorOffset > 0 && editor.textContent ? editor.textContent.length : 0;\n\t\t\tpos.end =\n\t\t\t\tfocusOffset > 0 && editor.textContent ? editor.textContent.length : 0;\n\t\t\tpos.dir = focusOffset >= anchorOffset ? \"->\" : \"<-\";\n\t\t\treturn pos;\n\t\t}\n\n\t\t// Selection anchor and focus are expected to be text nodes,\n\t\t// so normalize them.\n\t\tif (anchorNode.nodeType === Node.ELEMENT_NODE) {\n\t\t\tconst node = document.createTextNode(\"\");\n\t\t\tanchorNode.insertBefore(node, anchorNode.childNodes[anchorOffset]);\n\t\t\tanchorNode = node;\n\t\t\tanchorOffset = 0;\n\t\t}\n\t\tif (focusNode.nodeType === Node.ELEMENT_NODE) {\n\t\t\tconst node = document.createTextNode(\"\");\n\t\t\tfocusNode.insertBefore(node, focusNode.childNodes[focusOffset]);\n\t\t\tfocusNode = node;\n\t\t\tfocusOffset = 0;\n\t\t}\n\n\t\tvisit(editor, (el) => {\n\t\t\tif (el === anchorNode && el === focusNode) {\n\t\t\t\tpos.start += anchorOffset;\n\t\t\t\tpos.end += focusOffset;\n\t\t\t\tpos.dir = anchorOffset <= focusOffset ? \"->\" : \"<-\";\n\t\t\t\treturn \"stop\";\n\t\t\t}\n\n\t\t\tif (el === anchorNode) {\n\t\t\t\tpos.start += anchorOffset;\n\t\t\t\tif (!pos.dir) {\n\t\t\t\t\tpos.dir = \"->\";\n\t\t\t\t} else {\n\t\t\t\t\treturn \"stop\";\n\t\t\t\t}\n\t\t\t} else if (el === focusNode) {\n\t\t\t\tpos.end += focusOffset;\n\t\t\t\tif (!pos.dir) {\n\t\t\t\t\tpos.dir = \"<-\";\n\t\t\t\t} else {\n\t\t\t\t\treturn \"stop\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (el.nodeType === Node.TEXT_NODE) {\n\t\t\t\tif (pos.dir != \"->\") pos.start += el.nodeValue.length;\n\t\t\t\tif (pos.dir != \"<-\") pos.end += el.nodeValue.length;\n\t\t\t}\n\t\t});\n\n\t\teditor.normalize(); // collapse empty text nodes\n\t\treturn pos;\n\t}\n\n\tfunction restore(pos) {\n\t\tconst s = getSelection();\n\t\tlet startNode,\n\t\t\tstartOffset = 0;\n\t\tlet endNode,\n\t\t\tendOffset = 0;\n\n\t\tif (!pos.dir) pos.dir = \"->\";\n\t\tif (pos.start < 0) pos.start = 0;\n\t\tif (pos.end < 0) pos.end = 0;\n\n\t\t// Flip start and end if the direction reversed\n\t\tif (pos.dir == \"<-\") {\n\t\t\tconst { start, end } = pos;\n\t\t\tpos.start = end;\n\t\t\tpos.end = start;\n\t\t}\n\n\t\tlet current = 0;\n\n\t\tvisit(editor, (el) => {\n\t\t\tif (el.nodeType !== Node.TEXT_NODE) return;\n\n\t\t\tconst len = (el.nodeValue || \"\").length;\n\t\t\tif (current + len > pos.start) {\n\t\t\t\tif (!startNode) {\n\t\t\t\t\tstartNode = el;\n\t\t\t\t\tstartOffset = pos.start - current;\n\t\t\t\t}\n\t\t\t\tif (current + len > pos.end) {\n\t\t\t\t\tendNode = el;\n\t\t\t\t\tendOffset = pos.end - current;\n\t\t\t\t\treturn \"stop\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcurrent += len;\n\t\t});\n\n\t\tif (!startNode)\n\t\t\t(startNode = editor), (startOffset = editor.childNodes.length);\n\t\tif (!endNode) (endNode = editor), (endOffset = editor.childNodes.length);\n\n\t\t// Flip back the selection\n\t\tif (pos.dir == \"<-\") {\n\t\t\t[startNode, startOffset, endNode, endOffset] = [\n\t\t\t\tendNode,\n\t\t\t\tendOffset,\n\t\t\t\tstartNode,\n\t\t\t\tstartOffset,\n\t\t\t];\n\t\t}\n\n\t\t{\n\t\t\t// If nodes not editable, create a text node.\n\t\t\tconst startEl = uneditable(startNode);\n\t\t\tif (startEl) {\n\t\t\t\tconst node = document.createTextNode(\"\");\n\t\t\t\tif (startEl.parentNode) {\n\t\t\t\t\tstartEl.parentNode.insertBefore(node, startEl);\n\t\t\t\t}\n\t\t\t\tstartNode = node;\n\t\t\t\tstartOffset = 0;\n\t\t\t}\n\t\t\tconst endEl = uneditable(endNode);\n\t\t\tif (endEl) {\n\t\t\t\tconst node = document.createTextNode(\"\");\n\t\t\t\tif (endEl.parentNode) {\n\t\t\t\t\tendEl.parentNode.insertBefore(node, endEl);\n\t\t\t\t}\n\t\t\t\tendNode = node;\n\t\t\t\tendOffset = 0;\n\t\t\t}\n\t\t}\n\n\t\ts.setBaseAndExtent(startNode, startOffset, endNode, endOffset);\n\t\teditor.normalize(); // collapse empty text nodes\n\t}\n\n\tfunction uneditable(node) {\n\t\twhile (node && node !== editor) {\n\t\t\tif (node.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\tconst el = node;\n\t\t\t\tif (el.getAttribute(\"contenteditable\") == \"false\") {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}\n\t}\n\n\tfunction beforeCursor() {\n\t\tconst s = getSelection();\n\t\tconst r0 = s.getRangeAt(0);\n\t\tconst r = document.createRange();\n\t\tr.selectNodeContents(editor);\n\t\tr.setEnd(r0.startContainer, r0.startOffset);\n\t\treturn r.toString();\n\t}\n\n\tfunction afterCursor() {\n\t\tconst s = getSelection();\n\t\tconst r0 = s.getRangeAt(0);\n\t\tconst r = document.createRange();\n\t\tr.selectNodeContents(editor);\n\t\tr.setStart(r0.endContainer, r0.endOffset);\n\t\treturn r.toString();\n\t}\n\n\tfunction handleNewLine(event) {\n\t\tif (event.key === \"Enter\") {\n\t\t\tconst before = beforeCursor();\n\t\t\tconst after = afterCursor();\n\n\t\t\tlet [padding] = findPadding(before);\n\t\t\tlet newLinePadding = padding;\n\n\t\t\t// If last symbol is \"{\" ident new line\n\t\t\tif (options.indentOn.test(before)) {\n\t\t\t\tnewLinePadding += options.tab;\n\t\t\t}\n\n\t\t\t// Preserve padding\n\t\t\tif (newLinePadding.length > 0) {\n\t\t\t\tpreventDefault(event);\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tinsert(\"\\n\" + newLinePadding);\n\t\t\t} else {\n\t\t\t\tlegacyNewLineFix(event);\n\t\t\t}\n\n\t\t\t// Place adjacent \"}\" on next line\n\t\t\tif (newLinePadding !== padding && options.moveToNewLine.test(after)) {\n\t\t\t\tconst pos = save();\n\t\t\t\tinsert(\"\\n\" + padding);\n\t\t\t\trestore(pos);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction legacyNewLineFix(event) {\n\t\t// Firefox does not support plaintext-only mode\n\t\t// and puts <div><br></div> on Enter. Let's help.\n\t\tif (isLegacy && event.key === \"Enter\") {\n\t\t\tpreventDefault(event);\n\t\t\tevent.stopPropagation();\n\t\t\tif (afterCursor() == \"\") {\n\t\t\t\tinsert(\"\\n \");\n\t\t\t\tconst pos = save();\n\t\t\t\tpos.start = --pos.end;\n\t\t\t\trestore(pos);\n\t\t\t} else {\n\t\t\t\tinsert(\"\\n\");\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handleSelfClosingCharacters(event) {\n\t\tconst open = `([{'\"`;\n\t\tconst close = `)]}'\"`;\n\t\tif (open.includes(event.key)) {\n\t\t\tpreventDefault(event);\n\t\t\tconst pos = save();\n\t\t\tconst wrapText = pos.start == pos.end ? \"\" : getSelection().toString();\n\t\t\tconst text = event.key + wrapText + close[open.indexOf(event.key)];\n\t\t\tinsert(text);\n\t\t\tpos.start++;\n\t\t\tpos.end++;\n\t\t\trestore(pos);\n\t\t}\n\t}\n\n\tfunction handleTabCharacters(event) {\n\t\tif (event.key === \"Tab\") {\n\t\t\tpreventDefault(event);\n\t\t\tif (event.shiftKey) {\n\t\t\t\tconst before = beforeCursor();\n\t\t\t\tlet [padding, start] = findPadding(before);\n\t\t\t\tif (padding.length > 0) {\n\t\t\t\t\tconst pos = save();\n\t\t\t\t\t// Remove full length tab or just remaining padding\n\t\t\t\t\tconst len = Math.min(options.tab.length, padding.length);\n\t\t\t\t\trestore({ start, end: start + len });\n\t\t\t\t\tdocument.execCommand(\"delete\");\n\t\t\t\t\tpos.start -= len;\n\t\t\t\t\tpos.end -= len;\n\t\t\t\t\trestore(pos);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinsert(options.tab);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handleUndoRedo(event) {\n\t\tif (isUndo(event)) {\n\t\t\tpreventDefault(event);\n\t\t\tat--;\n\t\t\tconst record = history[at];\n\t\t\tif (record) {\n\t\t\t\teditor.innerHTML = record.html;\n\t\t\t\trestore(record.pos);\n\t\t\t}\n\t\t\tif (at < 0) at = 0;\n\t\t}\n\t\tif (isRedo(event)) {\n\t\t\tpreventDefault(event);\n\t\t\tat++;\n\t\t\tconst record = history[at];\n\t\t\tif (record) {\n\t\t\t\teditor.innerHTML = record.html;\n\t\t\t\trestore(record.pos);\n\t\t\t}\n\t\t\tif (at >= history.length) at--;\n\t\t}\n\t}\n\n\tfunction recordHistory() {\n\t\tif (!focus) return;\n\n\t\tconst html = editor.innerHTML;\n\t\tconst pos = save();\n\n\t\tconst lastRecord = history[at];\n\t\tif (lastRecord) {\n\t\t\tif (\n\t\t\t\tlastRecord.html === html &&\n\t\t\t\tlastRecord.pos.start === pos.start &&\n\t\t\t\tlastRecord.pos.end === pos.end\n\t\t\t)\n\t\t\t\treturn;\n\t\t}\n\n\t\tat++;\n\t\thistory[at] = { html, pos };\n\t\thistory.splice(at + 1);\n\n\t\tconst maxHistory = 300;\n\t\tif (at > maxHistory) {\n\t\t\tat = maxHistory;\n\t\t\thistory.splice(0, 1);\n\t\t}\n\t}\n\n\tfunction handlePaste(event) {\n\t\tif (event.defaultPrevented) return;\n\t\tpreventDefault(event);\n\t\tconst originalEvent =\n\t\t\tevent.originalEvent !== null && event.originalEvent !== undefined\n\t\t\t\t? event.originalEvent\n\t\t\t\t: event;\n\t\tconst text = originalEvent.clipboardData\n\t\t\t.getData(\"text/plain\")\n\t\t\t.replace(/\\r\\n?/g, \"\\n\");\n\t\tconst pos = save();\n\t\tinsert(text);\n\t\tdoHighlight(editor);\n\t\trestore({\n\t\t\tstart: Math.min(pos.start, pos.end) + text.length,\n\t\t\tend: Math.min(pos.start, pos.end) + text.length,\n\t\t\tdir: \"<-\",\n\t\t});\n\t}\n\n\tfunction handleCut(event) {\n\t\tconst pos = save();\n\t\tconst selection = getSelection();\n\t\tconst originalEvent =\n\t\t\tevent.originalEvent !== null && event.originalEvent !== undefined\n\t\t\t\t? event.originalEvent\n\t\t\t\t: event;\n\t\toriginalEvent.clipboardData.setData(\"text/plain\", selection.toString());\n\t\tdocument.execCommand(\"delete\");\n\t\tdoHighlight(editor);\n\t\trestore({\n\t\t\tstart: Math.min(pos.start, pos.end),\n\t\t\tend: Math.min(pos.start, pos.end),\n\t\t\tdir: \"<-\",\n\t\t});\n\t\tpreventDefault(event);\n\t}\n\n\tfunction visit(editor, visitor) {\n\t\tconst queue = [];\n\t\tif (editor.firstChild) queue.push(editor.firstChild);\n\t\tlet el = queue.pop();\n\t\twhile (el) {\n\t\t\tif (visitor(el) === \"stop\") break;\n\t\t\tif (el.nextSibling) queue.push(el.nextSibling);\n\t\t\tif (el.firstChild) queue.push(el.firstChild);\n\t\t\tel = queue.pop();\n\t\t}\n\t}\n\n\tfunction isCtrl(event) {\n\t\treturn event.metaKey || event.ctrlKey;\n\t}\n\n\tfunction isUndo(event) {\n\t\treturn isCtrl(event) && !event.shiftKey && getKeyCode(event) === \"Z\";\n\t}\n\n\tfunction isRedo(event) {\n\t\treturn isCtrl(event) && event.shiftKey && getKeyCode(event) === \"Z\";\n\t}\n\n\tfunction isCopy(event) {\n\t\treturn isCtrl(event) && getKeyCode(event) === \"C\";\n\t}\n\n\tfunction getKeyCode(event) {\n\t\tlet key = event.key || event.keyCode || event.which;\n\t\tif (!key) return undefined;\n\t\treturn (\n\t\t\ttypeof key === \"string\" ? key : String.fromCharCode(key)\n\t\t).toUpperCase();\n\t}\n\n\tfunction insert(text) {\n\t\ttext = text\n\t\t\t.replace(/&/g, \"&amp;\")\n\t\t\t.replace(/</g, \"&lt;\")\n\t\t\t.replace(/>/g, \"&gt;\")\n\t\t\t.replace(/\"/g, \"&quot;\")\n\t\t\t.replace(/'/g, \"&#039;\");\n\t\tdocument.execCommand(\"insertHTML\", false, text);\n\t}\n\n\tfunction debounce(cb, wait) {\n\t\tlet timeout = 0;\n\t\treturn (...args) => {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = window.setTimeout(() => cb(...args), wait);\n\t\t};\n\t}\n\n\tfunction findPadding(text) {\n\t\t// Find beginning of previous line.\n\t\tlet i = text.length - 1;\n\t\twhile (i >= 0 && text[i] !== \"\\n\") i--;\n\t\ti++;\n\t\t// Find padding of the line.\n\t\tlet j = i;\n\t\twhile (j < text.length && /[ \\t]/.test(text[j])) j++;\n\t\treturn [text.substring(i, j) || \"\", i, j];\n\t}\n\n\tfunction toString() {\n\t\treturn editor.textContent || \"\";\n\t}\n\n\tfunction preventDefault(event) {\n\t\tevent.preventDefault();\n\t}\n\n\tfunction getSelection() {\n\t\t// @ts-ignore\n\t\treturn editor.getRootNode().getSelection();\n\t}\n\n\treturn {\n\t\tupdateOptions(newOptions) {\n\t\t\tObject.assign(options, newOptions);\n\t\t},\n\t\tupdateCode(code, callOnUpdate = true) {\n\t\t\teditor.textContent = code;\n\t\t\tdoHighlight(editor);\n\t\t\tcallOnUpdate && onUpdate(code);\n\t\t},\n\t\tonUpdate(callback) {\n\t\t\tonUpdate = callback;\n\t\t},\n\t\ttoString,\n\t\tsave,\n\t\trestore,\n\t\trecordHistory,\n\t\tdestroy() {\n\t\t\tfor (let [type, fn] of listeners) {\n\t\t\t\teditor.removeEventListener(type, fn);\n\t\t\t}\n\t\t},\n\t};\n}\n","export const highlightCode = (editor) => {\n\tlet code = editor.textContent;\n\n\t// On autorise l'utilisation de balises HTML\n\tcode = code\n\t\t.replace(/&/g, \"&amp;\")\n\t\t.replace(/</g, \"&lt;\")\n\t\t.replace(/>/g, \"&gt;\")\n\t\t.replace(/\"/g, \"&quot;\");\n\n\t// Coloration syntaxique pour les titres\n\tcode = code.replace(/^(#{1,6}) +(.*)/gm, (match, p1, p2) => {\n\t\tlet level = p1.length;\n\t\treturn `<span class=\"markdownTitles h${level}\">${p1} ${p2}</span>`;\n\t});\n\n\t// Coloration syntaxique pour le texte en gras\n\tcode = code.replace(\n\t\t/\\*\\*(\\w.*?)\\*\\*/g,\n\t\t'<span class=\"markdownBold\">**$1**</span>',\n\t);\n\tcode = code.replace(\n\t\t/__(\\w.*?)__/g,\n\t\t'<span class=\"markdownBold\">__$1__</span>',\n\t);\n\t// Coloration syntaxique pour le texte en italique\n\tcode = code.replace(\n\t\t/(?<!\\*)\\*(\\w.*?)\\*(?!\\*)/g,\n\t\t'<span class=\"markdownItalic\">*$1*</span>',\n\t);\n\tcode = code.replace(\n\t\t/(?<!_)_(\\w.*?)_(?!_)/g,\n\t\t'<span class=\"markdownItalic\">_$1_</span>',\n\t);\n\t// Coloration syntaxique pour les listes\n\tcode = code.replace(\n\t\t/^(\\s*)([-*]|\\d+\\.)(\\s)/gm,\n\t\t'<span class=\"markdownLists\">$1$2</span>$3',\n\t);\n\t// Coloration syntaxique pour les liens\n\tcode = code.replace(\n\t\t/(\\[.*?\\])\\((.*?)\\)/g,\n\t\t'<span class=\"markdownLinksText\">$1</span><span class=\"markdownLinksURL\">($2)</span>',\n\t);\n\n\t// Coloration syntaxique pour les tags html\n\tcode = code.replace(\n\t\t/(&lt;aside&gt;)(.*?)(&lt;\\/aside&gt;)/g,\n\t\t'<span class=\"markdownHTMLtag\">$1</span><span class=\"markdownHTMLtagContent\">$2</span><span class=\"markdownHTMLtag\">$3</span>',\n\t);\n\n\t// Coloration syntaxique pour les commentaires html\n\tcode = code.replace(\n\t\t/(&lt;!--.*?--&gt;)/g,\n\t\t'<span class=\"markdownHTMLcomment\">$1</span>',\n\t);\n\n\t// Coloration syntaxique pour les séparations\n\tcode = code.replaceAll(\"---\", '<span class=\"markdownSeparator\">---</span>');\n\n\t// Coloration syntaxique pour le yaml\n\tcode = code.replace(\n\t\t/(style:|maths:|wintext:)/g,\n\t\t'<span class=\"markdownYAML\">$1</span>',\n\t);\n\n\teditor.innerHTML = code;\n};\n","export const optionsEditor = {\n\taddClosing: false,\n\tspellCheck: true,\n\tpreserveIdent: false,\n\ttab: \"\\t\",\n};\n","// Fonction debounce pour gérer l'update des cards avec un délai\nfunction debounce(func, wait) {\n\tlet timeout;\n\treturn function (...args) {\n\t\tconst later = () => {\n\t\t\tclearTimeout(timeout);\n\t\t\tfunc(...args);\n\t\t};\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t};\n}\n\n// Fonction pour mettre à jour les cartes\nfunction updateCards(Memory) {\n\tconst editorElement = document.querySelector(\".editor\");\n\tconst md = editorElement.textContent;\n\tMemory.init(md);\n}\n\nexport function eventKeyUpDebounceUpdateCards(Memory) {\n\t// Utiliser debounce pour appeler updateCards avec un délai afin d'éviter un lag dans le cas d'un document long\n\tconst editorElement = document.querySelector(\".editor\");\n\tconst debouncedUpdateCards = debounce(() => updateCards(Memory), 300);\n\teditorElement.addEventListener(\"keyup\", () => {\n\t\tdebouncedUpdateCards();\n\t});\n}\n","import { createEditor } from \"./dom/createEditor.mjs\";\nimport { createCloseButton } from \"./dom/createCloseButton.mjs\";\nimport { initJar } from \"./helpers/initCodeJar.mjs\";\nimport { initMouseEvents } from \"./events/mouse.mjs\";\nimport { initKeyboardEvents } from \"./events/keyboard.mjs\";\n\nexport function initMarkdownEditor(Memory) {\n\tconst { editorWrapper, editor } = createEditor();\n\tdocument.body.insertBefore(editorWrapper, document.body.firstChild);\n\n\tsetTimeout(() => {\n\t\tconst footer = document.querySelector(\"footer\");\n\t\tfooter.style.top = \"50vh\";\n\t\tconst jar = initJar(editor, Memory);\n\t\tcreateCloseButton(editorWrapper, jar, Memory);\n\t\tinitKeyboardEvents(Memory);\n\t\tinitMouseEvents(editorWrapper, editor, Memory);\n\t}, 100);\n}\n","export function createEditor() {\n\tconst editorWrapper = document.createElement(\"div\");\n\teditorWrapper.className = \"editor-wrapper\";\n\n\tconst editor = document.createElement(\"div\");\n\teditor.className = \"editor\";\n\teditor.setAttribute(\n\t\t\"data-placeholder\",\n\t\t\"Éditez le Markdown ici pour créer votre propre Memory !\",\n\t);\n\n\teditorWrapper.appendChild(editor);\n\treturn { editorWrapper, editor };\n}\n","import { CodeJar } from \"../../../lib/codejar.js\";\nimport { highlightCode } from \"../helpers/highlightCode.mjs\";\nimport { optionsEditor } from \"../helpers/optionsEditor.mjs\";\nimport { defaultMD, rulesReminder } from \"../const.mjs\";\n\nexport function initJar(editor, Memory) {\n\tconst jar = CodeJar(editor, highlightCode, optionsEditor);\n\tlet md = editor.textContent || defaultMD + rulesReminder;\n\tjar.updateCode(md);\n\tMemory.init(md);\n\treturn jar;\n}\n","import { eventKeyUpDebounceUpdateCards } from \"../helpers/updateCards.mjs\";\n\nexport function initKeyboardEvents(Memory) {\n\teventKeyUpDebounceUpdateCards(Memory);\n}\n","import { defaultMD, rulesReminder } from \"../const.mjs\";\n\nexport function initMouseEvents(editorWrapper, editorElement, Memory) {\n\t// Quand la souris est sur l'éditeur, on affiche le contenu des cartes\n\teditorWrapper.addEventListener(\"mouseover\", () => {\n\t\tdocument.body.classList.remove(\"mouseOutEditor\");\n\t\tif (document.body.classList.contains(\"editMode\")) {\n\t\t\tlet md = editorElement.textContent || defaultMD + rulesReminder;\n\t\t\tMemory.init(md);\n\t\t}\n\t\tif (document.querySelector(\"style#cardsVisible\")) return;\n\n\t\tconst style = document.createElement(\"style\");\n\t\tstyle.innerHTML = `\n\t\t\t\t.card .inside:not(.picked) .front {\n\t\t\t\t\tbackface-visibility: visible!important;\n    \t\t\t\ttransform: rotateX(0)!important;\n\t\t\t\t}\n\t\t\t\t.card .inside.picked .front {\n\t\t\t\t\tbackface-visibility: visible!important;\n\t\t\t\t\ttransform: rotateX(180)!important;\n\t\t\t\t}\n\t\t\t\t.card .back {\n\t\t\t\t\tdisplay:none!important;\n\t\t\t\t}\n\t\t\t`;\n\t\tstyle.id = \"cardsVisible\";\n\t\tdocument.body.appendChild(style);\n\t});\n\t// Quand la souris sort de l'éditeur, on remet les cartes face cachée\n\teditorWrapper.addEventListener(\"mouseout\", () => {\n\t\tdocument.body.classList.add(\"mouseOutEditor\");\n\t\tif (document.body.classList.contains(\"editMode\")) {\n\t\t\tlet md = editorElement.textContent || defaultMD + rulesReminder;\n\t\t\tMemory.init(md);\n\t\t}\n\t\tconst style = document.querySelector(\"style#cardsVisible\");\n\t\tif (style) style.remove();\n\t});\n}\n","import { marked } from \"../../lib/marked.js\";\n\nconst renderer = {\n\tlink(href, title, text) {\n\t\tconst link = marked.Renderer.prototype.link.call(this, href, title, text);\n\t\treturn link.replace(\"<a\", \"<a target='_blank' rel='noreferrer' \");\n\t},\n};\n\nmarked.use({\n\trenderer,\n});\n\nfunction stripYAML(md) {\n\treturn md.replace(/^---[\\s\\S]*?---\\s*/, \"\");\n}\n\nexport function parseMarkdown(md) {\n\tmd = stripYAML(md);\n\t// Extraire le titre H1\n\tconst titleMatch = md.match(/^# (.*)/);\n\tconst title = titleMatch ? titleMatch[1].trim() : null;\n\n\t// Extraire le premier blockquote\n\tconst blockquoteMatch = md.match(/^>\\s*(.*)/gm);\n\tconst blockquote = blockquoteMatch ? blockquoteMatch.join(\"\\n\").trim() : null;\n\n\t// Trouver l'index de début du contenu des cartes après le titre H1 et le blockquote\n\tconst contentStartIndex = Math.max(\n\t\ttitleMatch ? md.indexOf(titleMatch[0]) + titleMatch[0].length : 0,\n\t\tblockquoteMatch ? md.indexOf(blockquote) + blockquote.length : 0,\n\t);\n\n\t// Ignorer les lignes vides après le titre H1 et le blockquote\n\tconst startIndex = md.slice(contentStartIndex).match(/^\\s*\\n*/);\n\tconst startLine = startIndex\n\t\t? contentStartIndex + startIndex[0].length\n\t\t: contentStartIndex;\n\n\t// Traiter le contenu après le titre H1 et le blockquote\n\tconst content = md.slice(startLine).replace(/\\n\\n+/g, \"\\n\\n\").trim();\n\tconst cardsContent = content.split(\"\\n\\n\");\n\tconst cards = [];\n\tcardsContent.forEach((card, index) => {\n\t\tif (card.includes(\"\\n\")) {\n\t\t\tconst cardSubCards = card.split(\"\\n\");\n\t\t\tcards.push({\n\t\t\t\tcontent: cardSubCards[0],\n\t\t\t\tid: index,\n\t\t\t\tmatch: cardSubCards[1],\n\t\t\t});\n\t\t\tcards.push({ content: cardSubCards[1], id: index });\n\t\t} else {\n\t\t\tcards.push({ content: card, id: index });\n\t\t}\n\t});\n\treturn { cards, title, blockquote };\n}\n","/**\n * textFit v2.3.1\n * Previously known as jQuery.textFit\n * 11/2014 by STRML (strml.github.com)\n * MIT License\n *\n * To use: textFit(document.getElementById('target-div'), options);\n *\n * Will make the *text* content inside a container scale to fit the container\n * The container is required to have a set width and height\n * Uses binary search to fit text with minimal layout calls.\n * Version 2.0 does not use jQuery.\n */\n\nvar defaultSettings = {\n\talignVert: false, // if true, textFit will align vertically using css tables\n\talignHoriz: false, // if true, textFit will set text-align: center\n\tmultiLine: false, // if true, textFit will not set white-space: no-wrap\n\tdetectMultiLine: true, // disable to turn off automatic multi-line sensing\n\tminFontSize: 6,\n\tmaxFontSize: 80,\n\treProcess: true, // if true, textFit will re-process already-fit nodes. Set to 'false' for better performance\n\twidthOnly: false, // if true, textFit will fit text to element width, regardless of text height\n\talignVertWithFlexbox: false, // if true, textFit will use flexbox for vertical alignment\n};\n\nexport function textFit(els, options) {\n\tif (!options) options = {};\n\n\t// Extend options.\n\tvar settings = {};\n\tfor (var key in defaultSettings) {\n\t\tif (options.hasOwnProperty(key)) {\n\t\t\tsettings[key] = options[key];\n\t\t} else {\n\t\t\tsettings[key] = defaultSettings[key];\n\t\t}\n\t}\n\n\t// Convert jQuery objects into arrays\n\tif (typeof els.toArray === \"function\") {\n\t\tels = els.toArray();\n\t}\n\n\t// Support passing a single el\n\tvar elType = Object.prototype.toString.call(els);\n\tif (\n\t\telType !== \"[object Array]\" &&\n\t\telType !== \"[object NodeList]\" &&\n\t\telType !== \"[object HTMLCollection]\"\n\t) {\n\t\tels = [els];\n\t}\n\n\t// Process each el we've passed.\n\tfor (var i = 0; i < els.length; i++) {\n\t\tprocessItem(els[i], settings);\n\t}\n}\n\n/**\n * The meat. Given an el, make the text inside it fit its parent.\n * @param  {DOMElement} el       Child el.\n * @param  {Object} settings     Options for fit.\n */\nfunction processItem(el, settings) {\n\tif (\n\t\t!isElement(el) ||\n\t\t(!settings.reProcess && el.getAttribute(\"textFitted\"))\n\t) {\n\t\treturn false;\n\t}\n\n\t// Set textFitted attribute so we know this was processed.\n\tif (!settings.reProcess) {\n\t\tel.setAttribute(\"textFitted\", 1);\n\t}\n\n\tvar innerSpan, originalHeight, originalHTML, originalWidth;\n\tvar low, mid, high;\n\n\t// Get element data.\n\toriginalHTML = el.innerHTML;\n\toriginalWidth = innerWidth(el);\n\toriginalHeight = innerHeight(el);\n\n\t// Don't process if we can't find box dimensions\n\tif (!originalWidth || (!settings.widthOnly && !originalHeight)) {\n\t\tif (!settings.widthOnly)\n\t\t\tthrow new Error(\n\t\t\t\t\"Set a static height and width on the target element \" +\n\t\t\t\t\tel.outerHTML +\n\t\t\t\t\t\" before using textFit!\",\n\t\t\t);\n\t\telse\n\t\t\tthrow new Error(\n\t\t\t\t\"Set a static width on the target element \" +\n\t\t\t\t\tel.outerHTML +\n\t\t\t\t\t\" before using textFit!\",\n\t\t\t);\n\t}\n\n\t// Add textFitted span inside this container.\n\tif (originalHTML.indexOf(\"textFitted\") === -1) {\n\t\tinnerSpan = document.createElement(\"span\");\n\t\tinnerSpan.className = \"textFitted\";\n\t\t// Inline block ensure it takes on the size of its contents, even if they are enclosed\n\t\t// in other tags like <p>\n\t\tinnerSpan.style[\"display\"] = \"inline-block\";\n\t\tinnerSpan.innerHTML = originalHTML;\n\t\tel.innerHTML = \"\";\n\t\tel.appendChild(innerSpan);\n\t} else {\n\t\t// Reprocessing.\n\t\tinnerSpan = el.querySelector(\"span.textFitted\");\n\t\t// Remove vertical align if we're reprocessing.\n\t\tif (hasClass(innerSpan, \"textFitAlignVert\")) {\n\t\t\tinnerSpan.className = innerSpan.className.replace(\"textFitAlignVert\", \"\");\n\t\t\tinnerSpan.style[\"height\"] = \"\";\n\t\t\tel.className.replace(\"textFitAlignVertFlex\", \"\");\n\t\t}\n\t}\n\n\t// Prepare & set alignment\n\tif (settings.alignHoriz) {\n\t\tel.style[\"text-align\"] = \"center\";\n\t\tinnerSpan.style[\"text-align\"] = \"center\";\n\t}\n\n\t// Check if this string is multiple lines\n\t// Not guaranteed to always work if you use wonky line-heights\n\tvar multiLine = settings.multiLine;\n\tif (\n\t\tsettings.detectMultiLine &&\n\t\t!multiLine &&\n\t\tinnerSpan.getBoundingClientRect().height >=\n\t\t\tparseInt(window.getComputedStyle(innerSpan)[\"font-size\"], 10) * 2\n\t) {\n\t\tmultiLine = true;\n\t}\n\n\t// If we're not treating this as a multiline string, don't let it wrap.\n\tif (!multiLine) {\n\t\tel.style[\"white-space\"] = \"nowrap\";\n\t}\n\n\tlow = settings.minFontSize;\n\thigh = settings.maxFontSize;\n\n\t// Binary search for highest best fit\n\tvar size = low;\n\twhile (low <= high) {\n\t\tmid = (high + low) >> 1;\n\t\tinnerSpan.style.fontSize = mid + \"px\";\n\t\tvar innerSpanBoundingClientRect = innerSpan.getBoundingClientRect();\n\t\tif (\n\t\t\tinnerSpanBoundingClientRect.width <= originalWidth &&\n\t\t\t(settings.widthOnly ||\n\t\t\t\tinnerSpanBoundingClientRect.height <= originalHeight)\n\t\t) {\n\t\t\tsize = mid;\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid - 1;\n\t\t}\n\t\t// await injection point\n\t}\n\t// found, updating font if differs:\n\tif (innerSpan.style.fontSize != size + \"px\")\n\t\tinnerSpan.style.fontSize = size + \"px\";\n\n\t// Our height is finalized. If we are aligning vertically, set that up.\n\tif (settings.alignVert) {\n\t\taddStyleSheet();\n\t\tvar height = innerSpan.scrollHeight;\n\t\tif (window.getComputedStyle(el)[\"position\"] === \"static\") {\n\t\t\tel.style[\"position\"] = \"relative\";\n\t\t}\n\t\tif (!hasClass(innerSpan, \"textFitAlignVert\")) {\n\t\t\tinnerSpan.className = innerSpan.className + \" textFitAlignVert\";\n\t\t}\n\t\tinnerSpan.style[\"height\"] = height + \"px\";\n\t\tif (\n\t\t\tsettings.alignVertWithFlexbox &&\n\t\t\t!hasClass(el, \"textFitAlignVertFlex\")\n\t\t) {\n\t\t\tel.className = el.className + \" textFitAlignVertFlex\";\n\t\t}\n\t}\n}\n\n// Calculate height without padding.\nfunction innerHeight(el) {\n\tvar style = window.getComputedStyle(el, null);\n\treturn (\n\t\tel.getBoundingClientRect().height -\n\t\tparseInt(style.getPropertyValue(\"padding-top\"), 10) -\n\t\tparseInt(style.getPropertyValue(\"padding-bottom\"), 10)\n\t);\n}\n\n// Calculate width without padding.\nfunction innerWidth(el) {\n\tvar style = window.getComputedStyle(el, null);\n\treturn (\n\t\tel.getBoundingClientRect().width -\n\t\tparseInt(style.getPropertyValue(\"padding-left\"), 10) -\n\t\tparseInt(style.getPropertyValue(\"padding-right\"), 10)\n\t);\n}\n\n//Returns true if it is a DOM element\nfunction isElement(o) {\n\treturn typeof HTMLElement === \"object\"\n\t\t? o instanceof HTMLElement //DOM2\n\t\t: o &&\n\t\t\t\ttypeof o === \"object\" &&\n\t\t\t\to !== null &&\n\t\t\t\to.nodeType === 1 &&\n\t\t\t\ttypeof o.nodeName === \"string\";\n}\n\nfunction hasClass(element, cls) {\n\treturn (\" \" + element.className + \" \").indexOf(\" \" + cls + \" \") > -1;\n}\n\n// Better than a stylesheet dependency\nfunction addStyleSheet() {\n\tif (document.getElementById(\"textFitStyleSheet\")) return;\n\tvar style = [\n\t\t\".textFitAlignVert{\",\n\t\t\"position: absolute;\",\n\t\t\"top: 0; right: 0; bottom: 0; left: 0;\",\n\t\t\"margin: auto;\",\n\t\t\"display: flex;\",\n\t\t\"justify-content: center;\",\n\t\t\"flex-direction: column;\",\n\t\t\"}\",\n\t\t\".textFitAlignVertFlex{\",\n\t\t\"display: flex;\",\n\t\t\"}\",\n\t\t\".textFitAlignVertFlex .textFitAlignVert{\",\n\t\t\"position: static;\",\n\t\t\"}\",\n\t].join(\"\");\n\n\tvar css = document.createElement(\"style\");\n\tcss.type = \"text/css\";\n\tcss.id = \"textFitStyleSheet\";\n\tcss.innerHTML = style;\n\tdocument.body.appendChild(css);\n}\n","\n/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */\nfunction isNothing(subject) {\n\treturn (typeof subject === 'undefined') || (subject === null);\n  }\n  \n  \n  function isObject(subject) {\n\treturn (typeof subject === 'object') && (subject !== null);\n  }\n  \n  \n  function toArray(sequence) {\n\tif (Array.isArray(sequence)) return sequence;\n\telse if (isNothing(sequence)) return [];\n  \n\treturn [ sequence ];\n  }\n  \n  \n  function extend(target, source) {\n\tvar index, length, key, sourceKeys;\n  \n\tif (source) {\n\t  sourceKeys = Object.keys(source);\n  \n\t  for (index = 0, length = sourceKeys.length; index < length; index += 1) {\n\t\tkey = sourceKeys[index];\n\t\ttarget[key] = source[key];\n\t  }\n\t}\n  \n\treturn target;\n  }\n  \n  \n  function repeat(string, count) {\n\tvar result = '', cycle;\n  \n\tfor (cycle = 0; cycle < count; cycle += 1) {\n\t  result += string;\n\t}\n  \n\treturn result;\n  }\n  \n  \n  function isNegativeZero(number) {\n\treturn (number === 0) && (Number.NEGATIVE_INFINITY === 1 / number);\n  }\n  \n  \n  var isNothing_1      = isNothing;\n  var isObject_1       = isObject;\n  var toArray_1        = toArray;\n  var repeat_1         = repeat;\n  var isNegativeZero_1 = isNegativeZero;\n  var extend_1         = extend;\n  \n  var common = {\n\t  isNothing: isNothing_1,\n\t  isObject: isObject_1,\n\t  toArray: toArray_1,\n\t  repeat: repeat_1,\n\t  isNegativeZero: isNegativeZero_1,\n\t  extend: extend_1\n  };\n  \n  // YAML error class. http://stackoverflow.com/questions/8458984\n  \n  \n  function formatError(exception, compact) {\n\tvar where = '', message = exception.reason || '(unknown reason)';\n  \n\tif (!exception.mark) return message;\n  \n\tif (exception.mark.name) {\n\t  where += 'in \"' + exception.mark.name + '\" ';\n\t}\n  \n\twhere += '(' + (exception.mark.line + 1) + ':' + (exception.mark.column + 1) + ')';\n  \n\tif (!compact && exception.mark.snippet) {\n\t  where += '\\n\\n' + exception.mark.snippet;\n\t}\n  \n\treturn message + ' ' + where;\n  }\n  \n  \n  function YAMLException$1(reason, mark) {\n\t// Super constructor\n\tError.call(this);\n  \n\tthis.name = 'YAMLException';\n\tthis.reason = reason;\n\tthis.mark = mark;\n\tthis.message = formatError(this, false);\n  \n\t// Include stack trace in error object\n\tif (Error.captureStackTrace) {\n\t  // Chrome and NodeJS\n\t  Error.captureStackTrace(this, this.constructor);\n\t} else {\n\t  // FF, IE 10+ and Safari 6+. Fallback for others\n\t  this.stack = (new Error()).stack || '';\n\t}\n  }\n  \n  \n  // Inherit from Error\n  YAMLException$1.prototype = Object.create(Error.prototype);\n  YAMLException$1.prototype.constructor = YAMLException$1;\n  \n  \n  YAMLException$1.prototype.toString = function toString(compact) {\n\treturn this.name + ': ' + formatError(this, compact);\n  };\n  \n  \n  var exception = YAMLException$1;\n  \n  // get snippet for a single line, respecting maxLength\n  function getLine(buffer, lineStart, lineEnd, position, maxLineLength) {\n\tvar head = '';\n\tvar tail = '';\n\tvar maxHalfLength = Math.floor(maxLineLength / 2) - 1;\n  \n\tif (position - lineStart > maxHalfLength) {\n\t  head = ' ... ';\n\t  lineStart = position - maxHalfLength + head.length;\n\t}\n  \n\tif (lineEnd - position > maxHalfLength) {\n\t  tail = ' ...';\n\t  lineEnd = position + maxHalfLength - tail.length;\n\t}\n  \n\treturn {\n\t  str: head + buffer.slice(lineStart, lineEnd).replace(/\\t/g, '→') + tail,\n\t  pos: position - lineStart + head.length // relative position\n\t};\n  }\n  \n  \n  function padStart(string, max) {\n\treturn common.repeat(' ', max - string.length) + string;\n  }\n  \n  \n  function makeSnippet(mark, options) {\n\toptions = Object.create(options || null);\n  \n\tif (!mark.buffer) return null;\n  \n\tif (!options.maxLength) options.maxLength = 79;\n\tif (typeof options.indent      !== 'number') options.indent      = 1;\n\tif (typeof options.linesBefore !== 'number') options.linesBefore = 3;\n\tif (typeof options.linesAfter  !== 'number') options.linesAfter  = 2;\n  \n\tvar re = /\\r?\\n|\\r|\\0/g;\n\tvar lineStarts = [ 0 ];\n\tvar lineEnds = [];\n\tvar match;\n\tvar foundLineNo = -1;\n  \n\twhile ((match = re.exec(mark.buffer))) {\n\t  lineEnds.push(match.index);\n\t  lineStarts.push(match.index + match[0].length);\n  \n\t  if (mark.position <= match.index && foundLineNo < 0) {\n\t\tfoundLineNo = lineStarts.length - 2;\n\t  }\n\t}\n  \n\tif (foundLineNo < 0) foundLineNo = lineStarts.length - 1;\n  \n\tvar result = '', i, line;\n\tvar lineNoLength = Math.min(mark.line + options.linesAfter, lineEnds.length).toString().length;\n\tvar maxLineLength = options.maxLength - (options.indent + lineNoLength + 3);\n  \n\tfor (i = 1; i <= options.linesBefore; i++) {\n\t  if (foundLineNo - i < 0) break;\n\t  line = getLine(\n\t\tmark.buffer,\n\t\tlineStarts[foundLineNo - i],\n\t\tlineEnds[foundLineNo - i],\n\t\tmark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo - i]),\n\t\tmaxLineLength\n\t  );\n\t  result = common.repeat(' ', options.indent) + padStart((mark.line - i + 1).toString(), lineNoLength) +\n\t\t' | ' + line.str + '\\n' + result;\n\t}\n  \n\tline = getLine(mark.buffer, lineStarts[foundLineNo], lineEnds[foundLineNo], mark.position, maxLineLength);\n\tresult += common.repeat(' ', options.indent) + padStart((mark.line + 1).toString(), lineNoLength) +\n\t  ' | ' + line.str + '\\n';\n\tresult += common.repeat('-', options.indent + lineNoLength + 3 + line.pos) + '^' + '\\n';\n  \n\tfor (i = 1; i <= options.linesAfter; i++) {\n\t  if (foundLineNo + i >= lineEnds.length) break;\n\t  line = getLine(\n\t\tmark.buffer,\n\t\tlineStarts[foundLineNo + i],\n\t\tlineEnds[foundLineNo + i],\n\t\tmark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo + i]),\n\t\tmaxLineLength\n\t  );\n\t  result += common.repeat(' ', options.indent) + padStart((mark.line + i + 1).toString(), lineNoLength) +\n\t\t' | ' + line.str + '\\n';\n\t}\n  \n\treturn result.replace(/\\n$/, '');\n  }\n  \n  \n  var snippet = makeSnippet;\n  \n  var TYPE_CONSTRUCTOR_OPTIONS = [\n\t'kind',\n\t'multi',\n\t'resolve',\n\t'construct',\n\t'instanceOf',\n\t'predicate',\n\t'represent',\n\t'representName',\n\t'defaultStyle',\n\t'styleAliases'\n  ];\n  \n  var YAML_NODE_KINDS = [\n\t'scalar',\n\t'sequence',\n\t'mapping'\n  ];\n  \n  function compileStyleAliases(map) {\n\tvar result = {};\n  \n\tif (map !== null) {\n\t  Object.keys(map).forEach(function (style) {\n\t\tmap[style].forEach(function (alias) {\n\t\t  result[String(alias)] = style;\n\t\t});\n\t  });\n\t}\n  \n\treturn result;\n  }\n  \n  function Type$1(tag, options) {\n\toptions = options || {};\n  \n\tObject.keys(options).forEach(function (name) {\n\t  if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {\n\t\tthrow new exception('Unknown option \"' + name + '\" is met in definition of \"' + tag + '\" YAML type.');\n\t  }\n\t});\n  \n\t// TODO: Add tag format check.\n\tthis.options       = options; // keep original options in case user wants to extend this type later\n\tthis.tag           = tag;\n\tthis.kind          = options['kind']          || null;\n\tthis.resolve       = options['resolve']       || function () { return true; };\n\tthis.construct     = options['construct']     || function (data) { return data; };\n\tthis.instanceOf    = options['instanceOf']    || null;\n\tthis.predicate     = options['predicate']     || null;\n\tthis.represent     = options['represent']     || null;\n\tthis.representName = options['representName'] || null;\n\tthis.defaultStyle  = options['defaultStyle']  || null;\n\tthis.multi         = options['multi']         || false;\n\tthis.styleAliases  = compileStyleAliases(options['styleAliases'] || null);\n  \n\tif (YAML_NODE_KINDS.indexOf(this.kind) === -1) {\n\t  throw new exception('Unknown kind \"' + this.kind + '\" is specified for \"' + tag + '\" YAML type.');\n\t}\n  }\n  \n  var type = Type$1;\n  \n  /*eslint-disable max-len*/\n  \n  \n  \n  \n  \n  function compileList(schema, name) {\n\tvar result = [];\n  \n\tschema[name].forEach(function (currentType) {\n\t  var newIndex = result.length;\n  \n\t  result.forEach(function (previousType, previousIndex) {\n\t\tif (previousType.tag === currentType.tag &&\n\t\t\tpreviousType.kind === currentType.kind &&\n\t\t\tpreviousType.multi === currentType.multi) {\n  \n\t\t  newIndex = previousIndex;\n\t\t}\n\t  });\n  \n\t  result[newIndex] = currentType;\n\t});\n  \n\treturn result;\n  }\n  \n  \n  function compileMap(/* lists... */) {\n\tvar result = {\n\t\t  scalar: {},\n\t\t  sequence: {},\n\t\t  mapping: {},\n\t\t  fallback: {},\n\t\t  multi: {\n\t\t\tscalar: [],\n\t\t\tsequence: [],\n\t\t\tmapping: [],\n\t\t\tfallback: []\n\t\t  }\n\t\t}, index, length;\n  \n\tfunction collectType(type) {\n\t  if (type.multi) {\n\t\tresult.multi[type.kind].push(type);\n\t\tresult.multi['fallback'].push(type);\n\t  } else {\n\t\tresult[type.kind][type.tag] = result['fallback'][type.tag] = type;\n\t  }\n\t}\n  \n\tfor (index = 0, length = arguments.length; index < length; index += 1) {\n\t  arguments[index].forEach(collectType);\n\t}\n\treturn result;\n  }\n  \n  \n  function Schema$1(definition) {\n\treturn this.extend(definition);\n  }\n  \n  \n  Schema$1.prototype.extend = function extend(definition) {\n\tvar implicit = [];\n\tvar explicit = [];\n  \n\tif (definition instanceof type) {\n\t  // Schema.extend(type)\n\t  explicit.push(definition);\n  \n\t} else if (Array.isArray(definition)) {\n\t  // Schema.extend([ type1, type2, ... ])\n\t  explicit = explicit.concat(definition);\n  \n\t} else if (definition && (Array.isArray(definition.implicit) || Array.isArray(definition.explicit))) {\n\t  // Schema.extend({ explicit: [ type1, type2, ... ], implicit: [ type1, type2, ... ] })\n\t  if (definition.implicit) implicit = implicit.concat(definition.implicit);\n\t  if (definition.explicit) explicit = explicit.concat(definition.explicit);\n  \n\t} else {\n\t  throw new exception('Schema.extend argument should be a Type, [ Type ], ' +\n\t\t'or a schema definition ({ implicit: [...], explicit: [...] })');\n\t}\n  \n\timplicit.forEach(function (type$1) {\n\t  if (!(type$1 instanceof type)) {\n\t\tthrow new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n\t  }\n  \n\t  if (type$1.loadKind && type$1.loadKind !== 'scalar') {\n\t\tthrow new exception('There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.');\n\t  }\n  \n\t  if (type$1.multi) {\n\t\tthrow new exception('There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.');\n\t  }\n\t});\n  \n\texplicit.forEach(function (type$1) {\n\t  if (!(type$1 instanceof type)) {\n\t\tthrow new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n\t  }\n\t});\n  \n\tvar result = Object.create(Schema$1.prototype);\n  \n\tresult.implicit = (this.implicit || []).concat(implicit);\n\tresult.explicit = (this.explicit || []).concat(explicit);\n  \n\tresult.compiledImplicit = compileList(result, 'implicit');\n\tresult.compiledExplicit = compileList(result, 'explicit');\n\tresult.compiledTypeMap  = compileMap(result.compiledImplicit, result.compiledExplicit);\n  \n\treturn result;\n  };\n  \n  \n  var schema = Schema$1;\n  \n  var str = new type('tag:yaml.org,2002:str', {\n\tkind: 'scalar',\n\tconstruct: function (data) { return data !== null ? data : ''; }\n  });\n  \n  var seq = new type('tag:yaml.org,2002:seq', {\n\tkind: 'sequence',\n\tconstruct: function (data) { return data !== null ? data : []; }\n  });\n  \n  var map = new type('tag:yaml.org,2002:map', {\n\tkind: 'mapping',\n\tconstruct: function (data) { return data !== null ? data : {}; }\n  });\n  \n  var failsafe = new schema({\n\texplicit: [\n\t  str,\n\t  seq,\n\t  map\n\t]\n  });\n  \n  function resolveYamlNull(data) {\n\tif (data === null) return true;\n  \n\tvar max = data.length;\n  \n\treturn (max === 1 && data === '~') ||\n\t\t   (max === 4 && (data === 'null' || data === 'Null' || data === 'NULL'));\n  }\n  \n  function constructYamlNull() {\n\treturn null;\n  }\n  \n  function isNull(object) {\n\treturn object === null;\n  }\n  \n  var _null = new type('tag:yaml.org,2002:null', {\n\tkind: 'scalar',\n\tresolve: resolveYamlNull,\n\tconstruct: constructYamlNull,\n\tpredicate: isNull,\n\trepresent: {\n\t  canonical: function () { return '~';    },\n\t  lowercase: function () { return 'null'; },\n\t  uppercase: function () { return 'NULL'; },\n\t  camelcase: function () { return 'Null'; },\n\t  empty:     function () { return '';     }\n\t},\n\tdefaultStyle: 'lowercase'\n  });\n  \n  function resolveYamlBoolean(data) {\n\tif (data === null) return false;\n  \n\tvar max = data.length;\n  \n\treturn (max === 4 && (data === 'true' || data === 'True' || data === 'TRUE')) ||\n\t\t   (max === 5 && (data === 'false' || data === 'False' || data === 'FALSE'));\n  }\n  \n  function constructYamlBoolean(data) {\n\treturn data === 'true' ||\n\t\t   data === 'True' ||\n\t\t   data === 'TRUE';\n  }\n  \n  function isBoolean(object) {\n\treturn Object.prototype.toString.call(object) === '[object Boolean]';\n  }\n  \n  var bool = new type('tag:yaml.org,2002:bool', {\n\tkind: 'scalar',\n\tresolve: resolveYamlBoolean,\n\tconstruct: constructYamlBoolean,\n\tpredicate: isBoolean,\n\trepresent: {\n\t  lowercase: function (object) { return object ? 'true' : 'false'; },\n\t  uppercase: function (object) { return object ? 'TRUE' : 'FALSE'; },\n\t  camelcase: function (object) { return object ? 'True' : 'False'; }\n\t},\n\tdefaultStyle: 'lowercase'\n  });\n  \n  function isHexCode(c) {\n\treturn ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) ||\n\t\t   ((0x41/* A */ <= c) && (c <= 0x46/* F */)) ||\n\t\t   ((0x61/* a */ <= c) && (c <= 0x66/* f */));\n  }\n  \n  function isOctCode(c) {\n\treturn ((0x30/* 0 */ <= c) && (c <= 0x37/* 7 */));\n  }\n  \n  function isDecCode(c) {\n\treturn ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */));\n  }\n  \n  function resolveYamlInteger(data) {\n\tif (data === null) return false;\n  \n\tvar max = data.length,\n\t\tindex = 0,\n\t\thasDigits = false,\n\t\tch;\n  \n\tif (!max) return false;\n  \n\tch = data[index];\n  \n\t// sign\n\tif (ch === '-' || ch === '+') {\n\t  ch = data[++index];\n\t}\n  \n\tif (ch === '0') {\n\t  // 0\n\t  if (index + 1 === max) return true;\n\t  ch = data[++index];\n  \n\t  // base 2, base 8, base 16\n  \n\t  if (ch === 'b') {\n\t\t// base 2\n\t\tindex++;\n  \n\t\tfor (; index < max; index++) {\n\t\t  ch = data[index];\n\t\t  if (ch === '_') continue;\n\t\t  if (ch !== '0' && ch !== '1') return false;\n\t\t  hasDigits = true;\n\t\t}\n\t\treturn hasDigits && ch !== '_';\n\t  }\n  \n  \n\t  if (ch === 'x') {\n\t\t// base 16\n\t\tindex++;\n  \n\t\tfor (; index < max; index++) {\n\t\t  ch = data[index];\n\t\t  if (ch === '_') continue;\n\t\t  if (!isHexCode(data.charCodeAt(index))) return false;\n\t\t  hasDigits = true;\n\t\t}\n\t\treturn hasDigits && ch !== '_';\n\t  }\n  \n  \n\t  if (ch === 'o') {\n\t\t// base 8\n\t\tindex++;\n  \n\t\tfor (; index < max; index++) {\n\t\t  ch = data[index];\n\t\t  if (ch === '_') continue;\n\t\t  if (!isOctCode(data.charCodeAt(index))) return false;\n\t\t  hasDigits = true;\n\t\t}\n\t\treturn hasDigits && ch !== '_';\n\t  }\n\t}\n  \n\t// base 10 (except 0)\n  \n\t// value should not start with `_`;\n\tif (ch === '_') return false;\n  \n\tfor (; index < max; index++) {\n\t  ch = data[index];\n\t  if (ch === '_') continue;\n\t  if (!isDecCode(data.charCodeAt(index))) {\n\t\treturn false;\n\t  }\n\t  hasDigits = true;\n\t}\n  \n\t// Should have digits and should not end with `_`\n\tif (!hasDigits || ch === '_') return false;\n  \n\treturn true;\n  }\n  \n  function constructYamlInteger(data) {\n\tvar value = data, sign = 1, ch;\n  \n\tif (value.indexOf('_') !== -1) {\n\t  value = value.replace(/_/g, '');\n\t}\n  \n\tch = value[0];\n  \n\tif (ch === '-' || ch === '+') {\n\t  if (ch === '-') sign = -1;\n\t  value = value.slice(1);\n\t  ch = value[0];\n\t}\n  \n\tif (value === '0') return 0;\n  \n\tif (ch === '0') {\n\t  if (value[1] === 'b') return sign * parseInt(value.slice(2), 2);\n\t  if (value[1] === 'x') return sign * parseInt(value.slice(2), 16);\n\t  if (value[1] === 'o') return sign * parseInt(value.slice(2), 8);\n\t}\n  \n\treturn sign * parseInt(value, 10);\n  }\n  \n  function isInteger(object) {\n\treturn (Object.prototype.toString.call(object)) === '[object Number]' &&\n\t\t   (object % 1 === 0 && !common.isNegativeZero(object));\n  }\n  \n  var int = new type('tag:yaml.org,2002:int', {\n\tkind: 'scalar',\n\tresolve: resolveYamlInteger,\n\tconstruct: constructYamlInteger,\n\tpredicate: isInteger,\n\trepresent: {\n\t  binary:      function (obj) { return obj >= 0 ? '0b' + obj.toString(2) : '-0b' + obj.toString(2).slice(1); },\n\t  octal:       function (obj) { return obj >= 0 ? '0o'  + obj.toString(8) : '-0o'  + obj.toString(8).slice(1); },\n\t  decimal:     function (obj) { return obj.toString(10); },\n\t  /* eslint-disable max-len */\n\t  hexadecimal: function (obj) { return obj >= 0 ? '0x' + obj.toString(16).toUpperCase() :  '-0x' + obj.toString(16).toUpperCase().slice(1); }\n\t},\n\tdefaultStyle: 'decimal',\n\tstyleAliases: {\n\t  binary:      [ 2,  'bin' ],\n\t  octal:       [ 8,  'oct' ],\n\t  decimal:     [ 10, 'dec' ],\n\t  hexadecimal: [ 16, 'hex' ]\n\t}\n  });\n  \n  var YAML_FLOAT_PATTERN = new RegExp(\n\t// 2.5e4, 2.5 and integers\n\t'^(?:[-+]?(?:[0-9][0-9_]*)(?:\\\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?' +\n\t// .2e4, .2\n\t// special case, seems not from spec\n\t'|\\\\.[0-9_]+(?:[eE][-+]?[0-9]+)?' +\n\t// .inf\n\t'|[-+]?\\\\.(?:inf|Inf|INF)' +\n\t// .nan\n\t'|\\\\.(?:nan|NaN|NAN))$');\n  \n  function resolveYamlFloat(data) {\n\tif (data === null) return false;\n  \n\tif (!YAML_FLOAT_PATTERN.test(data) ||\n\t\t// Quick hack to not allow integers end with `_`\n\t\t// Probably should update regexp & check speed\n\t\tdata[data.length - 1] === '_') {\n\t  return false;\n\t}\n  \n\treturn true;\n  }\n  \n  function constructYamlFloat(data) {\n\tvar value, sign;\n  \n\tvalue  = data.replace(/_/g, '').toLowerCase();\n\tsign   = value[0] === '-' ? -1 : 1;\n  \n\tif ('+-'.indexOf(value[0]) >= 0) {\n\t  value = value.slice(1);\n\t}\n  \n\tif (value === '.inf') {\n\t  return (sign === 1) ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\n  \n\t} else if (value === '.nan') {\n\t  return NaN;\n\t}\n\treturn sign * parseFloat(value, 10);\n  }\n  \n  \n  var SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;\n  \n  function representYamlFloat(object, style) {\n\tvar res;\n  \n\tif (isNaN(object)) {\n\t  switch (style) {\n\t\tcase 'lowercase': return '.nan';\n\t\tcase 'uppercase': return '.NAN';\n\t\tcase 'camelcase': return '.NaN';\n\t  }\n\t} else if (Number.POSITIVE_INFINITY === object) {\n\t  switch (style) {\n\t\tcase 'lowercase': return '.inf';\n\t\tcase 'uppercase': return '.INF';\n\t\tcase 'camelcase': return '.Inf';\n\t  }\n\t} else if (Number.NEGATIVE_INFINITY === object) {\n\t  switch (style) {\n\t\tcase 'lowercase': return '-.inf';\n\t\tcase 'uppercase': return '-.INF';\n\t\tcase 'camelcase': return '-.Inf';\n\t  }\n\t} else if (common.isNegativeZero(object)) {\n\t  return '-0.0';\n\t}\n  \n\tres = object.toString(10);\n  \n\t// JS stringifier can build scientific format without dots: 5e-100,\n\t// while YAML requres dot: 5.e-100. Fix it with simple hack\n  \n\treturn SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace('e', '.e') : res;\n  }\n  \n  function isFloat(object) {\n\treturn (Object.prototype.toString.call(object) === '[object Number]') &&\n\t\t   (object % 1 !== 0 || common.isNegativeZero(object));\n  }\n  \n  var float = new type('tag:yaml.org,2002:float', {\n\tkind: 'scalar',\n\tresolve: resolveYamlFloat,\n\tconstruct: constructYamlFloat,\n\tpredicate: isFloat,\n\trepresent: representYamlFloat,\n\tdefaultStyle: 'lowercase'\n  });\n  \n  var json = failsafe.extend({\n\timplicit: [\n\t  _null,\n\t  bool,\n\t  int,\n\t  float\n\t]\n  });\n  \n  var core = json;\n  \n  var YAML_DATE_REGEXP = new RegExp(\n\t'^([0-9][0-9][0-9][0-9])'          + // [1] year\n\t'-([0-9][0-9])'                    + // [2] month\n\t'-([0-9][0-9])$');                   // [3] day\n  \n  var YAML_TIMESTAMP_REGEXP = new RegExp(\n\t'^([0-9][0-9][0-9][0-9])'          + // [1] year\n\t'-([0-9][0-9]?)'                   + // [2] month\n\t'-([0-9][0-9]?)'                   + // [3] day\n\t'(?:[Tt]|[ \\\\t]+)'                 + // ...\n\t'([0-9][0-9]?)'                    + // [4] hour\n\t':([0-9][0-9])'                    + // [5] minute\n\t':([0-9][0-9])'                    + // [6] second\n\t'(?:\\\\.([0-9]*))?'                 + // [7] fraction\n\t'(?:[ \\\\t]*(Z|([-+])([0-9][0-9]?)' + // [8] tz [9] tz_sign [10] tz_hour\n\t'(?::([0-9][0-9]))?))?$');           // [11] tz_minute\n  \n  function resolveYamlTimestamp(data) {\n\tif (data === null) return false;\n\tif (YAML_DATE_REGEXP.exec(data) !== null) return true;\n\tif (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;\n\treturn false;\n  }\n  \n  function constructYamlTimestamp(data) {\n\tvar match, year, month, day, hour, minute, second, fraction = 0,\n\t\tdelta = null, tz_hour, tz_minute, date;\n  \n\tmatch = YAML_DATE_REGEXP.exec(data);\n\tif (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);\n  \n\tif (match === null) throw new Error('Date resolve error');\n  \n\t// match: [1] year [2] month [3] day\n  \n\tyear = +(match[1]);\n\tmonth = +(match[2]) - 1; // JS month starts with 0\n\tday = +(match[3]);\n  \n\tif (!match[4]) { // no hour\n\t  return new Date(Date.UTC(year, month, day));\n\t}\n  \n\t// match: [4] hour [5] minute [6] second [7] fraction\n  \n\thour = +(match[4]);\n\tminute = +(match[5]);\n\tsecond = +(match[6]);\n  \n\tif (match[7]) {\n\t  fraction = match[7].slice(0, 3);\n\t  while (fraction.length < 3) { // milli-seconds\n\t\tfraction += '0';\n\t  }\n\t  fraction = +fraction;\n\t}\n  \n\t// match: [8] tz [9] tz_sign [10] tz_hour [11] tz_minute\n  \n\tif (match[9]) {\n\t  tz_hour = +(match[10]);\n\t  tz_minute = +(match[11] || 0);\n\t  delta = (tz_hour * 60 + tz_minute) * 60000; // delta in mili-seconds\n\t  if (match[9] === '-') delta = -delta;\n\t}\n  \n\tdate = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));\n  \n\tif (delta) date.setTime(date.getTime() - delta);\n  \n\treturn date;\n  }\n  \n  function representYamlTimestamp(object /*, style*/) {\n\treturn object.toISOString();\n  }\n  \n  var timestamp = new type('tag:yaml.org,2002:timestamp', {\n\tkind: 'scalar',\n\tresolve: resolveYamlTimestamp,\n\tconstruct: constructYamlTimestamp,\n\tinstanceOf: Date,\n\trepresent: representYamlTimestamp\n  });\n  \n  function resolveYamlMerge(data) {\n\treturn data === '<<' || data === null;\n  }\n  \n  var merge = new type('tag:yaml.org,2002:merge', {\n\tkind: 'scalar',\n\tresolve: resolveYamlMerge\n  });\n  \n  /*eslint-disable no-bitwise*/\n  \n  \n  \n  \n  \n  // [ 64, 65, 66 ] -> [ padding, CR, LF ]\n  var BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\\n\\r';\n  \n  \n  function resolveYamlBinary(data) {\n\tif (data === null) return false;\n  \n\tvar code, idx, bitlen = 0, max = data.length, map = BASE64_MAP;\n  \n\t// Convert one by one.\n\tfor (idx = 0; idx < max; idx++) {\n\t  code = map.indexOf(data.charAt(idx));\n  \n\t  // Skip CR/LF\n\t  if (code > 64) continue;\n  \n\t  // Fail on illegal characters\n\t  if (code < 0) return false;\n  \n\t  bitlen += 6;\n\t}\n  \n\t// If there are any bits left, source was corrupted\n\treturn (bitlen % 8) === 0;\n  }\n  \n  function constructYamlBinary(data) {\n\tvar idx, tailbits,\n\t\tinput = data.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n\t\tmax = input.length,\n\t\tmap = BASE64_MAP,\n\t\tbits = 0,\n\t\tresult = [];\n  \n\t// Collect by 6*4 bits (3 bytes)\n  \n\tfor (idx = 0; idx < max; idx++) {\n\t  if ((idx % 4 === 0) && idx) {\n\t\tresult.push((bits >> 16) & 0xFF);\n\t\tresult.push((bits >> 8) & 0xFF);\n\t\tresult.push(bits & 0xFF);\n\t  }\n  \n\t  bits = (bits << 6) | map.indexOf(input.charAt(idx));\n\t}\n  \n\t// Dump tail\n  \n\ttailbits = (max % 4) * 6;\n  \n\tif (tailbits === 0) {\n\t  result.push((bits >> 16) & 0xFF);\n\t  result.push((bits >> 8) & 0xFF);\n\t  result.push(bits & 0xFF);\n\t} else if (tailbits === 18) {\n\t  result.push((bits >> 10) & 0xFF);\n\t  result.push((bits >> 2) & 0xFF);\n\t} else if (tailbits === 12) {\n\t  result.push((bits >> 4) & 0xFF);\n\t}\n  \n\treturn new Uint8Array(result);\n  }\n  \n  function representYamlBinary(object /*, style*/) {\n\tvar result = '', bits = 0, idx, tail,\n\t\tmax = object.length,\n\t\tmap = BASE64_MAP;\n  \n\t// Convert every three bytes to 4 ASCII characters.\n  \n\tfor (idx = 0; idx < max; idx++) {\n\t  if ((idx % 3 === 0) && idx) {\n\t\tresult += map[(bits >> 18) & 0x3F];\n\t\tresult += map[(bits >> 12) & 0x3F];\n\t\tresult += map[(bits >> 6) & 0x3F];\n\t\tresult += map[bits & 0x3F];\n\t  }\n  \n\t  bits = (bits << 8) + object[idx];\n\t}\n  \n\t// Dump tail\n  \n\ttail = max % 3;\n  \n\tif (tail === 0) {\n\t  result += map[(bits >> 18) & 0x3F];\n\t  result += map[(bits >> 12) & 0x3F];\n\t  result += map[(bits >> 6) & 0x3F];\n\t  result += map[bits & 0x3F];\n\t} else if (tail === 2) {\n\t  result += map[(bits >> 10) & 0x3F];\n\t  result += map[(bits >> 4) & 0x3F];\n\t  result += map[(bits << 2) & 0x3F];\n\t  result += map[64];\n\t} else if (tail === 1) {\n\t  result += map[(bits >> 2) & 0x3F];\n\t  result += map[(bits << 4) & 0x3F];\n\t  result += map[64];\n\t  result += map[64];\n\t}\n  \n\treturn result;\n  }\n  \n  function isBinary(obj) {\n\treturn Object.prototype.toString.call(obj) ===  '[object Uint8Array]';\n  }\n  \n  var binary = new type('tag:yaml.org,2002:binary', {\n\tkind: 'scalar',\n\tresolve: resolveYamlBinary,\n\tconstruct: constructYamlBinary,\n\tpredicate: isBinary,\n\trepresent: representYamlBinary\n  });\n  \n  var _hasOwnProperty$3 = Object.prototype.hasOwnProperty;\n  var _toString$2       = Object.prototype.toString;\n  \n  function resolveYamlOmap(data) {\n\tif (data === null) return true;\n  \n\tvar objectKeys = [], index, length, pair, pairKey, pairHasKey,\n\t\tobject = data;\n  \n\tfor (index = 0, length = object.length; index < length; index += 1) {\n\t  pair = object[index];\n\t  pairHasKey = false;\n  \n\t  if (_toString$2.call(pair) !== '[object Object]') return false;\n  \n\t  for (pairKey in pair) {\n\t\tif (_hasOwnProperty$3.call(pair, pairKey)) {\n\t\t  if (!pairHasKey) pairHasKey = true;\n\t\t  else return false;\n\t\t}\n\t  }\n  \n\t  if (!pairHasKey) return false;\n  \n\t  if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);\n\t  else return false;\n\t}\n  \n\treturn true;\n  }\n  \n  function constructYamlOmap(data) {\n\treturn data !== null ? data : [];\n  }\n  \n  var omap = new type('tag:yaml.org,2002:omap', {\n\tkind: 'sequence',\n\tresolve: resolveYamlOmap,\n\tconstruct: constructYamlOmap\n  });\n  \n  var _toString$1 = Object.prototype.toString;\n  \n  function resolveYamlPairs(data) {\n\tif (data === null) return true;\n  \n\tvar index, length, pair, keys, result,\n\t\tobject = data;\n  \n\tresult = new Array(object.length);\n  \n\tfor (index = 0, length = object.length; index < length; index += 1) {\n\t  pair = object[index];\n  \n\t  if (_toString$1.call(pair) !== '[object Object]') return false;\n  \n\t  keys = Object.keys(pair);\n  \n\t  if (keys.length !== 1) return false;\n  \n\t  result[index] = [ keys[0], pair[keys[0]] ];\n\t}\n  \n\treturn true;\n  }\n  \n  function constructYamlPairs(data) {\n\tif (data === null) return [];\n  \n\tvar index, length, pair, keys, result,\n\t\tobject = data;\n  \n\tresult = new Array(object.length);\n  \n\tfor (index = 0, length = object.length; index < length; index += 1) {\n\t  pair = object[index];\n  \n\t  keys = Object.keys(pair);\n  \n\t  result[index] = [ keys[0], pair[keys[0]] ];\n\t}\n  \n\treturn result;\n  }\n  \n  var pairs = new type('tag:yaml.org,2002:pairs', {\n\tkind: 'sequence',\n\tresolve: resolveYamlPairs,\n\tconstruct: constructYamlPairs\n  });\n  \n  var _hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n  \n  function resolveYamlSet(data) {\n\tif (data === null) return true;\n  \n\tvar key, object = data;\n  \n\tfor (key in object) {\n\t  if (_hasOwnProperty$2.call(object, key)) {\n\t\tif (object[key] !== null) return false;\n\t  }\n\t}\n  \n\treturn true;\n  }\n  \n  function constructYamlSet(data) {\n\treturn data !== null ? data : {};\n  }\n  \n  var set = new type('tag:yaml.org,2002:set', {\n\tkind: 'mapping',\n\tresolve: resolveYamlSet,\n\tconstruct: constructYamlSet\n  });\n  \n  var _default = core.extend({\n\timplicit: [\n\t  timestamp,\n\t  merge\n\t],\n\texplicit: [\n\t  binary,\n\t  omap,\n\t  pairs,\n\t  set\n\t]\n  });\n  \n  /*eslint-disable max-len,no-use-before-define*/\n  \n  \n  \n  \n  \n  \n  \n  var _hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n  \n  \n  var CONTEXT_FLOW_IN   = 1;\n  var CONTEXT_FLOW_OUT  = 2;\n  var CONTEXT_BLOCK_IN  = 3;\n  var CONTEXT_BLOCK_OUT = 4;\n  \n  \n  var CHOMPING_CLIP  = 1;\n  var CHOMPING_STRIP = 2;\n  var CHOMPING_KEEP  = 3;\n  \n  \n  var PATTERN_NON_PRINTABLE         = /[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x84\\x86-\\x9F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n  var PATTERN_NON_ASCII_LINE_BREAKS = /[\\x85\\u2028\\u2029]/;\n  var PATTERN_FLOW_INDICATORS       = /[,\\[\\]\\{\\}]/;\n  var PATTERN_TAG_HANDLE            = /^(?:!|!!|![a-z\\-]+!)$/i;\n  var PATTERN_TAG_URI               = /^(?:!|[^,\\[\\]\\{\\}])(?:%[0-9a-f]{2}|[0-9a-z\\-#;\\/\\?:@&=\\+\\$,_\\.!~\\*'\\(\\)\\[\\]])*$/i;\n  \n  \n  function _class(obj) { return Object.prototype.toString.call(obj); }\n  \n  function is_EOL(c) {\n\treturn (c === 0x0A/* LF */) || (c === 0x0D/* CR */);\n  }\n  \n  function is_WHITE_SPACE(c) {\n\treturn (c === 0x09/* Tab */) || (c === 0x20/* Space */);\n  }\n  \n  function is_WS_OR_EOL(c) {\n\treturn (c === 0x09/* Tab */) ||\n\t\t   (c === 0x20/* Space */) ||\n\t\t   (c === 0x0A/* LF */) ||\n\t\t   (c === 0x0D/* CR */);\n  }\n  \n  function is_FLOW_INDICATOR(c) {\n\treturn c === 0x2C/* , */ ||\n\t\t   c === 0x5B/* [ */ ||\n\t\t   c === 0x5D/* ] */ ||\n\t\t   c === 0x7B/* { */ ||\n\t\t   c === 0x7D/* } */;\n  }\n  \n  function fromHexCode(c) {\n\tvar lc;\n  \n\tif ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n\t  return c - 0x30;\n\t}\n  \n\t/*eslint-disable no-bitwise*/\n\tlc = c | 0x20;\n  \n\tif ((0x61/* a */ <= lc) && (lc <= 0x66/* f */)) {\n\t  return lc - 0x61 + 10;\n\t}\n  \n\treturn -1;\n  }\n  \n  function escapedHexLen(c) {\n\tif (c === 0x78/* x */) { return 2; }\n\tif (c === 0x75/* u */) { return 4; }\n\tif (c === 0x55/* U */) { return 8; }\n\treturn 0;\n  }\n  \n  function fromDecimalCode(c) {\n\tif ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n\t  return c - 0x30;\n\t}\n  \n\treturn -1;\n  }\n  \n  function simpleEscapeSequence(c) {\n\t/* eslint-disable indent */\n\treturn (c === 0x30/* 0 */) ? '\\x00' :\n\t\t  (c === 0x61/* a */) ? '\\x07' :\n\t\t  (c === 0x62/* b */) ? '\\x08' :\n\t\t  (c === 0x74/* t */) ? '\\x09' :\n\t\t  (c === 0x09/* Tab */) ? '\\x09' :\n\t\t  (c === 0x6E/* n */) ? '\\x0A' :\n\t\t  (c === 0x76/* v */) ? '\\x0B' :\n\t\t  (c === 0x66/* f */) ? '\\x0C' :\n\t\t  (c === 0x72/* r */) ? '\\x0D' :\n\t\t  (c === 0x65/* e */) ? '\\x1B' :\n\t\t  (c === 0x20/* Space */) ? ' ' :\n\t\t  (c === 0x22/* \" */) ? '\\x22' :\n\t\t  (c === 0x2F/* / */) ? '/' :\n\t\t  (c === 0x5C/* \\ */) ? '\\x5C' :\n\t\t  (c === 0x4E/* N */) ? '\\x85' :\n\t\t  (c === 0x5F/* _ */) ? '\\xA0' :\n\t\t  (c === 0x4C/* L */) ? '\\u2028' :\n\t\t  (c === 0x50/* P */) ? '\\u2029' : '';\n  }\n  \n  function charFromCodepoint(c) {\n\tif (c <= 0xFFFF) {\n\t  return String.fromCharCode(c);\n\t}\n\t// Encode UTF-16 surrogate pair\n\t// https://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B010000_to_U.2B10FFFF\n\treturn String.fromCharCode(\n\t  ((c - 0x010000) >> 10) + 0xD800,\n\t  ((c - 0x010000) & 0x03FF) + 0xDC00\n\t);\n  }\n  \n  var simpleEscapeCheck = new Array(256); // integer, for fast access\n  var simpleEscapeMap = new Array(256);\n  for (var i = 0; i < 256; i++) {\n\tsimpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;\n\tsimpleEscapeMap[i] = simpleEscapeSequence(i);\n  }\n  \n  \n  function State$1(input, options) {\n\tthis.input = input;\n  \n\tthis.filename  = options['filename']  || null;\n\tthis.schema    = options['schema']    || _default;\n\tthis.onWarning = options['onWarning'] || null;\n\t// (Hidden) Remove? makes the loader to expect YAML 1.1 documents\n\t// if such documents have no explicit %YAML directive\n\tthis.legacy    = options['legacy']    || false;\n  \n\tthis.json      = options['json']      || false;\n\tthis.listener  = options['listener']  || null;\n  \n\tthis.implicitTypes = this.schema.compiledImplicit;\n\tthis.typeMap       = this.schema.compiledTypeMap;\n  \n\tthis.length     = input.length;\n\tthis.position   = 0;\n\tthis.line       = 0;\n\tthis.lineStart  = 0;\n\tthis.lineIndent = 0;\n  \n\t// position of first leading tab in the current line,\n\t// used to make sure there are no tabs in the indentation\n\tthis.firstTabInLine = -1;\n  \n\tthis.documents = [];\n  \n\t/*\n\tthis.version;\n\tthis.checkLineBreaks;\n\tthis.tagMap;\n\tthis.anchorMap;\n\tthis.tag;\n\tthis.anchor;\n\tthis.kind;\n\tthis.result;*/\n  \n  }\n  \n  \n  function generateError(state, message) {\n\tvar mark = {\n\t  name:     state.filename,\n\t  buffer:   state.input.slice(0, -1), // omit trailing \\0\n\t  position: state.position,\n\t  line:     state.line,\n\t  column:   state.position - state.lineStart\n\t};\n  \n\tmark.snippet = snippet(mark);\n  \n\treturn new exception(message, mark);\n  }\n  \n  function throwError(state, message) {\n\tthrow generateError(state, message);\n  }\n  \n  function throwWarning(state, message) {\n\tif (state.onWarning) {\n\t  state.onWarning.call(null, generateError(state, message));\n\t}\n  }\n  \n  \n  var directiveHandlers = {\n  \n\tYAML: function handleYamlDirective(state, name, args) {\n  \n\t  var match, major, minor;\n  \n\t  if (state.version !== null) {\n\t\tthrowError(state, 'duplication of %YAML directive');\n\t  }\n  \n\t  if (args.length !== 1) {\n\t\tthrowError(state, 'YAML directive accepts exactly one argument');\n\t  }\n  \n\t  match = /^([0-9]+)\\.([0-9]+)$/.exec(args[0]);\n  \n\t  if (match === null) {\n\t\tthrowError(state, 'ill-formed argument of the YAML directive');\n\t  }\n  \n\t  major = parseInt(match[1], 10);\n\t  minor = parseInt(match[2], 10);\n  \n\t  if (major !== 1) {\n\t\tthrowError(state, 'unacceptable YAML version of the document');\n\t  }\n  \n\t  state.version = args[0];\n\t  state.checkLineBreaks = (minor < 2);\n  \n\t  if (minor !== 1 && minor !== 2) {\n\t\tthrowWarning(state, 'unsupported YAML version of the document');\n\t  }\n\t},\n  \n\tTAG: function handleTagDirective(state, name, args) {\n  \n\t  var handle, prefix;\n  \n\t  if (args.length !== 2) {\n\t\tthrowError(state, 'TAG directive accepts exactly two arguments');\n\t  }\n  \n\t  handle = args[0];\n\t  prefix = args[1];\n  \n\t  if (!PATTERN_TAG_HANDLE.test(handle)) {\n\t\tthrowError(state, 'ill-formed tag handle (first argument) of the TAG directive');\n\t  }\n  \n\t  if (_hasOwnProperty$1.call(state.tagMap, handle)) {\n\t\tthrowError(state, 'there is a previously declared suffix for \"' + handle + '\" tag handle');\n\t  }\n  \n\t  if (!PATTERN_TAG_URI.test(prefix)) {\n\t\tthrowError(state, 'ill-formed tag prefix (second argument) of the TAG directive');\n\t  }\n  \n\t  try {\n\t\tprefix = decodeURIComponent(prefix);\n\t  } catch (err) {\n\t\tthrowError(state, 'tag prefix is malformed: ' + prefix);\n\t  }\n  \n\t  state.tagMap[handle] = prefix;\n\t}\n  };\n  \n  \n  function captureSegment(state, start, end, checkJson) {\n\tvar _position, _length, _character, _result;\n  \n\tif (start < end) {\n\t  _result = state.input.slice(start, end);\n  \n\t  if (checkJson) {\n\t\tfor (_position = 0, _length = _result.length; _position < _length; _position += 1) {\n\t\t  _character = _result.charCodeAt(_position);\n\t\t  if (!(_character === 0x09 ||\n\t\t\t\t(0x20 <= _character && _character <= 0x10FFFF))) {\n\t\t\tthrowError(state, 'expected valid JSON character');\n\t\t  }\n\t\t}\n\t  } else if (PATTERN_NON_PRINTABLE.test(_result)) {\n\t\tthrowError(state, 'the stream contains non-printable characters');\n\t  }\n  \n\t  state.result += _result;\n\t}\n  }\n  \n  function mergeMappings(state, destination, source, overridableKeys) {\n\tvar sourceKeys, key, index, quantity;\n  \n\tif (!common.isObject(source)) {\n\t  throwError(state, 'cannot merge mappings; the provided source object is unacceptable');\n\t}\n  \n\tsourceKeys = Object.keys(source);\n  \n\tfor (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {\n\t  key = sourceKeys[index];\n  \n\t  if (!_hasOwnProperty$1.call(destination, key)) {\n\t\tdestination[key] = source[key];\n\t\toverridableKeys[key] = true;\n\t  }\n\t}\n  }\n  \n  function storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode,\n\tstartLine, startLineStart, startPos) {\n  \n\tvar index, quantity;\n  \n\t// The output is a plain object here, so keys can only be strings.\n\t// We need to convert keyNode to a string, but doing so can hang the process\n\t// (deeply nested arrays that explode exponentially using aliases).\n\tif (Array.isArray(keyNode)) {\n\t  keyNode = Array.prototype.slice.call(keyNode);\n  \n\t  for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {\n\t\tif (Array.isArray(keyNode[index])) {\n\t\t  throwError(state, 'nested arrays are not supported inside keys');\n\t\t}\n  \n\t\tif (typeof keyNode === 'object' && _class(keyNode[index]) === '[object Object]') {\n\t\t  keyNode[index] = '[object Object]';\n\t\t}\n\t  }\n\t}\n  \n\t// Avoid code execution in load() via toString property\n\t// (still use its own toString for arrays, timestamps,\n\t// and whatever user schema extensions happen to have @@toStringTag)\n\tif (typeof keyNode === 'object' && _class(keyNode) === '[object Object]') {\n\t  keyNode = '[object Object]';\n\t}\n  \n  \n\tkeyNode = String(keyNode);\n  \n\tif (_result === null) {\n\t  _result = {};\n\t}\n  \n\tif (keyTag === 'tag:yaml.org,2002:merge') {\n\t  if (Array.isArray(valueNode)) {\n\t\tfor (index = 0, quantity = valueNode.length; index < quantity; index += 1) {\n\t\t  mergeMappings(state, _result, valueNode[index], overridableKeys);\n\t\t}\n\t  } else {\n\t\tmergeMappings(state, _result, valueNode, overridableKeys);\n\t  }\n\t} else {\n\t  if (!state.json &&\n\t\t  !_hasOwnProperty$1.call(overridableKeys, keyNode) &&\n\t\t  _hasOwnProperty$1.call(_result, keyNode)) {\n\t\tstate.line = startLine || state.line;\n\t\tstate.lineStart = startLineStart || state.lineStart;\n\t\tstate.position = startPos || state.position;\n\t\tthrowError(state, 'duplicated mapping key');\n\t  }\n  \n\t  // used for this specific key only because Object.defineProperty is slow\n\t  if (keyNode === '__proto__') {\n\t\tObject.defineProperty(_result, keyNode, {\n\t\t  configurable: true,\n\t\t  enumerable: true,\n\t\t  writable: true,\n\t\t  value: valueNode\n\t\t});\n\t  } else {\n\t\t_result[keyNode] = valueNode;\n\t  }\n\t  delete overridableKeys[keyNode];\n\t}\n  \n\treturn _result;\n  }\n  \n  function readLineBreak(state) {\n\tvar ch;\n  \n\tch = state.input.charCodeAt(state.position);\n  \n\tif (ch === 0x0A/* LF */) {\n\t  state.position++;\n\t} else if (ch === 0x0D/* CR */) {\n\t  state.position++;\n\t  if (state.input.charCodeAt(state.position) === 0x0A/* LF */) {\n\t\tstate.position++;\n\t  }\n\t} else {\n\t  throwError(state, 'a line break is expected');\n\t}\n  \n\tstate.line += 1;\n\tstate.lineStart = state.position;\n\tstate.firstTabInLine = -1;\n  }\n  \n  function skipSeparationSpace(state, allowComments, checkIndent) {\n\tvar lineBreaks = 0,\n\t\tch = state.input.charCodeAt(state.position);\n  \n\twhile (ch !== 0) {\n\t  while (is_WHITE_SPACE(ch)) {\n\t\tif (ch === 0x09/* Tab */ && state.firstTabInLine === -1) {\n\t\t  state.firstTabInLine = state.position;\n\t\t}\n\t\tch = state.input.charCodeAt(++state.position);\n\t  }\n  \n\t  if (allowComments && ch === 0x23/* # */) {\n\t\tdo {\n\t\t  ch = state.input.charCodeAt(++state.position);\n\t\t} while (ch !== 0x0A/* LF */ && ch !== 0x0D/* CR */ && ch !== 0);\n\t  }\n  \n\t  if (is_EOL(ch)) {\n\t\treadLineBreak(state);\n  \n\t\tch = state.input.charCodeAt(state.position);\n\t\tlineBreaks++;\n\t\tstate.lineIndent = 0;\n  \n\t\twhile (ch === 0x20/* Space */) {\n\t\t  state.lineIndent++;\n\t\t  ch = state.input.charCodeAt(++state.position);\n\t\t}\n\t  } else {\n\t\tbreak;\n\t  }\n\t}\n  \n\tif (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {\n\t  throwWarning(state, 'deficient indentation');\n\t}\n  \n\treturn lineBreaks;\n  }\n  \n  function testDocumentSeparator(state) {\n\tvar _position = state.position,\n\t\tch;\n  \n\tch = state.input.charCodeAt(_position);\n  \n\t// Condition state.position === state.lineStart is tested\n\t// in parent on each call, for efficiency. No needs to test here again.\n\tif ((ch === 0x2D/* - */ || ch === 0x2E/* . */) &&\n\t\tch === state.input.charCodeAt(_position + 1) &&\n\t\tch === state.input.charCodeAt(_position + 2)) {\n  \n\t  _position += 3;\n  \n\t  ch = state.input.charCodeAt(_position);\n  \n\t  if (ch === 0 || is_WS_OR_EOL(ch)) {\n\t\treturn true;\n\t  }\n\t}\n  \n\treturn false;\n  }\n  \n  function writeFoldedLines(state, count) {\n\tif (count === 1) {\n\t  state.result += ' ';\n\t} else if (count > 1) {\n\t  state.result += common.repeat('\\n', count - 1);\n\t}\n  }\n  \n  \n  function readPlainScalar(state, nodeIndent, withinFlowCollection) {\n\tvar preceding,\n\t\tfollowing,\n\t\tcaptureStart,\n\t\tcaptureEnd,\n\t\thasPendingContent,\n\t\t_line,\n\t\t_lineStart,\n\t\t_lineIndent,\n\t\t_kind = state.kind,\n\t\t_result = state.result,\n\t\tch;\n  \n\tch = state.input.charCodeAt(state.position);\n  \n\tif (is_WS_OR_EOL(ch)      ||\n\t\tis_FLOW_INDICATOR(ch) ||\n\t\tch === 0x23/* # */    ||\n\t\tch === 0x26/* & */    ||\n\t\tch === 0x2A/* * */    ||\n\t\tch === 0x21/* ! */    ||\n\t\tch === 0x7C/* | */    ||\n\t\tch === 0x3E/* > */    ||\n\t\tch === 0x27/* ' */    ||\n\t\tch === 0x22/* \" */    ||\n\t\tch === 0x25/* % */    ||\n\t\tch === 0x40/* @ */    ||\n\t\tch === 0x60/* ` */) {\n\t  return false;\n\t}\n  \n\tif (ch === 0x3F/* ? */ || ch === 0x2D/* - */) {\n\t  following = state.input.charCodeAt(state.position + 1);\n  \n\t  if (is_WS_OR_EOL(following) ||\n\t\t  withinFlowCollection && is_FLOW_INDICATOR(following)) {\n\t\treturn false;\n\t  }\n\t}\n  \n\tstate.kind = 'scalar';\n\tstate.result = '';\n\tcaptureStart = captureEnd = state.position;\n\thasPendingContent = false;\n  \n\twhile (ch !== 0) {\n\t  if (ch === 0x3A/* : */) {\n\t\tfollowing = state.input.charCodeAt(state.position + 1);\n  \n\t\tif (is_WS_OR_EOL(following) ||\n\t\t\twithinFlowCollection && is_FLOW_INDICATOR(following)) {\n\t\t  break;\n\t\t}\n  \n\t  } else if (ch === 0x23/* # */) {\n\t\tpreceding = state.input.charCodeAt(state.position - 1);\n  \n\t\tif (is_WS_OR_EOL(preceding)) {\n\t\t  break;\n\t\t}\n  \n\t  } else if ((state.position === state.lineStart && testDocumentSeparator(state)) ||\n\t\t\t\t withinFlowCollection && is_FLOW_INDICATOR(ch)) {\n\t\tbreak;\n  \n\t  } else if (is_EOL(ch)) {\n\t\t_line = state.line;\n\t\t_lineStart = state.lineStart;\n\t\t_lineIndent = state.lineIndent;\n\t\tskipSeparationSpace(state, false, -1);\n  \n\t\tif (state.lineIndent >= nodeIndent) {\n\t\t  hasPendingContent = true;\n\t\t  ch = state.input.charCodeAt(state.position);\n\t\t  continue;\n\t\t} else {\n\t\t  state.position = captureEnd;\n\t\t  state.line = _line;\n\t\t  state.lineStart = _lineStart;\n\t\t  state.lineIndent = _lineIndent;\n\t\t  break;\n\t\t}\n\t  }\n  \n\t  if (hasPendingContent) {\n\t\tcaptureSegment(state, captureStart, captureEnd, false);\n\t\twriteFoldedLines(state, state.line - _line);\n\t\tcaptureStart = captureEnd = state.position;\n\t\thasPendingContent = false;\n\t  }\n  \n\t  if (!is_WHITE_SPACE(ch)) {\n\t\tcaptureEnd = state.position + 1;\n\t  }\n  \n\t  ch = state.input.charCodeAt(++state.position);\n\t}\n  \n\tcaptureSegment(state, captureStart, captureEnd, false);\n  \n\tif (state.result) {\n\t  return true;\n\t}\n  \n\tstate.kind = _kind;\n\tstate.result = _result;\n\treturn false;\n  }\n  \n  function readSingleQuotedScalar(state, nodeIndent) {\n\tvar ch,\n\t\tcaptureStart, captureEnd;\n  \n\tch = state.input.charCodeAt(state.position);\n  \n\tif (ch !== 0x27/* ' */) {\n\t  return false;\n\t}\n  \n\tstate.kind = 'scalar';\n\tstate.result = '';\n\tstate.position++;\n\tcaptureStart = captureEnd = state.position;\n  \n\twhile ((ch = state.input.charCodeAt(state.position)) !== 0) {\n\t  if (ch === 0x27/* ' */) {\n\t\tcaptureSegment(state, captureStart, state.position, true);\n\t\tch = state.input.charCodeAt(++state.position);\n  \n\t\tif (ch === 0x27/* ' */) {\n\t\t  captureStart = state.position;\n\t\t  state.position++;\n\t\t  captureEnd = state.position;\n\t\t} else {\n\t\t  return true;\n\t\t}\n  \n\t  } else if (is_EOL(ch)) {\n\t\tcaptureSegment(state, captureStart, captureEnd, true);\n\t\twriteFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n\t\tcaptureStart = captureEnd = state.position;\n  \n\t  } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n\t\tthrowError(state, 'unexpected end of the document within a single quoted scalar');\n  \n\t  } else {\n\t\tstate.position++;\n\t\tcaptureEnd = state.position;\n\t  }\n\t}\n  \n\tthrowError(state, 'unexpected end of the stream within a single quoted scalar');\n  }\n  \n  function readDoubleQuotedScalar(state, nodeIndent) {\n\tvar captureStart,\n\t\tcaptureEnd,\n\t\thexLength,\n\t\thexResult,\n\t\ttmp,\n\t\tch;\n  \n\tch = state.input.charCodeAt(state.position);\n  \n\tif (ch !== 0x22/* \" */) {\n\t  return false;\n\t}\n  \n\tstate.kind = 'scalar';\n\tstate.result = '';\n\tstate.position++;\n\tcaptureStart = captureEnd = state.position;\n  \n\twhile ((ch = state.input.charCodeAt(state.position)) !== 0) {\n\t  if (ch === 0x22/* \" */) {\n\t\tcaptureSegment(state, captureStart, state.position, true);\n\t\tstate.position++;\n\t\treturn true;\n  \n\t  } else if (ch === 0x5C/* \\ */) {\n\t\tcaptureSegment(state, captureStart, state.position, true);\n\t\tch = state.input.charCodeAt(++state.position);\n  \n\t\tif (is_EOL(ch)) {\n\t\t  skipSeparationSpace(state, false, nodeIndent);\n  \n\t\t  // TODO: rework to inline fn with no type cast?\n\t\t} else if (ch < 256 && simpleEscapeCheck[ch]) {\n\t\t  state.result += simpleEscapeMap[ch];\n\t\t  state.position++;\n  \n\t\t} else if ((tmp = escapedHexLen(ch)) > 0) {\n\t\t  hexLength = tmp;\n\t\t  hexResult = 0;\n  \n\t\t  for (; hexLength > 0; hexLength--) {\n\t\t\tch = state.input.charCodeAt(++state.position);\n  \n\t\t\tif ((tmp = fromHexCode(ch)) >= 0) {\n\t\t\t  hexResult = (hexResult << 4) + tmp;\n  \n\t\t\t} else {\n\t\t\t  throwError(state, 'expected hexadecimal character');\n\t\t\t}\n\t\t  }\n  \n\t\t  state.result += charFromCodepoint(hexResult);\n  \n\t\t  state.position++;\n  \n\t\t} else {\n\t\t  throwError(state, 'unknown escape sequence');\n\t\t}\n  \n\t\tcaptureStart = captureEnd = state.position;\n  \n\t  } else if (is_EOL(ch)) {\n\t\tcaptureSegment(state, captureStart, captureEnd, true);\n\t\twriteFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n\t\tcaptureStart = captureEnd = state.position;\n  \n\t  } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n\t\tthrowError(state, 'unexpected end of the document within a double quoted scalar');\n  \n\t  } else {\n\t\tstate.position++;\n\t\tcaptureEnd = state.position;\n\t  }\n\t}\n  \n\tthrowError(state, 'unexpected end of the stream within a double quoted scalar');\n  }\n  \n  function readFlowCollection(state, nodeIndent) {\n\tvar readNext = true,\n\t\t_line,\n\t\t_lineStart,\n\t\t_pos,\n\t\t_tag     = state.tag,\n\t\t_result,\n\t\t_anchor  = state.anchor,\n\t\tfollowing,\n\t\tterminator,\n\t\tisPair,\n\t\tisExplicitPair,\n\t\tisMapping,\n\t\toverridableKeys = Object.create(null),\n\t\tkeyNode,\n\t\tkeyTag,\n\t\tvalueNode,\n\t\tch;\n  \n\tch = state.input.charCodeAt(state.position);\n  \n\tif (ch === 0x5B/* [ */) {\n\t  terminator = 0x5D;/* ] */\n\t  isMapping = false;\n\t  _result = [];\n\t} else if (ch === 0x7B/* { */) {\n\t  terminator = 0x7D;/* } */\n\t  isMapping = true;\n\t  _result = {};\n\t} else {\n\t  return false;\n\t}\n  \n\tif (state.anchor !== null) {\n\t  state.anchorMap[state.anchor] = _result;\n\t}\n  \n\tch = state.input.charCodeAt(++state.position);\n  \n\twhile (ch !== 0) {\n\t  skipSeparationSpace(state, true, nodeIndent);\n  \n\t  ch = state.input.charCodeAt(state.position);\n  \n\t  if (ch === terminator) {\n\t\tstate.position++;\n\t\tstate.tag = _tag;\n\t\tstate.anchor = _anchor;\n\t\tstate.kind = isMapping ? 'mapping' : 'sequence';\n\t\tstate.result = _result;\n\t\treturn true;\n\t  } else if (!readNext) {\n\t\tthrowError(state, 'missed comma between flow collection entries');\n\t  } else if (ch === 0x2C/* , */) {\n\t\t// \"flow collection entries can never be completely empty\", as per YAML 1.2, section 7.4\n\t\tthrowError(state, \"expected the node content, but found ','\");\n\t  }\n  \n\t  keyTag = keyNode = valueNode = null;\n\t  isPair = isExplicitPair = false;\n  \n\t  if (ch === 0x3F/* ? */) {\n\t\tfollowing = state.input.charCodeAt(state.position + 1);\n  \n\t\tif (is_WS_OR_EOL(following)) {\n\t\t  isPair = isExplicitPair = true;\n\t\t  state.position++;\n\t\t  skipSeparationSpace(state, true, nodeIndent);\n\t\t}\n\t  }\n  \n\t  _line = state.line; // Save the current line.\n\t  _lineStart = state.lineStart;\n\t  _pos = state.position;\n\t  composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n\t  keyTag = state.tag;\n\t  keyNode = state.result;\n\t  skipSeparationSpace(state, true, nodeIndent);\n  \n\t  ch = state.input.charCodeAt(state.position);\n  \n\t  if ((isExplicitPair || state.line === _line) && ch === 0x3A/* : */) {\n\t\tisPair = true;\n\t\tch = state.input.charCodeAt(++state.position);\n\t\tskipSeparationSpace(state, true, nodeIndent);\n\t\tcomposeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n\t\tvalueNode = state.result;\n\t  }\n  \n\t  if (isMapping) {\n\t\tstoreMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos);\n\t  } else if (isPair) {\n\t\t_result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos));\n\t  } else {\n\t\t_result.push(keyNode);\n\t  }\n  \n\t  skipSeparationSpace(state, true, nodeIndent);\n  \n\t  ch = state.input.charCodeAt(state.position);\n  \n\t  if (ch === 0x2C/* , */) {\n\t\treadNext = true;\n\t\tch = state.input.charCodeAt(++state.position);\n\t  } else {\n\t\treadNext = false;\n\t  }\n\t}\n  \n\tthrowError(state, 'unexpected end of the stream within a flow collection');\n  }\n  \n  function readBlockScalar(state, nodeIndent) {\n\tvar captureStart,\n\t\tfolding,\n\t\tchomping       = CHOMPING_CLIP,\n\t\tdidReadContent = false,\n\t\tdetectedIndent = false,\n\t\ttextIndent     = nodeIndent,\n\t\temptyLines     = 0,\n\t\tatMoreIndented = false,\n\t\ttmp,\n\t\tch;\n  \n\tch = state.input.charCodeAt(state.position);\n  \n\tif (ch === 0x7C/* | */) {\n\t  folding = false;\n\t} else if (ch === 0x3E/* > */) {\n\t  folding = true;\n\t} else {\n\t  return false;\n\t}\n  \n\tstate.kind = 'scalar';\n\tstate.result = '';\n  \n\twhile (ch !== 0) {\n\t  ch = state.input.charCodeAt(++state.position);\n  \n\t  if (ch === 0x2B/* + */ || ch === 0x2D/* - */) {\n\t\tif (CHOMPING_CLIP === chomping) {\n\t\t  chomping = (ch === 0x2B/* + */) ? CHOMPING_KEEP : CHOMPING_STRIP;\n\t\t} else {\n\t\t  throwError(state, 'repeat of a chomping mode identifier');\n\t\t}\n  \n\t  } else if ((tmp = fromDecimalCode(ch)) >= 0) {\n\t\tif (tmp === 0) {\n\t\t  throwError(state, 'bad explicit indentation width of a block scalar; it cannot be less than one');\n\t\t} else if (!detectedIndent) {\n\t\t  textIndent = nodeIndent + tmp - 1;\n\t\t  detectedIndent = true;\n\t\t} else {\n\t\t  throwError(state, 'repeat of an indentation width identifier');\n\t\t}\n  \n\t  } else {\n\t\tbreak;\n\t  }\n\t}\n  \n\tif (is_WHITE_SPACE(ch)) {\n\t  do { ch = state.input.charCodeAt(++state.position); }\n\t  while (is_WHITE_SPACE(ch));\n  \n\t  if (ch === 0x23/* # */) {\n\t\tdo { ch = state.input.charCodeAt(++state.position); }\n\t\twhile (!is_EOL(ch) && (ch !== 0));\n\t  }\n\t}\n  \n\twhile (ch !== 0) {\n\t  readLineBreak(state);\n\t  state.lineIndent = 0;\n  \n\t  ch = state.input.charCodeAt(state.position);\n  \n\t  while ((!detectedIndent || state.lineIndent < textIndent) &&\n\t\t\t (ch === 0x20/* Space */)) {\n\t\tstate.lineIndent++;\n\t\tch = state.input.charCodeAt(++state.position);\n\t  }\n  \n\t  if (!detectedIndent && state.lineIndent > textIndent) {\n\t\ttextIndent = state.lineIndent;\n\t  }\n  \n\t  if (is_EOL(ch)) {\n\t\temptyLines++;\n\t\tcontinue;\n\t  }\n  \n\t  // End of the scalar.\n\t  if (state.lineIndent < textIndent) {\n  \n\t\t// Perform the chomping.\n\t\tif (chomping === CHOMPING_KEEP) {\n\t\t  state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n\t\t} else if (chomping === CHOMPING_CLIP) {\n\t\t  if (didReadContent) { // i.e. only if the scalar is not empty.\n\t\t\tstate.result += '\\n';\n\t\t  }\n\t\t}\n  \n\t\t// Break this `while` cycle and go to the funciton's epilogue.\n\t\tbreak;\n\t  }\n  \n\t  // Folded style: use fancy rules to handle line breaks.\n\t  if (folding) {\n  \n\t\t// Lines starting with white space characters (more-indented lines) are not folded.\n\t\tif (is_WHITE_SPACE(ch)) {\n\t\t  atMoreIndented = true;\n\t\t  // except for the first content line (cf. Example 8.1)\n\t\t  state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n  \n\t\t// End of more-indented block.\n\t\t} else if (atMoreIndented) {\n\t\t  atMoreIndented = false;\n\t\t  state.result += common.repeat('\\n', emptyLines + 1);\n  \n\t\t// Just one line break - perceive as the same line.\n\t\t} else if (emptyLines === 0) {\n\t\t  if (didReadContent) { // i.e. only if we have already read some scalar content.\n\t\t\tstate.result += ' ';\n\t\t  }\n  \n\t\t// Several line breaks - perceive as different lines.\n\t\t} else {\n\t\t  state.result += common.repeat('\\n', emptyLines);\n\t\t}\n  \n\t  // Literal style: just add exact number of line breaks between content lines.\n\t  } else {\n\t\t// Keep all line breaks except the header line break.\n\t\tstate.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n\t  }\n  \n\t  didReadContent = true;\n\t  detectedIndent = true;\n\t  emptyLines = 0;\n\t  captureStart = state.position;\n  \n\t  while (!is_EOL(ch) && (ch !== 0)) {\n\t\tch = state.input.charCodeAt(++state.position);\n\t  }\n  \n\t  captureSegment(state, captureStart, state.position, false);\n\t}\n  \n\treturn true;\n  }\n  \n  function readBlockSequence(state, nodeIndent) {\n\tvar _line,\n\t\t_tag      = state.tag,\n\t\t_anchor   = state.anchor,\n\t\t_result   = [],\n\t\tfollowing,\n\t\tdetected  = false,\n\t\tch;\n  \n\t// there is a leading tab before this token, so it can't be a block sequence/mapping;\n\t// it can still be flow sequence/mapping or a scalar\n\tif (state.firstTabInLine !== -1) return false;\n  \n\tif (state.anchor !== null) {\n\t  state.anchorMap[state.anchor] = _result;\n\t}\n  \n\tch = state.input.charCodeAt(state.position);\n  \n\twhile (ch !== 0) {\n\t  if (state.firstTabInLine !== -1) {\n\t\tstate.position = state.firstTabInLine;\n\t\tthrowError(state, 'tab characters must not be used in indentation');\n\t  }\n  \n\t  if (ch !== 0x2D/* - */) {\n\t\tbreak;\n\t  }\n  \n\t  following = state.input.charCodeAt(state.position + 1);\n  \n\t  if (!is_WS_OR_EOL(following)) {\n\t\tbreak;\n\t  }\n  \n\t  detected = true;\n\t  state.position++;\n  \n\t  if (skipSeparationSpace(state, true, -1)) {\n\t\tif (state.lineIndent <= nodeIndent) {\n\t\t  _result.push(null);\n\t\t  ch = state.input.charCodeAt(state.position);\n\t\t  continue;\n\t\t}\n\t  }\n  \n\t  _line = state.line;\n\t  composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);\n\t  _result.push(state.result);\n\t  skipSeparationSpace(state, true, -1);\n  \n\t  ch = state.input.charCodeAt(state.position);\n  \n\t  if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n\t\tthrowError(state, 'bad indentation of a sequence entry');\n\t  } else if (state.lineIndent < nodeIndent) {\n\t\tbreak;\n\t  }\n\t}\n  \n\tif (detected) {\n\t  state.tag = _tag;\n\t  state.anchor = _anchor;\n\t  state.kind = 'sequence';\n\t  state.result = _result;\n\t  return true;\n\t}\n\treturn false;\n  }\n  \n  function readBlockMapping(state, nodeIndent, flowIndent) {\n\tvar following,\n\t\tallowCompact,\n\t\t_line,\n\t\t_keyLine,\n\t\t_keyLineStart,\n\t\t_keyPos,\n\t\t_tag          = state.tag,\n\t\t_anchor       = state.anchor,\n\t\t_result       = {},\n\t\toverridableKeys = Object.create(null),\n\t\tkeyTag        = null,\n\t\tkeyNode       = null,\n\t\tvalueNode     = null,\n\t\tatExplicitKey = false,\n\t\tdetected      = false,\n\t\tch;\n  \n\t// there is a leading tab before this token, so it can't be a block sequence/mapping;\n\t// it can still be flow sequence/mapping or a scalar\n\tif (state.firstTabInLine !== -1) return false;\n  \n\tif (state.anchor !== null) {\n\t  state.anchorMap[state.anchor] = _result;\n\t}\n  \n\tch = state.input.charCodeAt(state.position);\n  \n\twhile (ch !== 0) {\n\t  if (!atExplicitKey && state.firstTabInLine !== -1) {\n\t\tstate.position = state.firstTabInLine;\n\t\tthrowError(state, 'tab characters must not be used in indentation');\n\t  }\n  \n\t  following = state.input.charCodeAt(state.position + 1);\n\t  _line = state.line; // Save the current line.\n  \n\t  //\n\t  // Explicit notation case. There are two separate blocks:\n\t  // first for the key (denoted by \"?\") and second for the value (denoted by \":\")\n\t  //\n\t  if ((ch === 0x3F/* ? */ || ch === 0x3A/* : */) && is_WS_OR_EOL(following)) {\n  \n\t\tif (ch === 0x3F/* ? */) {\n\t\t  if (atExplicitKey) {\n\t\t\tstoreMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n\t\t\tkeyTag = keyNode = valueNode = null;\n\t\t  }\n  \n\t\t  detected = true;\n\t\t  atExplicitKey = true;\n\t\t  allowCompact = true;\n  \n\t\t} else if (atExplicitKey) {\n\t\t  // i.e. 0x3A/* : */ === character after the explicit key.\n\t\t  atExplicitKey = false;\n\t\t  allowCompact = true;\n  \n\t\t} else {\n\t\t  throwError(state, 'incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line');\n\t\t}\n  \n\t\tstate.position += 1;\n\t\tch = following;\n  \n\t  //\n\t  // Implicit notation case. Flow-style node as the key first, then \":\", and the value.\n\t  //\n\t  } else {\n\t\t_keyLine = state.line;\n\t\t_keyLineStart = state.lineStart;\n\t\t_keyPos = state.position;\n  \n\t\tif (!composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {\n\t\t  // Neither implicit nor explicit notation.\n\t\t  // Reading is done. Go to the epilogue.\n\t\t  break;\n\t\t}\n  \n\t\tif (state.line === _line) {\n\t\t  ch = state.input.charCodeAt(state.position);\n  \n\t\t  while (is_WHITE_SPACE(ch)) {\n\t\t\tch = state.input.charCodeAt(++state.position);\n\t\t  }\n  \n\t\t  if (ch === 0x3A/* : */) {\n\t\t\tch = state.input.charCodeAt(++state.position);\n  \n\t\t\tif (!is_WS_OR_EOL(ch)) {\n\t\t\t  throwError(state, 'a whitespace character is expected after the key-value separator within a block mapping');\n\t\t\t}\n  \n\t\t\tif (atExplicitKey) {\n\t\t\t  storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n\t\t\t  keyTag = keyNode = valueNode = null;\n\t\t\t}\n  \n\t\t\tdetected = true;\n\t\t\tatExplicitKey = false;\n\t\t\tallowCompact = false;\n\t\t\tkeyTag = state.tag;\n\t\t\tkeyNode = state.result;\n  \n\t\t  } else if (detected) {\n\t\t\tthrowError(state, 'can not read an implicit mapping pair; a colon is missed');\n  \n\t\t  } else {\n\t\t\tstate.tag = _tag;\n\t\t\tstate.anchor = _anchor;\n\t\t\treturn true; // Keep the result of `composeNode`.\n\t\t  }\n  \n\t\t} else if (detected) {\n\t\t  throwError(state, 'can not read a block mapping entry; a multiline key may not be an implicit key');\n  \n\t\t} else {\n\t\t  state.tag = _tag;\n\t\t  state.anchor = _anchor;\n\t\t  return true; // Keep the result of `composeNode`.\n\t\t}\n\t  }\n  \n\t  //\n\t  // Common reading code for both explicit and implicit notations.\n\t  //\n\t  if (state.line === _line || state.lineIndent > nodeIndent) {\n\t\tif (atExplicitKey) {\n\t\t  _keyLine = state.line;\n\t\t  _keyLineStart = state.lineStart;\n\t\t  _keyPos = state.position;\n\t\t}\n  \n\t\tif (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {\n\t\t  if (atExplicitKey) {\n\t\t\tkeyNode = state.result;\n\t\t  } else {\n\t\t\tvalueNode = state.result;\n\t\t  }\n\t\t}\n  \n\t\tif (!atExplicitKey) {\n\t\t  storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _keyLine, _keyLineStart, _keyPos);\n\t\t  keyTag = keyNode = valueNode = null;\n\t\t}\n  \n\t\tskipSeparationSpace(state, true, -1);\n\t\tch = state.input.charCodeAt(state.position);\n\t  }\n  \n\t  if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n\t\tthrowError(state, 'bad indentation of a mapping entry');\n\t  } else if (state.lineIndent < nodeIndent) {\n\t\tbreak;\n\t  }\n\t}\n  \n\t//\n\t// Epilogue.\n\t//\n  \n\t// Special case: last mapping's node contains only the key in explicit notation.\n\tif (atExplicitKey) {\n\t  storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n\t}\n  \n\t// Expose the resulting mapping.\n\tif (detected) {\n\t  state.tag = _tag;\n\t  state.anchor = _anchor;\n\t  state.kind = 'mapping';\n\t  state.result = _result;\n\t}\n  \n\treturn detected;\n  }\n  \n  function readTagProperty(state) {\n\tvar _position,\n\t\tisVerbatim = false,\n\t\tisNamed    = false,\n\t\ttagHandle,\n\t\ttagName,\n\t\tch;\n  \n\tch = state.input.charCodeAt(state.position);\n  \n\tif (ch !== 0x21/* ! */) return false;\n  \n\tif (state.tag !== null) {\n\t  throwError(state, 'duplication of a tag property');\n\t}\n  \n\tch = state.input.charCodeAt(++state.position);\n  \n\tif (ch === 0x3C/* < */) {\n\t  isVerbatim = true;\n\t  ch = state.input.charCodeAt(++state.position);\n  \n\t} else if (ch === 0x21/* ! */) {\n\t  isNamed = true;\n\t  tagHandle = '!!';\n\t  ch = state.input.charCodeAt(++state.position);\n  \n\t} else {\n\t  tagHandle = '!';\n\t}\n  \n\t_position = state.position;\n  \n\tif (isVerbatim) {\n\t  do { ch = state.input.charCodeAt(++state.position); }\n\t  while (ch !== 0 && ch !== 0x3E/* > */);\n  \n\t  if (state.position < state.length) {\n\t\ttagName = state.input.slice(_position, state.position);\n\t\tch = state.input.charCodeAt(++state.position);\n\t  } else {\n\t\tthrowError(state, 'unexpected end of the stream within a verbatim tag');\n\t  }\n\t} else {\n\t  while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n  \n\t\tif (ch === 0x21/* ! */) {\n\t\t  if (!isNamed) {\n\t\t\ttagHandle = state.input.slice(_position - 1, state.position + 1);\n  \n\t\t\tif (!PATTERN_TAG_HANDLE.test(tagHandle)) {\n\t\t\t  throwError(state, 'named tag handle cannot contain such characters');\n\t\t\t}\n  \n\t\t\tisNamed = true;\n\t\t\t_position = state.position + 1;\n\t\t  } else {\n\t\t\tthrowError(state, 'tag suffix cannot contain exclamation marks');\n\t\t  }\n\t\t}\n  \n\t\tch = state.input.charCodeAt(++state.position);\n\t  }\n  \n\t  tagName = state.input.slice(_position, state.position);\n  \n\t  if (PATTERN_FLOW_INDICATORS.test(tagName)) {\n\t\tthrowError(state, 'tag suffix cannot contain flow indicator characters');\n\t  }\n\t}\n  \n\tif (tagName && !PATTERN_TAG_URI.test(tagName)) {\n\t  throwError(state, 'tag name cannot contain such characters: ' + tagName);\n\t}\n  \n\ttry {\n\t  tagName = decodeURIComponent(tagName);\n\t} catch (err) {\n\t  throwError(state, 'tag name is malformed: ' + tagName);\n\t}\n  \n\tif (isVerbatim) {\n\t  state.tag = tagName;\n  \n\t} else if (_hasOwnProperty$1.call(state.tagMap, tagHandle)) {\n\t  state.tag = state.tagMap[tagHandle] + tagName;\n  \n\t} else if (tagHandle === '!') {\n\t  state.tag = '!' + tagName;\n  \n\t} else if (tagHandle === '!!') {\n\t  state.tag = 'tag:yaml.org,2002:' + tagName;\n  \n\t} else {\n\t  throwError(state, 'undeclared tag handle \"' + tagHandle + '\"');\n\t}\n  \n\treturn true;\n  }\n  \n  function readAnchorProperty(state) {\n\tvar _position,\n\t\tch;\n  \n\tch = state.input.charCodeAt(state.position);\n  \n\tif (ch !== 0x26/* & */) return false;\n  \n\tif (state.anchor !== null) {\n\t  throwError(state, 'duplication of an anchor property');\n\t}\n  \n\tch = state.input.charCodeAt(++state.position);\n\t_position = state.position;\n  \n\twhile (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n\t  ch = state.input.charCodeAt(++state.position);\n\t}\n  \n\tif (state.position === _position) {\n\t  throwError(state, 'name of an anchor node must contain at least one character');\n\t}\n  \n\tstate.anchor = state.input.slice(_position, state.position);\n\treturn true;\n  }\n  \n  function readAlias(state) {\n\tvar _position, alias,\n\t\tch;\n  \n\tch = state.input.charCodeAt(state.position);\n  \n\tif (ch !== 0x2A/* * */) return false;\n  \n\tch = state.input.charCodeAt(++state.position);\n\t_position = state.position;\n  \n\twhile (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n\t  ch = state.input.charCodeAt(++state.position);\n\t}\n  \n\tif (state.position === _position) {\n\t  throwError(state, 'name of an alias node must contain at least one character');\n\t}\n  \n\talias = state.input.slice(_position, state.position);\n  \n\tif (!_hasOwnProperty$1.call(state.anchorMap, alias)) {\n\t  throwError(state, 'unidentified alias \"' + alias + '\"');\n\t}\n  \n\tstate.result = state.anchorMap[alias];\n\tskipSeparationSpace(state, true, -1);\n\treturn true;\n  }\n  \n  function composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {\n\tvar allowBlockStyles,\n\t\tallowBlockScalars,\n\t\tallowBlockCollections,\n\t\tindentStatus = 1, // 1: this>parent, 0: this=parent, -1: this<parent\n\t\tatNewLine  = false,\n\t\thasContent = false,\n\t\ttypeIndex,\n\t\ttypeQuantity,\n\t\ttypeList,\n\t\ttype,\n\t\tflowIndent,\n\t\tblockIndent;\n  \n\tif (state.listener !== null) {\n\t  state.listener('open', state);\n\t}\n  \n\tstate.tag    = null;\n\tstate.anchor = null;\n\tstate.kind   = null;\n\tstate.result = null;\n  \n\tallowBlockStyles = allowBlockScalars = allowBlockCollections =\n\t  CONTEXT_BLOCK_OUT === nodeContext ||\n\t  CONTEXT_BLOCK_IN  === nodeContext;\n  \n\tif (allowToSeek) {\n\t  if (skipSeparationSpace(state, true, -1)) {\n\t\tatNewLine = true;\n  \n\t\tif (state.lineIndent > parentIndent) {\n\t\t  indentStatus = 1;\n\t\t} else if (state.lineIndent === parentIndent) {\n\t\t  indentStatus = 0;\n\t\t} else if (state.lineIndent < parentIndent) {\n\t\t  indentStatus = -1;\n\t\t}\n\t  }\n\t}\n  \n\tif (indentStatus === 1) {\n\t  while (readTagProperty(state) || readAnchorProperty(state)) {\n\t\tif (skipSeparationSpace(state, true, -1)) {\n\t\t  atNewLine = true;\n\t\t  allowBlockCollections = allowBlockStyles;\n  \n\t\t  if (state.lineIndent > parentIndent) {\n\t\t\tindentStatus = 1;\n\t\t  } else if (state.lineIndent === parentIndent) {\n\t\t\tindentStatus = 0;\n\t\t  } else if (state.lineIndent < parentIndent) {\n\t\t\tindentStatus = -1;\n\t\t  }\n\t\t} else {\n\t\t  allowBlockCollections = false;\n\t\t}\n\t  }\n\t}\n  \n\tif (allowBlockCollections) {\n\t  allowBlockCollections = atNewLine || allowCompact;\n\t}\n  \n\tif (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {\n\t  if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {\n\t\tflowIndent = parentIndent;\n\t  } else {\n\t\tflowIndent = parentIndent + 1;\n\t  }\n  \n\t  blockIndent = state.position - state.lineStart;\n  \n\t  if (indentStatus === 1) {\n\t\tif (allowBlockCollections &&\n\t\t\t(readBlockSequence(state, blockIndent) ||\n\t\t\t readBlockMapping(state, blockIndent, flowIndent)) ||\n\t\t\treadFlowCollection(state, flowIndent)) {\n\t\t  hasContent = true;\n\t\t} else {\n\t\t  if ((allowBlockScalars && readBlockScalar(state, flowIndent)) ||\n\t\t\t  readSingleQuotedScalar(state, flowIndent) ||\n\t\t\t  readDoubleQuotedScalar(state, flowIndent)) {\n\t\t\thasContent = true;\n  \n\t\t  } else if (readAlias(state)) {\n\t\t\thasContent = true;\n  \n\t\t\tif (state.tag !== null || state.anchor !== null) {\n\t\t\t  throwError(state, 'alias node should not have any properties');\n\t\t\t}\n  \n\t\t  } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {\n\t\t\thasContent = true;\n  \n\t\t\tif (state.tag === null) {\n\t\t\t  state.tag = '?';\n\t\t\t}\n\t\t  }\n  \n\t\t  if (state.anchor !== null) {\n\t\t\tstate.anchorMap[state.anchor] = state.result;\n\t\t  }\n\t\t}\n\t  } else if (indentStatus === 0) {\n\t\t// Special case: block sequences are allowed to have same indentation level as the parent.\n\t\t// http://www.yaml.org/spec/1.2/spec.html#id2799784\n\t\thasContent = allowBlockCollections && readBlockSequence(state, blockIndent);\n\t  }\n\t}\n  \n\tif (state.tag === null) {\n\t  if (state.anchor !== null) {\n\t\tstate.anchorMap[state.anchor] = state.result;\n\t  }\n  \n\t} else if (state.tag === '?') {\n\t  // Implicit resolving is not allowed for non-scalar types, and '?'\n\t  // non-specific tag is only automatically assigned to plain scalars.\n\t  //\n\t  // We only need to check kind conformity in case user explicitly assigns '?'\n\t  // tag, for example like this: \"!<?> [0]\"\n\t  //\n\t  if (state.result !== null && state.kind !== 'scalar') {\n\t\tthrowError(state, 'unacceptable node kind for !<?> tag; it should be \"scalar\", not \"' + state.kind + '\"');\n\t  }\n  \n\t  for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {\n\t\ttype = state.implicitTypes[typeIndex];\n  \n\t\tif (type.resolve(state.result)) { // `state.result` updated in resolver if matched\n\t\t  state.result = type.construct(state.result);\n\t\t  state.tag = type.tag;\n\t\t  if (state.anchor !== null) {\n\t\t\tstate.anchorMap[state.anchor] = state.result;\n\t\t  }\n\t\t  break;\n\t\t}\n\t  }\n\t} else if (state.tag !== '!') {\n\t  if (_hasOwnProperty$1.call(state.typeMap[state.kind || 'fallback'], state.tag)) {\n\t\ttype = state.typeMap[state.kind || 'fallback'][state.tag];\n\t  } else {\n\t\t// looking for multi type\n\t\ttype = null;\n\t\ttypeList = state.typeMap.multi[state.kind || 'fallback'];\n  \n\t\tfor (typeIndex = 0, typeQuantity = typeList.length; typeIndex < typeQuantity; typeIndex += 1) {\n\t\t  if (state.tag.slice(0, typeList[typeIndex].tag.length) === typeList[typeIndex].tag) {\n\t\t\ttype = typeList[typeIndex];\n\t\t\tbreak;\n\t\t  }\n\t\t}\n\t  }\n  \n\t  if (!type) {\n\t\tthrowError(state, 'unknown tag !<' + state.tag + '>');\n\t  }\n  \n\t  if (state.result !== null && type.kind !== state.kind) {\n\t\tthrowError(state, 'unacceptable node kind for !<' + state.tag + '> tag; it should be \"' + type.kind + '\", not \"' + state.kind + '\"');\n\t  }\n  \n\t  if (!type.resolve(state.result, state.tag)) { // `state.result` updated in resolver if matched\n\t\tthrowError(state, 'cannot resolve a node with !<' + state.tag + '> explicit tag');\n\t  } else {\n\t\tstate.result = type.construct(state.result, state.tag);\n\t\tif (state.anchor !== null) {\n\t\t  state.anchorMap[state.anchor] = state.result;\n\t\t}\n\t  }\n\t}\n  \n\tif (state.listener !== null) {\n\t  state.listener('close', state);\n\t}\n\treturn state.tag !== null ||  state.anchor !== null || hasContent;\n  }\n  \n  function readDocument(state) {\n\tvar documentStart = state.position,\n\t\t_position,\n\t\tdirectiveName,\n\t\tdirectiveArgs,\n\t\thasDirectives = false,\n\t\tch;\n  \n\tstate.version = null;\n\tstate.checkLineBreaks = state.legacy;\n\tstate.tagMap = Object.create(null);\n\tstate.anchorMap = Object.create(null);\n  \n\twhile ((ch = state.input.charCodeAt(state.position)) !== 0) {\n\t  skipSeparationSpace(state, true, -1);\n  \n\t  ch = state.input.charCodeAt(state.position);\n  \n\t  if (state.lineIndent > 0 || ch !== 0x25/* % */) {\n\t\tbreak;\n\t  }\n  \n\t  hasDirectives = true;\n\t  ch = state.input.charCodeAt(++state.position);\n\t  _position = state.position;\n  \n\t  while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n\t\tch = state.input.charCodeAt(++state.position);\n\t  }\n  \n\t  directiveName = state.input.slice(_position, state.position);\n\t  directiveArgs = [];\n  \n\t  if (directiveName.length < 1) {\n\t\tthrowError(state, 'directive name must not be less than one character in length');\n\t  }\n  \n\t  while (ch !== 0) {\n\t\twhile (is_WHITE_SPACE(ch)) {\n\t\t  ch = state.input.charCodeAt(++state.position);\n\t\t}\n  \n\t\tif (ch === 0x23/* # */) {\n\t\t  do { ch = state.input.charCodeAt(++state.position); }\n\t\t  while (ch !== 0 && !is_EOL(ch));\n\t\t  break;\n\t\t}\n  \n\t\tif (is_EOL(ch)) break;\n  \n\t\t_position = state.position;\n  \n\t\twhile (ch !== 0 && !is_WS_OR_EOL(ch)) {\n\t\t  ch = state.input.charCodeAt(++state.position);\n\t\t}\n  \n\t\tdirectiveArgs.push(state.input.slice(_position, state.position));\n\t  }\n  \n\t  if (ch !== 0) readLineBreak(state);\n  \n\t  if (_hasOwnProperty$1.call(directiveHandlers, directiveName)) {\n\t\tdirectiveHandlers[directiveName](state, directiveName, directiveArgs);\n\t  } else {\n\t\tthrowWarning(state, 'unknown document directive \"' + directiveName + '\"');\n\t  }\n\t}\n  \n\tskipSeparationSpace(state, true, -1);\n  \n\tif (state.lineIndent === 0 &&\n\t\tstate.input.charCodeAt(state.position)     === 0x2D/* - */ &&\n\t\tstate.input.charCodeAt(state.position + 1) === 0x2D/* - */ &&\n\t\tstate.input.charCodeAt(state.position + 2) === 0x2D/* - */) {\n\t  state.position += 3;\n\t  skipSeparationSpace(state, true, -1);\n  \n\t} else if (hasDirectives) {\n\t  throwError(state, 'directives end mark is expected');\n\t}\n  \n\tcomposeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);\n\tskipSeparationSpace(state, true, -1);\n  \n\tif (state.checkLineBreaks &&\n\t\tPATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {\n\t  throwWarning(state, 'non-ASCII line breaks are interpreted as content');\n\t}\n  \n\tstate.documents.push(state.result);\n  \n\tif (state.position === state.lineStart && testDocumentSeparator(state)) {\n  \n\t  if (state.input.charCodeAt(state.position) === 0x2E/* . */) {\n\t\tstate.position += 3;\n\t\tskipSeparationSpace(state, true, -1);\n\t  }\n\t  return;\n\t}\n  \n\tif (state.position < (state.length - 1)) {\n\t  throwError(state, 'end of the stream or a document separator is expected');\n\t} else {\n\t  return;\n\t}\n  }\n  \n  \n  function loadDocuments(input, options) {\n\tinput = String(input);\n\toptions = options || {};\n  \n\tif (input.length !== 0) {\n  \n\t  // Add tailing `\\n` if not exists\n\t  if (input.charCodeAt(input.length - 1) !== 0x0A/* LF */ &&\n\t\t  input.charCodeAt(input.length - 1) !== 0x0D/* CR */) {\n\t\tinput += '\\n';\n\t  }\n  \n\t  // Strip BOM\n\t  if (input.charCodeAt(0) === 0xFEFF) {\n\t\tinput = input.slice(1);\n\t  }\n\t}\n  \n\tvar state = new State$1(input, options);\n  \n\tvar nullpos = input.indexOf('\\0');\n  \n\tif (nullpos !== -1) {\n\t  state.position = nullpos;\n\t  throwError(state, 'null byte is not allowed in input');\n\t}\n  \n\t// Use 0 as string terminator. That significantly simplifies bounds check.\n\tstate.input += '\\0';\n  \n\twhile (state.input.charCodeAt(state.position) === 0x20/* Space */) {\n\t  state.lineIndent += 1;\n\t  state.position += 1;\n\t}\n  \n\twhile (state.position < (state.length - 1)) {\n\t  readDocument(state);\n\t}\n  \n\treturn state.documents;\n  }\n  \n  \n  function loadAll$1(input, iterator, options) {\n\tif (iterator !== null && typeof iterator === 'object' && typeof options === 'undefined') {\n\t  options = iterator;\n\t  iterator = null;\n\t}\n  \n\tvar documents = loadDocuments(input, options);\n  \n\tif (typeof iterator !== 'function') {\n\t  return documents;\n\t}\n  \n\tfor (var index = 0, length = documents.length; index < length; index += 1) {\n\t  iterator(documents[index]);\n\t}\n  }\n  \n  \n  function load$1(input, options) {\n\tvar documents = loadDocuments(input, options);\n  \n\tif (documents.length === 0) {\n\t  /*eslint-disable no-undefined*/\n\t  return undefined;\n\t} else if (documents.length === 1) {\n\t  return documents[0];\n\t}\n\tthrow new exception('expected a single document in the stream, but found more');\n  }\n  \n  \n  var loadAll_1 = loadAll$1;\n  var load_1    = load$1;\n  \n  var loader = {\n\t  loadAll: loadAll_1,\n\t  load: load_1\n  };\n  \n  /*eslint-disable no-use-before-define*/\n  \n  \n  \n  \n  \n  var _toString       = Object.prototype.toString;\n  var _hasOwnProperty = Object.prototype.hasOwnProperty;\n  \n  var CHAR_BOM                  = 0xFEFF;\n  var CHAR_TAB                  = 0x09; /* Tab */\n  var CHAR_LINE_FEED            = 0x0A; /* LF */\n  var CHAR_CARRIAGE_RETURN      = 0x0D; /* CR */\n  var CHAR_SPACE                = 0x20; /* Space */\n  var CHAR_EXCLAMATION          = 0x21; /* ! */\n  var CHAR_DOUBLE_QUOTE         = 0x22; /* \" */\n  var CHAR_SHARP                = 0x23; /* # */\n  var CHAR_PERCENT              = 0x25; /* % */\n  var CHAR_AMPERSAND            = 0x26; /* & */\n  var CHAR_SINGLE_QUOTE         = 0x27; /* ' */\n  var CHAR_ASTERISK             = 0x2A; /* * */\n  var CHAR_COMMA                = 0x2C; /* , */\n  var CHAR_MINUS                = 0x2D; /* - */\n  var CHAR_COLON                = 0x3A; /* : */\n  var CHAR_EQUALS               = 0x3D; /* = */\n  var CHAR_GREATER_THAN         = 0x3E; /* > */\n  var CHAR_QUESTION             = 0x3F; /* ? */\n  var CHAR_COMMERCIAL_AT        = 0x40; /* @ */\n  var CHAR_LEFT_SQUARE_BRACKET  = 0x5B; /* [ */\n  var CHAR_RIGHT_SQUARE_BRACKET = 0x5D; /* ] */\n  var CHAR_GRAVE_ACCENT         = 0x60; /* ` */\n  var CHAR_LEFT_CURLY_BRACKET   = 0x7B; /* { */\n  var CHAR_VERTICAL_LINE        = 0x7C; /* | */\n  var CHAR_RIGHT_CURLY_BRACKET  = 0x7D; /* } */\n  \n  var ESCAPE_SEQUENCES = {};\n  \n  ESCAPE_SEQUENCES[0x00]   = '\\\\0';\n  ESCAPE_SEQUENCES[0x07]   = '\\\\a';\n  ESCAPE_SEQUENCES[0x08]   = '\\\\b';\n  ESCAPE_SEQUENCES[0x09]   = '\\\\t';\n  ESCAPE_SEQUENCES[0x0A]   = '\\\\n';\n  ESCAPE_SEQUENCES[0x0B]   = '\\\\v';\n  ESCAPE_SEQUENCES[0x0C]   = '\\\\f';\n  ESCAPE_SEQUENCES[0x0D]   = '\\\\r';\n  ESCAPE_SEQUENCES[0x1B]   = '\\\\e';\n  ESCAPE_SEQUENCES[0x22]   = '\\\\\"';\n  ESCAPE_SEQUENCES[0x5C]   = '\\\\\\\\';\n  ESCAPE_SEQUENCES[0x85]   = '\\\\N';\n  ESCAPE_SEQUENCES[0xA0]   = '\\\\_';\n  ESCAPE_SEQUENCES[0x2028] = '\\\\L';\n  ESCAPE_SEQUENCES[0x2029] = '\\\\P';\n  \n  var DEPRECATED_BOOLEANS_SYNTAX = [\n\t'y', 'Y', 'yes', 'Yes', 'YES', 'on', 'On', 'ON',\n\t'n', 'N', 'no', 'No', 'NO', 'off', 'Off', 'OFF'\n  ];\n  \n  var DEPRECATED_BASE60_SYNTAX = /^[-+]?[0-9_]+(?::[0-9_]+)+(?:\\.[0-9_]*)?$/;\n  \n  function compileStyleMap(schema, map) {\n\tvar result, keys, index, length, tag, style, type;\n  \n\tif (map === null) return {};\n  \n\tresult = {};\n\tkeys = Object.keys(map);\n  \n\tfor (index = 0, length = keys.length; index < length; index += 1) {\n\t  tag = keys[index];\n\t  style = String(map[tag]);\n  \n\t  if (tag.slice(0, 2) === '!!') {\n\t\ttag = 'tag:yaml.org,2002:' + tag.slice(2);\n\t  }\n\t  type = schema.compiledTypeMap['fallback'][tag];\n  \n\t  if (type && _hasOwnProperty.call(type.styleAliases, style)) {\n\t\tstyle = type.styleAliases[style];\n\t  }\n  \n\t  result[tag] = style;\n\t}\n  \n\treturn result;\n  }\n  \n  function encodeHex(character) {\n\tvar string, handle, length;\n  \n\tstring = character.toString(16).toUpperCase();\n  \n\tif (character <= 0xFF) {\n\t  handle = 'x';\n\t  length = 2;\n\t} else if (character <= 0xFFFF) {\n\t  handle = 'u';\n\t  length = 4;\n\t} else if (character <= 0xFFFFFFFF) {\n\t  handle = 'U';\n\t  length = 8;\n\t} else {\n\t  throw new exception('code point within a string may not be greater than 0xFFFFFFFF');\n\t}\n  \n\treturn '\\\\' + handle + common.repeat('0', length - string.length) + string;\n  }\n  \n  \n  var QUOTING_TYPE_SINGLE = 1,\n\t  QUOTING_TYPE_DOUBLE = 2;\n  \n  function State(options) {\n\tthis.schema        = options['schema'] || _default;\n\tthis.indent        = Math.max(1, (options['indent'] || 2));\n\tthis.noArrayIndent = options['noArrayIndent'] || false;\n\tthis.skipInvalid   = options['skipInvalid'] || false;\n\tthis.flowLevel     = (common.isNothing(options['flowLevel']) ? -1 : options['flowLevel']);\n\tthis.styleMap      = compileStyleMap(this.schema, options['styles'] || null);\n\tthis.sortKeys      = options['sortKeys'] || false;\n\tthis.lineWidth     = options['lineWidth'] || 80;\n\tthis.noRefs        = options['noRefs'] || false;\n\tthis.noCompatMode  = options['noCompatMode'] || false;\n\tthis.condenseFlow  = options['condenseFlow'] || false;\n\tthis.quotingType   = options['quotingType'] === '\"' ? QUOTING_TYPE_DOUBLE : QUOTING_TYPE_SINGLE;\n\tthis.forceQuotes   = options['forceQuotes'] || false;\n\tthis.replacer      = typeof options['replacer'] === 'function' ? options['replacer'] : null;\n  \n\tthis.implicitTypes = this.schema.compiledImplicit;\n\tthis.explicitTypes = this.schema.compiledExplicit;\n  \n\tthis.tag = null;\n\tthis.result = '';\n  \n\tthis.duplicates = [];\n\tthis.usedDuplicates = null;\n  }\n  \n  // Indents every line in a string. Empty lines (\\n only) are not indented.\n  function indentString(string, spaces) {\n\tvar ind = common.repeat(' ', spaces),\n\t\tposition = 0,\n\t\tnext = -1,\n\t\tresult = '',\n\t\tline,\n\t\tlength = string.length;\n  \n\twhile (position < length) {\n\t  next = string.indexOf('\\n', position);\n\t  if (next === -1) {\n\t\tline = string.slice(position);\n\t\tposition = length;\n\t  } else {\n\t\tline = string.slice(position, next + 1);\n\t\tposition = next + 1;\n\t  }\n  \n\t  if (line.length && line !== '\\n') result += ind;\n  \n\t  result += line;\n\t}\n  \n\treturn result;\n  }\n  \n  function generateNextLine(state, level) {\n\treturn '\\n' + common.repeat(' ', state.indent * level);\n  }\n  \n  function testImplicitResolving(state, str) {\n\tvar index, length, type;\n  \n\tfor (index = 0, length = state.implicitTypes.length; index < length; index += 1) {\n\t  type = state.implicitTypes[index];\n  \n\t  if (type.resolve(str)) {\n\t\treturn true;\n\t  }\n\t}\n  \n\treturn false;\n  }\n  \n  // [33] s-white ::= s-space | s-tab\n  function isWhitespace(c) {\n\treturn c === CHAR_SPACE || c === CHAR_TAB;\n  }\n  \n  // Returns true if the character can be printed without escaping.\n  // From YAML 1.2: \"any allowed characters known to be non-printable\n  // should also be escaped. [However,] This isn’t mandatory\"\n  // Derived from nb-char - \\t - #x85 - #xA0 - #x2028 - #x2029.\n  function isPrintable(c) {\n\treturn  (0x00020 <= c && c <= 0x00007E)\n\t\t|| ((0x000A1 <= c && c <= 0x00D7FF) && c !== 0x2028 && c !== 0x2029)\n\t\t|| ((0x0E000 <= c && c <= 0x00FFFD) && c !== CHAR_BOM)\n\t\t||  (0x10000 <= c && c <= 0x10FFFF);\n  }\n  \n  // [34] ns-char ::= nb-char - s-white\n  // [27] nb-char ::= c-printable - b-char - c-byte-order-mark\n  // [26] b-char  ::= b-line-feed | b-carriage-return\n  // Including s-white (for some reason, examples doesn't match specs in this aspect)\n  // ns-char ::= c-printable - b-line-feed - b-carriage-return - c-byte-order-mark\n  function isNsCharOrWhitespace(c) {\n\treturn isPrintable(c)\n\t  && c !== CHAR_BOM\n\t  // - b-char\n\t  && c !== CHAR_CARRIAGE_RETURN\n\t  && c !== CHAR_LINE_FEED;\n  }\n  \n  // [127]  ns-plain-safe(c) ::= c = flow-out  ⇒ ns-plain-safe-out\n  //                             c = flow-in   ⇒ ns-plain-safe-in\n  //                             c = block-key ⇒ ns-plain-safe-out\n  //                             c = flow-key  ⇒ ns-plain-safe-in\n  // [128] ns-plain-safe-out ::= ns-char\n  // [129]  ns-plain-safe-in ::= ns-char - c-flow-indicator\n  // [130]  ns-plain-char(c) ::=  ( ns-plain-safe(c) - “:” - “#” )\n  //                            | ( /* An ns-char preceding */ “#” )\n  //                            | ( “:” /* Followed by an ns-plain-safe(c) */ )\n  function isPlainSafe(c, prev, inblock) {\n\tvar cIsNsCharOrWhitespace = isNsCharOrWhitespace(c);\n\tvar cIsNsChar = cIsNsCharOrWhitespace && !isWhitespace(c);\n\treturn (\n\t  // ns-plain-safe\n\t  inblock ? // c = flow-in\n\t\tcIsNsCharOrWhitespace\n\t\t: cIsNsCharOrWhitespace\n\t\t  // - c-flow-indicator\n\t\t  && c !== CHAR_COMMA\n\t\t  && c !== CHAR_LEFT_SQUARE_BRACKET\n\t\t  && c !== CHAR_RIGHT_SQUARE_BRACKET\n\t\t  && c !== CHAR_LEFT_CURLY_BRACKET\n\t\t  && c !== CHAR_RIGHT_CURLY_BRACKET\n\t)\n\t  // ns-plain-char\n\t  && c !== CHAR_SHARP // false on '#'\n\t  && !(prev === CHAR_COLON && !cIsNsChar) // false on ': '\n\t  || (isNsCharOrWhitespace(prev) && !isWhitespace(prev) && c === CHAR_SHARP) // change to true on '[^ ]#'\n\t  || (prev === CHAR_COLON && cIsNsChar); // change to true on ':[^ ]'\n  }\n  \n  // Simplified test for values allowed as the first character in plain style.\n  function isPlainSafeFirst(c) {\n\t// Uses a subset of ns-char - c-indicator\n\t// where ns-char = nb-char - s-white.\n\t// No support of ( ( “?” | “:” | “-” ) /* Followed by an ns-plain-safe(c)) */ ) part\n\treturn isPrintable(c) && c !== CHAR_BOM\n\t  && !isWhitespace(c) // - s-white\n\t  // - (c-indicator ::=\n\t  // “-” | “?” | “:” | “,” | “[” | “]” | “{” | “}”\n\t  && c !== CHAR_MINUS\n\t  && c !== CHAR_QUESTION\n\t  && c !== CHAR_COLON\n\t  && c !== CHAR_COMMA\n\t  && c !== CHAR_LEFT_SQUARE_BRACKET\n\t  && c !== CHAR_RIGHT_SQUARE_BRACKET\n\t  && c !== CHAR_LEFT_CURLY_BRACKET\n\t  && c !== CHAR_RIGHT_CURLY_BRACKET\n\t  // | “#” | “&” | “*” | “!” | “|” | “=” | “>” | “'” | “\"”\n\t  && c !== CHAR_SHARP\n\t  && c !== CHAR_AMPERSAND\n\t  && c !== CHAR_ASTERISK\n\t  && c !== CHAR_EXCLAMATION\n\t  && c !== CHAR_VERTICAL_LINE\n\t  && c !== CHAR_EQUALS\n\t  && c !== CHAR_GREATER_THAN\n\t  && c !== CHAR_SINGLE_QUOTE\n\t  && c !== CHAR_DOUBLE_QUOTE\n\t  // | “%” | “@” | “`”)\n\t  && c !== CHAR_PERCENT\n\t  && c !== CHAR_COMMERCIAL_AT\n\t  && c !== CHAR_GRAVE_ACCENT;\n  }\n  \n  // Simplified test for values allowed as the last character in plain style.\n  function isPlainSafeLast(c) {\n\t// just not whitespace or colon, it will be checked to be plain character later\n\treturn !isWhitespace(c) && c !== CHAR_COLON;\n  }\n  \n  // Same as 'string'.codePointAt(pos), but works in older browsers.\n  function codePointAt(string, pos) {\n\tvar first = string.charCodeAt(pos), second;\n\tif (first >= 0xD800 && first <= 0xDBFF && pos + 1 < string.length) {\n\t  second = string.charCodeAt(pos + 1);\n\t  if (second >= 0xDC00 && second <= 0xDFFF) {\n\t\t// https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n\t\treturn (first - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n\t  }\n\t}\n\treturn first;\n  }\n  \n  // Determines whether block indentation indicator is required.\n  function needIndentIndicator(string) {\n\tvar leadingSpaceRe = /^\\n* /;\n\treturn leadingSpaceRe.test(string);\n  }\n  \n  var STYLE_PLAIN   = 1,\n\t  STYLE_SINGLE  = 2,\n\t  STYLE_LITERAL = 3,\n\t  STYLE_FOLDED  = 4,\n\t  STYLE_DOUBLE  = 5;\n  \n  // Determines which scalar styles are possible and returns the preferred style.\n  // lineWidth = -1 => no limit.\n  // Pre-conditions: str.length > 0.\n  // Post-conditions:\n  //    STYLE_PLAIN or STYLE_SINGLE => no \\n are in the string.\n  //    STYLE_LITERAL => no lines are suitable for folding (or lineWidth is -1).\n  //    STYLE_FOLDED => a line > lineWidth and can be folded (and lineWidth != -1).\n  function chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth,\n\ttestAmbiguousType, quotingType, forceQuotes, inblock) {\n  \n\tvar i;\n\tvar char = 0;\n\tvar prevChar = null;\n\tvar hasLineBreak = false;\n\tvar hasFoldableLine = false; // only checked if shouldTrackWidth\n\tvar shouldTrackWidth = lineWidth !== -1;\n\tvar previousLineBreak = -1; // count the first line correctly\n\tvar plain = isPlainSafeFirst(codePointAt(string, 0))\n\t\t\t&& isPlainSafeLast(codePointAt(string, string.length - 1));\n  \n\tif (singleLineOnly || forceQuotes) {\n\t  // Case: no block styles.\n\t  // Check for disallowed characters to rule out plain and single.\n\t  for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n\t\tchar = codePointAt(string, i);\n\t\tif (!isPrintable(char)) {\n\t\t  return STYLE_DOUBLE;\n\t\t}\n\t\tplain = plain && isPlainSafe(char, prevChar, inblock);\n\t\tprevChar = char;\n\t  }\n\t} else {\n\t  // Case: block styles permitted.\n\t  for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n\t\tchar = codePointAt(string, i);\n\t\tif (char === CHAR_LINE_FEED) {\n\t\t  hasLineBreak = true;\n\t\t  // Check if any line can be folded.\n\t\t  if (shouldTrackWidth) {\n\t\t\thasFoldableLine = hasFoldableLine ||\n\t\t\t  // Foldable line = too long, and not more-indented.\n\t\t\t  (i - previousLineBreak - 1 > lineWidth &&\n\t\t\t   string[previousLineBreak + 1] !== ' ');\n\t\t\tpreviousLineBreak = i;\n\t\t  }\n\t\t} else if (!isPrintable(char)) {\n\t\t  return STYLE_DOUBLE;\n\t\t}\n\t\tplain = plain && isPlainSafe(char, prevChar, inblock);\n\t\tprevChar = char;\n\t  }\n\t  // in case the end is missing a \\n\n\t  hasFoldableLine = hasFoldableLine || (shouldTrackWidth &&\n\t\t(i - previousLineBreak - 1 > lineWidth &&\n\t\t string[previousLineBreak + 1] !== ' '));\n\t}\n\t// Although every style can represent \\n without escaping, prefer block styles\n\t// for multiline, since they're more readable and they don't add empty lines.\n\t// Also prefer folding a super-long line.\n\tif (!hasLineBreak && !hasFoldableLine) {\n\t  // Strings interpretable as another type have to be quoted;\n\t  // e.g. the string 'true' vs. the boolean true.\n\t  if (plain && !forceQuotes && !testAmbiguousType(string)) {\n\t\treturn STYLE_PLAIN;\n\t  }\n\t  return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n\t}\n\t// Edge case: block indentation indicator can only have one digit.\n\tif (indentPerLevel > 9 && needIndentIndicator(string)) {\n\t  return STYLE_DOUBLE;\n\t}\n\t// At this point we know block styles are valid.\n\t// Prefer literal style unless we want to fold.\n\tif (!forceQuotes) {\n\t  return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;\n\t}\n\treturn quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n  }\n  \n  // Note: line breaking/folding is implemented for only the folded style.\n  // NB. We drop the last trailing newline (if any) of a returned block scalar\n  //  since the dumper adds its own newline. This always works:\n  //    • No ending newline => unaffected; already using strip \"-\" chomping.\n  //    • Ending newline    => removed then restored.\n  //  Importantly, this keeps the \"+\" chomp indicator from gaining an extra line.\n  function writeScalar(state, string, level, iskey, inblock) {\n\tstate.dump = (function () {\n\t  if (string.length === 0) {\n\t\treturn state.quotingType === QUOTING_TYPE_DOUBLE ? '\"\"' : \"''\";\n\t  }\n\t  if (!state.noCompatMode) {\n\t\tif (DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1 || DEPRECATED_BASE60_SYNTAX.test(string)) {\n\t\t  return state.quotingType === QUOTING_TYPE_DOUBLE ? ('\"' + string + '\"') : (\"'\" + string + \"'\");\n\t\t}\n\t  }\n  \n\t  var indent = state.indent * Math.max(1, level); // no 0-indent scalars\n\t  // As indentation gets deeper, let the width decrease monotonically\n\t  // to the lower bound min(state.lineWidth, 40).\n\t  // Note that this implies\n\t  //  state.lineWidth ≤ 40 + state.indent: width is fixed at the lower bound.\n\t  //  state.lineWidth > 40 + state.indent: width decreases until the lower bound.\n\t  // This behaves better than a constant minimum width which disallows narrower options,\n\t  // or an indent threshold which causes the width to suddenly increase.\n\t  var lineWidth = state.lineWidth === -1\n\t\t? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);\n  \n\t  // Without knowing if keys are implicit/explicit, assume implicit for safety.\n\t  var singleLineOnly = iskey\n\t\t// No block styles in flow mode.\n\t\t|| (state.flowLevel > -1 && level >= state.flowLevel);\n\t  function testAmbiguity(string) {\n\t\treturn testImplicitResolving(state, string);\n\t  }\n  \n\t  switch (chooseScalarStyle(string, singleLineOnly, state.indent, lineWidth,\n\t\ttestAmbiguity, state.quotingType, state.forceQuotes && !iskey, inblock)) {\n  \n\t\tcase STYLE_PLAIN:\n\t\t  return string;\n\t\tcase STYLE_SINGLE:\n\t\t  return \"'\" + string.replace(/'/g, \"''\") + \"'\";\n\t\tcase STYLE_LITERAL:\n\t\t  return '|' + blockHeader(string, state.indent)\n\t\t\t+ dropEndingNewline(indentString(string, indent));\n\t\tcase STYLE_FOLDED:\n\t\t  return '>' + blockHeader(string, state.indent)\n\t\t\t+ dropEndingNewline(indentString(foldString(string, lineWidth), indent));\n\t\tcase STYLE_DOUBLE:\n\t\t  return '\"' + escapeString(string) + '\"';\n\t\tdefault:\n\t\t  throw new exception('impossible error: invalid scalar style');\n\t  }\n\t}());\n  }\n  \n  // Pre-conditions: string is valid for a block scalar, 1 <= indentPerLevel <= 9.\n  function blockHeader(string, indentPerLevel) {\n\tvar indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : '';\n  \n\t// note the special case: the string '\\n' counts as a \"trailing\" empty line.\n\tvar clip =          string[string.length - 1] === '\\n';\n\tvar keep = clip && (string[string.length - 2] === '\\n' || string === '\\n');\n\tvar chomp = keep ? '+' : (clip ? '' : '-');\n  \n\treturn indentIndicator + chomp + '\\n';\n  }\n  \n  // (See the note for writeScalar.)\n  function dropEndingNewline(string) {\n\treturn string[string.length - 1] === '\\n' ? string.slice(0, -1) : string;\n  }\n  \n  // Note: a long line without a suitable break point will exceed the width limit.\n  // Pre-conditions: every char in str isPrintable, str.length > 0, width > 0.\n  function foldString(string, width) {\n\t// In folded style, $k$ consecutive newlines output as $k+1$ newlines—\n\t// unless they're before or after a more-indented line, or at the very\n\t// beginning or end, in which case $k$ maps to $k$.\n\t// Therefore, parse each chunk as newline(s) followed by a content line.\n\tvar lineRe = /(\\n+)([^\\n]*)/g;\n  \n\t// first line (possibly an empty line)\n\tvar result = (function () {\n\t  var nextLF = string.indexOf('\\n');\n\t  nextLF = nextLF !== -1 ? nextLF : string.length;\n\t  lineRe.lastIndex = nextLF;\n\t  return foldLine(string.slice(0, nextLF), width);\n\t}());\n\t// If we haven't reached the first content line yet, don't add an extra \\n.\n\tvar prevMoreIndented = string[0] === '\\n' || string[0] === ' ';\n\tvar moreIndented;\n  \n\t// rest of the lines\n\tvar match;\n\twhile ((match = lineRe.exec(string))) {\n\t  var prefix = match[1], line = match[2];\n\t  moreIndented = (line[0] === ' ');\n\t  result += prefix\n\t\t+ (!prevMoreIndented && !moreIndented && line !== ''\n\t\t  ? '\\n' : '')\n\t\t+ foldLine(line, width);\n\t  prevMoreIndented = moreIndented;\n\t}\n  \n\treturn result;\n  }\n  \n  // Greedy line breaking.\n  // Picks the longest line under the limit each time,\n  // otherwise settles for the shortest line over the limit.\n  // NB. More-indented lines *cannot* be folded, as that would add an extra \\n.\n  function foldLine(line, width) {\n\tif (line === '' || line[0] === ' ') return line;\n  \n\t// Since a more-indented line adds a \\n, breaks can't be followed by a space.\n\tvar breakRe = / [^ ]/g; // note: the match index will always be <= length-2.\n\tvar match;\n\t// start is an inclusive index. end, curr, and next are exclusive.\n\tvar start = 0, end, curr = 0, next = 0;\n\tvar result = '';\n  \n\t// Invariants: 0 <= start <= length-1.\n\t//   0 <= curr <= next <= max(0, length-2). curr - start <= width.\n\t// Inside the loop:\n\t//   A match implies length >= 2, so curr and next are <= length-2.\n\twhile ((match = breakRe.exec(line))) {\n\t  next = match.index;\n\t  // maintain invariant: curr - start <= width\n\t  if (next - start > width) {\n\t\tend = (curr > start) ? curr : next; // derive end <= length-2\n\t\tresult += '\\n' + line.slice(start, end);\n\t\t// skip the space that was output as \\n\n\t\tstart = end + 1;                    // derive start <= length-1\n\t  }\n\t  curr = next;\n\t}\n  \n\t// By the invariants, start <= length-1, so there is something left over.\n\t// It is either the whole string or a part starting from non-whitespace.\n\tresult += '\\n';\n\t// Insert a break if the remainder is too long and there is a break available.\n\tif (line.length - start > width && curr > start) {\n\t  result += line.slice(start, curr) + '\\n' + line.slice(curr + 1);\n\t} else {\n\t  result += line.slice(start);\n\t}\n  \n\treturn result.slice(1); // drop extra \\n joiner\n  }\n  \n  // Escapes a double-quoted string.\n  function escapeString(string) {\n\tvar result = '';\n\tvar char = 0;\n\tvar escapeSeq;\n  \n\tfor (var i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n\t  char = codePointAt(string, i);\n\t  escapeSeq = ESCAPE_SEQUENCES[char];\n  \n\t  if (!escapeSeq && isPrintable(char)) {\n\t\tresult += string[i];\n\t\tif (char >= 0x10000) result += string[i + 1];\n\t  } else {\n\t\tresult += escapeSeq || encodeHex(char);\n\t  }\n\t}\n  \n\treturn result;\n  }\n  \n  function writeFlowSequence(state, level, object) {\n\tvar _result = '',\n\t\t_tag    = state.tag,\n\t\tindex,\n\t\tlength,\n\t\tvalue;\n  \n\tfor (index = 0, length = object.length; index < length; index += 1) {\n\t  value = object[index];\n  \n\t  if (state.replacer) {\n\t\tvalue = state.replacer.call(object, String(index), value);\n\t  }\n  \n\t  // Write only valid elements, put null instead of invalid elements.\n\t  if (writeNode(state, level, value, false, false) ||\n\t\t  (typeof value === 'undefined' &&\n\t\t   writeNode(state, level, null, false, false))) {\n  \n\t\tif (_result !== '') _result += ',' + (!state.condenseFlow ? ' ' : '');\n\t\t_result += state.dump;\n\t  }\n\t}\n  \n\tstate.tag = _tag;\n\tstate.dump = '[' + _result + ']';\n  }\n  \n  function writeBlockSequence(state, level, object, compact) {\n\tvar _result = '',\n\t\t_tag    = state.tag,\n\t\tindex,\n\t\tlength,\n\t\tvalue;\n  \n\tfor (index = 0, length = object.length; index < length; index += 1) {\n\t  value = object[index];\n  \n\t  if (state.replacer) {\n\t\tvalue = state.replacer.call(object, String(index), value);\n\t  }\n  \n\t  // Write only valid elements, put null instead of invalid elements.\n\t  if (writeNode(state, level + 1, value, true, true, false, true) ||\n\t\t  (typeof value === 'undefined' &&\n\t\t   writeNode(state, level + 1, null, true, true, false, true))) {\n  \n\t\tif (!compact || _result !== '') {\n\t\t  _result += generateNextLine(state, level);\n\t\t}\n  \n\t\tif (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n\t\t  _result += '-';\n\t\t} else {\n\t\t  _result += '- ';\n\t\t}\n  \n\t\t_result += state.dump;\n\t  }\n\t}\n  \n\tstate.tag = _tag;\n\tstate.dump = _result || '[]'; // Empty sequence if no valid values.\n  }\n  \n  function writeFlowMapping(state, level, object) {\n\tvar _result       = '',\n\t\t_tag          = state.tag,\n\t\tobjectKeyList = Object.keys(object),\n\t\tindex,\n\t\tlength,\n\t\tobjectKey,\n\t\tobjectValue,\n\t\tpairBuffer;\n  \n\tfor (index = 0, length = objectKeyList.length; index < length; index += 1) {\n  \n\t  pairBuffer = '';\n\t  if (_result !== '') pairBuffer += ', ';\n  \n\t  if (state.condenseFlow) pairBuffer += '\"';\n  \n\t  objectKey = objectKeyList[index];\n\t  objectValue = object[objectKey];\n  \n\t  if (state.replacer) {\n\t\tobjectValue = state.replacer.call(object, objectKey, objectValue);\n\t  }\n  \n\t  if (!writeNode(state, level, objectKey, false, false)) {\n\t\tcontinue; // Skip this pair because of invalid key;\n\t  }\n  \n\t  if (state.dump.length > 1024) pairBuffer += '? ';\n  \n\t  pairBuffer += state.dump + (state.condenseFlow ? '\"' : '') + ':' + (state.condenseFlow ? '' : ' ');\n  \n\t  if (!writeNode(state, level, objectValue, false, false)) {\n\t\tcontinue; // Skip this pair because of invalid value.\n\t  }\n  \n\t  pairBuffer += state.dump;\n  \n\t  // Both key and value are valid.\n\t  _result += pairBuffer;\n\t}\n  \n\tstate.tag = _tag;\n\tstate.dump = '{' + _result + '}';\n  }\n  \n  function writeBlockMapping(state, level, object, compact) {\n\tvar _result       = '',\n\t\t_tag          = state.tag,\n\t\tobjectKeyList = Object.keys(object),\n\t\tindex,\n\t\tlength,\n\t\tobjectKey,\n\t\tobjectValue,\n\t\texplicitPair,\n\t\tpairBuffer;\n  \n\t// Allow sorting keys so that the output file is deterministic\n\tif (state.sortKeys === true) {\n\t  // Default sorting\n\t  objectKeyList.sort();\n\t} else if (typeof state.sortKeys === 'function') {\n\t  // Custom sort function\n\t  objectKeyList.sort(state.sortKeys);\n\t} else if (state.sortKeys) {\n\t  // Something is wrong\n\t  throw new exception('sortKeys must be a boolean or a function');\n\t}\n  \n\tfor (index = 0, length = objectKeyList.length; index < length; index += 1) {\n\t  pairBuffer = '';\n  \n\t  if (!compact || _result !== '') {\n\t\tpairBuffer += generateNextLine(state, level);\n\t  }\n  \n\t  objectKey = objectKeyList[index];\n\t  objectValue = object[objectKey];\n  \n\t  if (state.replacer) {\n\t\tobjectValue = state.replacer.call(object, objectKey, objectValue);\n\t  }\n  \n\t  if (!writeNode(state, level + 1, objectKey, true, true, true)) {\n\t\tcontinue; // Skip this pair because of invalid key.\n\t  }\n  \n\t  explicitPair = (state.tag !== null && state.tag !== '?') ||\n\t\t\t\t\t (state.dump && state.dump.length > 1024);\n  \n\t  if (explicitPair) {\n\t\tif (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n\t\t  pairBuffer += '?';\n\t\t} else {\n\t\t  pairBuffer += '? ';\n\t\t}\n\t  }\n  \n\t  pairBuffer += state.dump;\n  \n\t  if (explicitPair) {\n\t\tpairBuffer += generateNextLine(state, level);\n\t  }\n  \n\t  if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {\n\t\tcontinue; // Skip this pair because of invalid value.\n\t  }\n  \n\t  if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n\t\tpairBuffer += ':';\n\t  } else {\n\t\tpairBuffer += ': ';\n\t  }\n  \n\t  pairBuffer += state.dump;\n  \n\t  // Both key and value are valid.\n\t  _result += pairBuffer;\n\t}\n  \n\tstate.tag = _tag;\n\tstate.dump = _result || '{}'; // Empty mapping if no valid pairs.\n  }\n  \n  function detectType(state, object, explicit) {\n\tvar _result, typeList, index, length, type, style;\n  \n\ttypeList = explicit ? state.explicitTypes : state.implicitTypes;\n  \n\tfor (index = 0, length = typeList.length; index < length; index += 1) {\n\t  type = typeList[index];\n  \n\t  if ((type.instanceOf  || type.predicate) &&\n\t\t  (!type.instanceOf || ((typeof object === 'object') && (object instanceof type.instanceOf))) &&\n\t\t  (!type.predicate  || type.predicate(object))) {\n  \n\t\tif (explicit) {\n\t\t  if (type.multi && type.representName) {\n\t\t\tstate.tag = type.representName(object);\n\t\t  } else {\n\t\t\tstate.tag = type.tag;\n\t\t  }\n\t\t} else {\n\t\t  state.tag = '?';\n\t\t}\n  \n\t\tif (type.represent) {\n\t\t  style = state.styleMap[type.tag] || type.defaultStyle;\n  \n\t\t  if (_toString.call(type.represent) === '[object Function]') {\n\t\t\t_result = type.represent(object, style);\n\t\t  } else if (_hasOwnProperty.call(type.represent, style)) {\n\t\t\t_result = type.represent[style](object, style);\n\t\t  } else {\n\t\t\tthrow new exception('!<' + type.tag + '> tag resolver accepts not \"' + style + '\" style');\n\t\t  }\n  \n\t\t  state.dump = _result;\n\t\t}\n  \n\t\treturn true;\n\t  }\n\t}\n  \n\treturn false;\n  }\n  \n  // Serializes `object` and writes it to global `result`.\n  // Returns true on success, or false on invalid object.\n  //\n  function writeNode(state, level, object, block, compact, iskey, isblockseq) {\n\tstate.tag = null;\n\tstate.dump = object;\n  \n\tif (!detectType(state, object, false)) {\n\t  detectType(state, object, true);\n\t}\n  \n\tvar type = _toString.call(state.dump);\n\tvar inblock = block;\n\tvar tagStr;\n  \n\tif (block) {\n\t  block = (state.flowLevel < 0 || state.flowLevel > level);\n\t}\n  \n\tvar objectOrArray = type === '[object Object]' || type === '[object Array]',\n\t\tduplicateIndex,\n\t\tduplicate;\n  \n\tif (objectOrArray) {\n\t  duplicateIndex = state.duplicates.indexOf(object);\n\t  duplicate = duplicateIndex !== -1;\n\t}\n  \n\tif ((state.tag !== null && state.tag !== '?') || duplicate || (state.indent !== 2 && level > 0)) {\n\t  compact = false;\n\t}\n  \n\tif (duplicate && state.usedDuplicates[duplicateIndex]) {\n\t  state.dump = '*ref_' + duplicateIndex;\n\t} else {\n\t  if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {\n\t\tstate.usedDuplicates[duplicateIndex] = true;\n\t  }\n\t  if (type === '[object Object]') {\n\t\tif (block && (Object.keys(state.dump).length !== 0)) {\n\t\t  writeBlockMapping(state, level, state.dump, compact);\n\t\t  if (duplicate) {\n\t\t\tstate.dump = '&ref_' + duplicateIndex + state.dump;\n\t\t  }\n\t\t} else {\n\t\t  writeFlowMapping(state, level, state.dump);\n\t\t  if (duplicate) {\n\t\t\tstate.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n\t\t  }\n\t\t}\n\t  } else if (type === '[object Array]') {\n\t\tif (block && (state.dump.length !== 0)) {\n\t\t  if (state.noArrayIndent && !isblockseq && level > 0) {\n\t\t\twriteBlockSequence(state, level - 1, state.dump, compact);\n\t\t  } else {\n\t\t\twriteBlockSequence(state, level, state.dump, compact);\n\t\t  }\n\t\t  if (duplicate) {\n\t\t\tstate.dump = '&ref_' + duplicateIndex + state.dump;\n\t\t  }\n\t\t} else {\n\t\t  writeFlowSequence(state, level, state.dump);\n\t\t  if (duplicate) {\n\t\t\tstate.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n\t\t  }\n\t\t}\n\t  } else if (type === '[object String]') {\n\t\tif (state.tag !== '?') {\n\t\t  writeScalar(state, state.dump, level, iskey, inblock);\n\t\t}\n\t  } else if (type === '[object Undefined]') {\n\t\treturn false;\n\t  } else {\n\t\tif (state.skipInvalid) return false;\n\t\tthrow new exception('unacceptable kind of an object to dump ' + type);\n\t  }\n  \n\t  if (state.tag !== null && state.tag !== '?') {\n\t\t// Need to encode all characters except those allowed by the spec:\n\t\t//\n\t\t// [35] ns-dec-digit    ::=  [#x30-#x39] /* 0-9 */\n\t\t// [36] ns-hex-digit    ::=  ns-dec-digit\n\t\t//                         | [#x41-#x46] /* A-F */ | [#x61-#x66] /* a-f */\n\t\t// [37] ns-ascii-letter ::=  [#x41-#x5A] /* A-Z */ | [#x61-#x7A] /* a-z */\n\t\t// [38] ns-word-char    ::=  ns-dec-digit | ns-ascii-letter | “-”\n\t\t// [39] ns-uri-char     ::=  “%” ns-hex-digit ns-hex-digit | ns-word-char | “#”\n\t\t//                         | “;” | “/” | “?” | “:” | “@” | “&” | “=” | “+” | “$” | “,”\n\t\t//                         | “_” | “.” | “!” | “~” | “*” | “'” | “(” | “)” | “[” | “]”\n\t\t//\n\t\t// Also need to encode '!' because it has special meaning (end of tag prefix).\n\t\t//\n\t\ttagStr = encodeURI(\n\t\t  state.tag[0] === '!' ? state.tag.slice(1) : state.tag\n\t\t).replace(/!/g, '%21');\n  \n\t\tif (state.tag[0] === '!') {\n\t\t  tagStr = '!' + tagStr;\n\t\t} else if (tagStr.slice(0, 18) === 'tag:yaml.org,2002:') {\n\t\t  tagStr = '!!' + tagStr.slice(18);\n\t\t} else {\n\t\t  tagStr = '!<' + tagStr + '>';\n\t\t}\n  \n\t\tstate.dump = tagStr + ' ' + state.dump;\n\t  }\n\t}\n  \n\treturn true;\n  }\n  \n  function getDuplicateReferences(object, state) {\n\tvar objects = [],\n\t\tduplicatesIndexes = [],\n\t\tindex,\n\t\tlength;\n  \n\tinspectNode(object, objects, duplicatesIndexes);\n  \n\tfor (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {\n\t  state.duplicates.push(objects[duplicatesIndexes[index]]);\n\t}\n\tstate.usedDuplicates = new Array(length);\n  }\n  \n  function inspectNode(object, objects, duplicatesIndexes) {\n\tvar objectKeyList,\n\t\tindex,\n\t\tlength;\n  \n\tif (object !== null && typeof object === 'object') {\n\t  index = objects.indexOf(object);\n\t  if (index !== -1) {\n\t\tif (duplicatesIndexes.indexOf(index) === -1) {\n\t\t  duplicatesIndexes.push(index);\n\t\t}\n\t  } else {\n\t\tobjects.push(object);\n  \n\t\tif (Array.isArray(object)) {\n\t\t  for (index = 0, length = object.length; index < length; index += 1) {\n\t\t\tinspectNode(object[index], objects, duplicatesIndexes);\n\t\t  }\n\t\t} else {\n\t\t  objectKeyList = Object.keys(object);\n  \n\t\t  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n\t\t\tinspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);\n\t\t  }\n\t\t}\n\t  }\n\t}\n  }\n  \n  function dump$1(input, options) {\n\toptions = options || {};\n  \n\tvar state = new State(options);\n  \n\tif (!state.noRefs) getDuplicateReferences(input, state);\n  \n\tvar value = input;\n  \n\tif (state.replacer) {\n\t  value = state.replacer.call({ '': value }, '', value);\n\t}\n  \n\tif (writeNode(state, 0, value, true, true)) return state.dump + '\\n';\n  \n\treturn '';\n  }\n  \n  var dump_1 = dump$1;\n  \n  var dumper = {\n\t  dump: dump_1\n  };\n  \n  function renamed(from, to) {\n\treturn function () {\n\t  throw new Error('Function yaml.' + from + ' is removed in js-yaml 4. ' +\n\t\t'Use yaml.' + to + ' instead, which is now safe by default.');\n\t};\n  }\n  \n  \n  var Type                = type;\n  var Schema              = schema;\n  var FAILSAFE_SCHEMA     = failsafe;\n  var JSON_SCHEMA         = json;\n  var CORE_SCHEMA         = core;\n  var DEFAULT_SCHEMA      = _default;\n  var load                = loader.load;\n  var loadAll             = loader.loadAll;\n  var dump                = dumper.dump;\n  var YAMLException       = exception;\n  \n  // Re-export all types in case user wants to create custom schema\n  var types = {\n\tbinary:    binary,\n\tfloat:     float,\n\tmap:       map,\n\tnull:      _null,\n\tpairs:     pairs,\n\tset:       set,\n\ttimestamp: timestamp,\n\tbool:      bool,\n\tint:       int,\n\tmerge:     merge,\n\tomap:      omap,\n\tseq:       seq,\n\tstr:       str\n  };\n  \n  // Removed functions from JS-YAML 3.0.x\n  var safeLoad            = renamed('safeLoad', 'load');\n  var safeLoadAll         = renamed('safeLoadAll', 'loadAll');\n  var safeDump            = renamed('safeDump', 'dump');\n  \n  var jsYaml = {\n\t  Type: Type,\n\t  Schema: Schema,\n\t  FAILSAFE_SCHEMA: FAILSAFE_SCHEMA,\n\t  JSON_SCHEMA: JSON_SCHEMA,\n\t  CORE_SCHEMA: CORE_SCHEMA,\n\t  DEFAULT_SCHEMA: DEFAULT_SCHEMA,\n\t  load: load,\n\t  loadAll: loadAll,\n\t  dump: dump,\n\t  YAMLException: YAMLException,\n\t  types: types,\n\t  safeLoad: safeLoad,\n\t  safeLoadAll: safeLoadAll,\n\t  safeDump: safeDump\n  };\n  \n  export default jsYaml;\n  export { CORE_SCHEMA, DEFAULT_SCHEMA, FAILSAFE_SCHEMA, JSON_SCHEMA, Schema, Type, YAMLException, dump, load, loadAll, safeDump, safeLoad, safeLoadAll, types };","import { load as loadYAML } from \"../../lib/js-yaml.js\";\nimport { loadCSS, loadScript } from \"../../utils/url.mjs\";\n\nfunction resetCustomStyles(customCSSelement) {\n\tif (customCSSelement) {\n\t\tcustomCSSelement.innerHTML = \"\";\n\t}\n}\nexport function processYAML(md) {\n\tlet yaml;\n\tconst customCSSelement = document.querySelector(\"#customCSS\");\n\tif (md.split(\"---\").length > 2 && md.startsWith(\"---\")) {\n\t\ttry {\n\t\t\t// Traitement des propriétés dans le YAML\n\t\t\tyaml = loadYAML(md.split(\"---\")[1]);\n\t\t\tif (yaml && yaml.style) {\n\t\t\t\tconst styleElement = customCSSelement\n\t\t\t\t\t? customCSSelement\n\t\t\t\t\t: document.createElement(\"style\");\n\t\t\t\tstyleElement.innerHTML = yaml.style;\n\t\t\t\tif (!customCSSelement) {\n\t\t\t\t\tstyleElement.id = \"customCSS\";\n\t\t\t\t\tdocument.body.appendChild(styleElement);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresetCustomStyles(customCSSelement);\n\t\t\t}\n\t\t\tif (yaml && yaml.maths) {\n\t\t\t\tloadScript(\n\t\t\t\t\t\"https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js\",\n\t\t\t\t\t\"katexJS\",\n\t\t\t\t);\n\t\t\t\tloadScript(\"src/js/lib/markedKatex.js\", \"markedKatex\");\n\t\t\t\tloadCSS(\n\t\t\t\t\t\"https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css\",\n\t\t\t\t\t\"katexCSS\",\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (yaml && yaml.wintext) {\n\t\t\t\tloadScript(\"src/js/lib/htmlSanitizer.js\", \"htmlSanitizer\").then(() => {\n\t\t\t\t\tconst winner = document.querySelector(\".winner\");\n\t\t\t\t\twinner.innerHTML = window.HtmlSanitizer.SanitizeHtml(yaml.wintext);\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tresetCustomStyles(customCSSelement);\n\t\t\tconsole.log(\"erreur processYAML : \" + e);\n\t\t\treturn \"\";\n\t\t}\n\t} else {\n\t\tresetCustomStyles(customCSSelement);\n\t}\n\treturn yaml;\n}\n","let sound;\n\nexport function handleAudio(element) {\n\tif (sound) {\n\t\tsound.pause();\n\t\tsound.currentTime = 0;\n\t}\n\tconst audio = element.querySelector(\"div[data-audio-src]\");\n\tif (audio) {\n\t\tsound = new Audio(audio.getAttribute(\"data-audio-src\"));\n\t\tsound.play();\n\t}\n}","export function extractContentFromCardHtmlElement(card) {\n\tconst isAudio = card.innerHTML.includes(\"data-audio-src\");\n\tlet cardContent = isAudio\n\t\t? card.querySelector(\".front div\").getAttribute(\"data-audio-src\")\n\t\t: card.textContent.trim() || card.querySelector(\".front img\").src;\n\tcardContent = cardContent.replace(window.location.origin + \"/\", \"\");\n\treturn cardContent;\n}\n\nexport function extractContentFromCardObject(card) {\n\tlet cardContent = card.content;\n\n\t// Pattern pour \"audio: URL\"\n\tconst audioPattern = /^audio:\\s*(.+)$/i;\n\tconst audioMatch = cardContent.match(audioPattern);\n\tif (audioMatch) {\n\t\treturn audioMatch[1].trim();\n\t}\n\n\t// Pattern pour \"![](URL)\" ou \"![alt](URL)\"\n\tconst markdownPattern = /!\\[.*?\\]\\((.+?)\\)/;\n\tconst markdownMatch = cardContent.match(markdownPattern);\n\tif (markdownMatch) {\n\t\treturn markdownMatch[1].trim();\n\t}\n\n\t// Aucun pattern trouvé : on renvoie le contenu initial de la carte\n\treturn cardContent;\n}\n","import { parseMarkdown } from \"../markdown/parseMarkdown.mjs\";\nimport { marked } from \"../../lib/marked.js\";\nimport { textFit } from \"../../lib/textFit.js\";\nimport { duplicateUniqueCards } from \"../../utils/arrays.mjs\";\nimport { processYAML } from \"../markdown/yaml.mjs\";\nimport { handleAudio } from \"../../utils/audio.mjs\";\nimport { initializeTitle } from \"./helpers/initializeTitle.mjs\";\nimport { initializeInstructions } from \"./helpers/initializeInstructions.mjs\";\nimport { extractContentFromCardHtmlElement } from \"./helpers/extractContentCards.js\";\nimport { isCardMatch } from \"./helpers/isCardMatch.js\";\n\nconst backImage = \"assets/Blue_Question_Circle.svg\";\n\nconst defaultOptions = marked.getDefaults();\n\nfunction resetMarked() {\n\tmarked.setOptions(defaultOptions);\n\tmarked.use({ extensions: [] });\n}\n\n// Adaptation du Memory Game de Nate Wiley (License -- MIT / 2014)\n\nexport const Memory = {\n\tinit: async function (md) {\n\t\tconst yaml = processYAML(md);\n\t\tconst memoryInfo = parseMarkdown(md);\n\t\tconst cards = memoryInfo.cards;\n\t\tinitializeTitle(memoryInfo);\n\t\tinitializeInstructions(memoryInfo, marked.parse);\n\t\tthis.game = document.querySelector(\".game\");\n\t\tthis.modal = document.querySelector(\".modal\");\n\t\tthis.overlay = document.querySelector(\".modal-overlay\");\n\t\tthis.restartButton = document.querySelector(\"button.restart\");\n\t\tthis.cardsArray = duplicateUniqueCards(cards);\n\t\tconst numberOfCards = this.cardsArray.length;\n\t\tif ((numberOfCards > 8) & (numberOfCards <= 10))\n\t\t\tdocument.body.classList.add(\"smallBoard\");\n\t\tif (numberOfCards > 10) document.body.classList.add(\"verySmallBoard\");\n\t\tthis.shuffleCards(this.cardsArray);\n\t\tthis.setup(yaml);\n\t},\n\n\tshuffleCards: function (cardsArray) {\n\t\tif (\n\t\t\tdocument.querySelector(\".editor-wrapper\") &&\n\t\t\t!document.body.classList.contains(\"mouseOutEditor\")\n\t\t) {\n\t\t\t// En mode édition, ne pas mélanger les cartes\n\t\t\tthis.cards = cardsArray;\n\t\t} else {\n\t\t\tthis.cards = this.shuffle(cardsArray);\n\t\t}\n\t},\n\n\tsetup: async function (yaml) {\n\t\tthis.html = await this.buildHTML(yaml);\n\t\tthis.game.innerHTML = this.html;\n\t\tthis.memoryCards = document.querySelectorAll(\".card\");\n\t\tthis.paused = false;\n\t\tthis.guess = null;\n\t\tthis.binding(yaml);\n\t\tthis.resize();\n\t\tconst heightGameElement = this.game.offsetHeight;\n\t\tconst titleHeight = document.querySelector(\"body > h1\")\n\t\t\t? document.querySelector(\"body > h1\").offsetHeight\n\t\t\t: 0;\n\t\tconst instructionsHeight = document.querySelector(\".instructions\")\n\t\t\t? document.querySelector(\".instructions\").offsetHeight\n\t\t\t: 0;\n\t\tconst heightHeaderElement = titleHeight + instructionsHeight;\n\t\tif (heightHeaderElement > 0) {\n\t\t\tconst newHeightGameElement =\n\t\t\t\theightGameElement - heightHeaderElement - 100;\n\t\t\tthis.game.style.height = newHeightGameElement + \"px\";\n\t\t\tdocument.body.querySelector(\".wrap\").style.height =\n\t\t\t\tnewHeightGameElement + \"px\";\n\t\t}\n\t},\n\n\tresize: function () {\n\t\tthis.frontCards = document.querySelectorAll(\".card .front\");\n\t\tthis.frontCards.forEach((frontCard) => {\n\t\t\t// Ajustement automatique de la taille de la police avec textFit : seulement pour le contenu texte, et pas pour les images\n\t\t\tif (!frontCard.innerHTML.includes(\"<img\")) {\n\t\t\t\ttextFit(frontCard, {\n\t\t\t\t\treProcess: true,\n\t\t\t\t\tmultiline: true,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tbinding: function (yaml) {\n\t\tconst self = this;\n\t\tthis.memoryCards.forEach(function (card) {\n\t\t\tcard.addEventListener(\"click\", function () {\n\t\t\t\tself.cardClicked.call(self, card);\n\t\t\t});\n\t\t});\n\t\tthis.restartButton.addEventListener(\"click\", function () {\n\t\t\tself.reset.call(self, yaml);\n\t\t});\n\t},\n\n\tcardClicked: function (card) {\n\t\tconst $card = card;\n\t\tconst insideElement = $card.querySelector(\".inside\");\n\t\t// Gestion des éléments audio\n\t\thandleAudio(insideElement);\n\t\t// On récupère le contenu de la carte qu'on a sélectionné\n\t\tlet cardPickedContent = extractContentFromCardHtmlElement($card);\n\t\tif (\n\t\t\tinsideElement &&\n\t\t\t!this.paused &&\n\t\t\t!insideElement.classList.contains(\"matched\") &&\n\t\t\t!insideElement.classList.contains(\"picked\")\n\t\t) {\n\t\t\tinsideElement.classList.add(\"picked\");\n\t\t\tif (!this.guess) {\n\t\t\t\tthis.guess = cardPickedContent;\n\t\t\t} else {\n\t\t\t\tconst firstCardContent = this.guess;\n\t\t\t\tconst secondCardElement = $card;\n\t\t\t\tconst isMatch = isCardMatch(\n\t\t\t\t\tfirstCardContent,\n\t\t\t\t\tsecondCardElement,\n\t\t\t\t\tthis.cards,\n\t\t\t\t);\n\n\t\t\t\tif (isMatch && !$card.classList.contains(\"picked\")) {\n\t\t\t\t\tdocument.querySelectorAll(\".picked\").forEach(function (pickedCard) {\n\t\t\t\t\t\tpickedCard.classList.add(\"matched\");\n\t\t\t\t\t});\n\t\t\t\t\tthis.guess = null;\n\t\t\t\t} else {\n\t\t\t\t\tthis.guess = null;\n\t\t\t\t\tthis.paused = true;\n\t\t\t\t\tconst self = this;\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tdocument.querySelectorAll(\".picked\").forEach(function (pickedCard) {\n\t\t\t\t\t\t\tpickedCard.classList.remove(\"picked\");\n\t\t\t\t\t\t});\n\t\t\t\t\t\tself.paused = false;\n\t\t\t\t\t}, 600);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (\n\t\t\t\tdocument.querySelectorAll(\".matched\").length ==\n\t\t\t\tdocument.querySelectorAll(\".card\").length\n\t\t\t) {\n\t\t\t\tthis.win();\n\t\t\t}\n\t\t}\n\t},\n\n\twin: function () {\n\t\tthis.paused = true;\n\t\tconst self = this;\n\t\tsetTimeout(function () {\n\t\t\tself.showModal();\n\t\t}, 1500);\n\t},\n\n\tshowModal: function () {\n\t\tthis.overlay.style.display = \"block\";\n\t\tthis.modal.style.display = \"block\";\n\t},\n\n\thideModal: function () {\n\t\tthis.overlay.style.display = \"none\";\n\t\tthis.modal.style.display = \"none\";\n\t},\n\n\treset: function (yaml) {\n\t\tthis.hideModal();\n\t\tthis.shuffleCards(this.cardsArray);\n\t\tthis.setup(yaml);\n\t\tthis.game.style.display = \"block\";\n\t},\n\n\t// Fisher--Yates Algorithm -- https://bost.ocks.org/mike/shuffle/\n\tshuffle: function (array) {\n\t\tlet counter = array.length;\n\t\t// While there are elements in the array\n\t\twhile (counter > 0) {\n\t\t\t// Pick a random index\n\t\t\tconst index = Math.floor(Math.random() * counter);\n\t\t\t// Decrease counter by 1\n\t\t\tcounter--;\n\t\t\t// And swap the last element with it\n\t\t\tconst temp = array[counter];\n\t\t\tarray[counter] = array[index];\n\t\t\tarray[index] = temp;\n\t\t}\n\t\treturn array;\n\t},\n\n\tbuildHTML: async function (yaml) {\n\t\tlet htmlFragment = \"\";\n\n\t\t// Si on doit gérer les maths\n\t\tconst useMathsMode = yaml && yaml.maths === true;\n\t\tif (useMathsMode) {\n\t\t\t// Attente du chargement de markedKatex\n\t\t\tif (!window.markedKatex) {\n\t\t\t\tawait new Promise((resolve) => {\n\t\t\t\t\twindow.addEventListener(\"markedKatexLoaded\", resolve, { once: true });\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Configuration de marked avec markedKatex\n\t\t\tmarked.use(\n\t\t\t\twindow.markedKatex({\n\t\t\t\t\tthrowOnError: false,\n\t\t\t\t}),\n\t\t\t);\n\t\t} else {\n\t\t\tresetMarked();\n\t\t}\n\t\t// Génération des cartes\n\t\tthis.cards.forEach(function (card) {\n\t\t\tlet cardContent = \"\";\n\n\t\t\t// Gestion des éléments audio\n\t\t\tif (card.content.startsWith(\"audio:\")) {\n\t\t\t\tconst audioURL = card.content.replace(\"audio:\", \"\").trim();\n\t\t\t\tcardContent = `<div data-audio-src=\"${audioURL}\">🔊</div>`;\n\t\t\t} else {\n\t\t\t\t// Convertit le contenu de la carte en HTML et supprime les hashtags au début du contenu pour compatibilité avec FlashMD\n\t\t\t\tcardContent = marked.parseInline(card.content.replace(/#+ /, \"\"));\n\t\t\t}\n\n\t\t\thtmlFragment += `\n\t\t\t<div class=\"card\" data-id=\"${card.id}\">\n\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t<div class=\"front\">${cardContent}</div>\n\t\t\t\t\t<div class=\"back\">\n\t\t\t\t\t\t<img src=\"${backImage}\" alt=\"\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t\t});\n\n\t\treturn htmlFragment;\n\t},\n};\n","export function initializeTitle(memoryInfo) {\n\tif (memoryInfo.title) {\n\t\tdocument.title = memoryInfo.title;\n\t\tconst h1 = document.querySelector(\"body > h1\")\n\t\t\t? document.querySelector(\"body > h1\")\n\t\t\t: document.createElement(\"h1\");\n\t\th1.textContent = memoryInfo.title;\n\t\tdocument.body.insertBefore(h1, document.querySelector(\".wrap\"));\n\t} else {\n\t\tconst h1 = document.querySelector(\"body > h1\");\n\t\tif (h1) h1.remove();\n\t}\n}\n","export function initializeInstructions(memoryInfo, md2html) {\n\tif (memoryInfo.blockquote) {\n\t\tconst div = document.querySelector(\".instructions\")\n\t\t\t? document.querySelector(\".instructions\")\n\t\t\t: document.createElement(\"div\");\n\t\tdiv.className = \"instructions\";\n\t\tdiv.innerHTML = md2html(memoryInfo.blockquote);\n\t\tconst h1 = document.querySelector(\"body > h1\");\n\t\tif (h1) {\n\t\t\th1.insertAdjacentElement(\"afterend\", div);\n\t\t} else {\n\t\t\tdocument.body.insertBefore(div, document.querySelector(\".wrap\"));\n\t\t}\n\t} else {\n\t\tconst div = document.querySelector(\".instructions\");\n\t\tif (div) div.remove();\n\t}\n}\n","export function duplicateUniqueCards(cards) {\n\t// Compter les occurrences de chaque id\n\tconst counts = cards.reduce((acc, card) => {\n\t\tacc[card.id] = (acc[card.id] || 0) + 1;\n\t\treturn acc;\n\t}, {});\n\n\t// Filtrer les cartes uniques\n\tconst uniques = cards.filter((card) => counts[card.id] === 1);\n\n\t// Retourner le tableau original + duplication des uniques\n\treturn cards.concat(uniques);\n}\n","import {\n\textractContentFromCardHtmlElement,\n\textractContentFromCardObject,\n} from \"./extractContentCards\";\n\n// Fonction qui vérifie si deux cartes sélectionnées forment une paire correcte\nexport function isCardMatch(firstCardContent, secondCardElement, cards) {\n\tlet isMatch = false;\n\t// On extrait le contenu de la deuxième carte sélectionnée (clic sur un élément HTML de classe \"carte\")\n\tconst secondCardContent =\n\t\textractContentFromCardHtmlElement(secondCardElement);\n\t// On cherche dans la liste des cartes celle dont le contenu correspond à la première carte sélectionnée\n\tconst firstCardData = cards.filter(\n\t\t(card) => extractContentFromCardObject(card) == firstCardContent,\n\t);\n\t// On vérifie si la première carte sélectionnée contient une correspondance prédéfinie avec une autre carte qui est son \"match\"\n\tconst firstCardHasMatch =\n\t\tfirstCardData && firstCardData[0] && firstCardData[0].match;\n\n\tif (firstCardHasMatch) {\n\t\t// CAS 1 : la première carte sélectionnée a un \"match\" prédéfini\n\t\t// On vérifie si le contenu de la deuxième carte correspond au \"match\" de la première\n\t\tconst matchingCardContent = firstCardData[0].match;\n\t\tisMatch = matchingCardContent == secondCardContent;\n\t\treturn isMatch;\n\t} else {\n\t\t// La première carte n’a pas de \"match\" prédéfini\n\t\t// On cherche dans la liste des cartes celle dont le contenu correspond à la deuxième carte sélectionnée\n\t\tconst secondCardData = cards.filter(\n\t\t\t(card) => extractContentFromCardObject(card) == secondCardContent,\n\t\t);\n\t\t// On vérifie si la deuxième carte sélectionnée contient une correspondance prédéfinie avec une autre carte qui est son \"match\"\n\t\tconst secondCardHasMatch =\n\t\t\tsecondCardData && secondCardData[0] && secondCardData[0].match;\n\t\tif (secondCardHasMatch) {\n\t\t\t// CAS 2 : la deuxième carte sélectionnée a un \"match\" prédéfini\n\t\t\t// On vérifie si le contenu de la première carte correspond au \"match\" de la deuxième\n\t\t\tconst matchingCardContent = secondCardData[0].match;\n\t\t\tisMatch = matchingCardContent == firstCardContent;\n\t\t\treturn isMatch;\n\t\t} else {\n\t\t\t// CAS 3 : aucune des deux cartes n’a de correspondance prédéfinie avec un \"match\" précis\n\t\t\t// Dans ce cas, c'est l'ID qui définit la correspondance, et on vérifie si les cartes ont le même.\n\t\t\tconst secondCardId = secondCardElement.getAttribute(\"data-id\");\n\t\t\tisMatch = firstCardData[0].id == secondCardId;\n\t\t\treturn isMatch;\n\t\t}\n\t}\n}\n","import { getMarkdownFromURL } from \"../../utils/url.mjs\";\nimport { marked } from \"../../lib/marked.js\";\nimport { buildFooter } from \"./footer/buildFooter.mjs\";\nimport {\n\tinitRedirectionEvents,\n\tinitEditorButtonEvents,\n} from \"./footer/events.mjs\";\n\nexport async function handleDefaultContent() {\n\tconst footer = document.createElement(\"footer\");\n\tconst footerContent = await getMarkdownFromURL(\"README.md\");\n\tconst footerContentHTML = marked.parse(footerContent);\n\n\tfooter.innerHTML = buildFooter(footerContentHTML);\n\tdocument.body.appendChild(footer);\n\tdocument.body.classList.add(\"default\");\n\n\tinitRedirectionEvents();\n\tinitEditorButtonEvents();\n}\n","export function addRedirectionToOnlineMarkdown(footerContentHTML) {\n\tconst htmlRedirection = `<label for=\"redirect\">Copiez ici le lien vers votre fichier, puis cliquer sur “OK” pour ouvrir votre Memory :</label>\n<input type=\"url\" id=\"redirect\" class=\"redirect-input\" placeholder=\"Votre URL\"> <button  class=\"redirect-button\" data-input-id=\"redirect\" >OK</button>`;\n\treturn footerContentHTML.replace(\"<!--INPUT_MARKDOWN-->\", htmlRedirection);\n}\n\nexport function addButtonToOpenEditor(footerContentHTML) {\n\tconst htmlButton =\n\t\t'<button class=\"openEditor\">Ouvrir l\\'éditeur en ligne</button>';\n\treturn footerContentHTML.replace(\"<!--BUTTON_OPEN_EDITOR-->\", htmlButton);\n}\n\nexport function buildFooter(footerContentHTML) {\n\tlet newFooterContentHTML = footerContentHTML;\n\tnewFooterContentHTML = addRedirectionToOnlineMarkdown(newFooterContentHTML);\n\tnewFooterContentHTML = addButtonToOpenEditor(newFooterContentHTML);\n\treturn newFooterContentHTML;\n}\n","import { redirectToUrl } from \"../../../utils/url.mjs\";\nimport { initMarkdownEditor } from \"../editor.mjs\";\nimport { Memory } from \"../../game/gameLogic.mjs\";\n\nexport function initRedirectionEvents() {\n\t// On ajoute le champ de redirection vers un markdown en ligne\n\tconst observer = new MutationObserver(() => {\n\t\tconst button = document.querySelector(\"button.redirect-button\");\n\t\tconst input = document.querySelector(\"input.redirect-input\");\n\t\tif (button && input) {\n\t\t\tbutton.addEventListener(\"click\", () => redirectToUrl(input));\n\t\t\tinput.addEventListener(\"keydown\", (event) => {\n\t\t\t\tif (event.key === \"Enter\") {\n\t\t\t\t\tredirectToUrl(input);\n\t\t\t\t}\n\t\t\t});\n\t\t\tobserver.disconnect();\n\t\t}\n\t});\n\tobserver.observe(document.body, { childList: true, subtree: true });\n}\n\nexport function initEditorButtonEvents() {\n\tconst openEditorButton = document.querySelector(\"button.openEditor\");\n\topenEditorButton.addEventListener(\"click\", () => {\n\t\t// On teste si on est sur téléphone ou petit écran\n\t\tif (window.innerWidth < 600 || window.innerHeight < 500) {\n\t\t\talert(\n\t\t\t\t\"L'éditeur Markdown n'est pas disponible sur les petits écrans. Merci d'utiliser un ordinateur ou une tablette en mode paysage.\",\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tdocument.body.classList.toggle(\"editMode\");\n\t\tconst editorWrapper = document.querySelector(\".editor-wrapper\");\n\t\tif (editorWrapper === null) {\n\t\t\tinitMarkdownEditor(Memory);\n\t\t} else {\n\t\t\teditorWrapper.style.display = \"block\";\n\t\t\tconst closeEditorButton = document.querySelector(\".close-editor-button\");\n\t\t\tcloseEditorButton.style.display = \"block\";\n\n\t\t\tconst footer = document.querySelector(\"footer\");\n\t\t\tfooter.style.display = \"none\";\n\t\t\tfooter.style.top = \"25vh\";\n\n\t\t\tconst mdFromEditor = document.querySelector(\".editor\").textContent;\n\t\t\tMemory.init(mdFromEditor);\n\t\t}\n\t});\n}\n","import { handleDefaultContent } from \"../startpage/defaultContent.mjs\";\nimport { defaultMD } from \"../startpage/const.mjs\";\nimport { getMarkdownFromURL, getURLfromHash } from \"../../utils/url.mjs\";\nimport { Memory } from \"./gameLogic.mjs\";\nimport { processYAML } from \"../markdown/yaml.mjs\";\n\nexport async function createMemoryFromMarkdown() {\n\tconst isDefault = getURLfromHash() === \"\";\n\tlet md = \"\";\n\tif (isDefault) {\n\t\tmd = defaultMD;\n\t\tawait handleDefaultContent();\n\t} else {\n\t\tmd = (await getMarkdownFromURL(getURLfromHash())) || defaultMD;\n\t}\n\tconst yaml = processYAML(md);\n\tif (yaml && yaml.maths === true) {\n\t\tconst interval = setInterval(() => {\n\t\t\tif (window.markedKatex && window.katex) {\n\t\t\t\tclearInterval(interval);\n\t\t\t\tMemory.init(md);\n\t\t\t}\n\t\t}, 500);\n\t} else {\n\t\tMemory.init(md);\n\t}\n}\n","import \"../css/style.css\";\nimport { createMemoryFromMarkdown } from \"./core/game/createMemoryFromMarkdown.mjs\";\n\ncreateMemoryFromMarkdown();\n"],"names":["getMarkdownFromURL","url","fetch","then","response","ok","Error","text","catch","error","console","getURLfromHash","startsWith","includes","addCorsProxy","replace","indexOf","endsWith","handleURL","window","location","hash","substring","redirectToUrl","input","baseURL","origin","value","trim","getAttribute","fullUrl","open","alert","loadScript","src","name","prefixScript","alreadyLoaded","document","querySelector","Promise","resolve","reject","script","createElement","id","onload","onerror","head","appendChild","L","async","breaks","extensions","gfm","hooks","pedantic","renderer","silent","tokenizer","walkTokens","O","G","l","E","exec","h","e","t","source","n","r","i","s","m","caret","getRegex","RegExp","codeRemoveIndent","outputLinkReplace","indentCodeCompensation","beginningSpace","endingHash","startingSpaceChar","endingSpaceChar","nonSpaceChar","newLineCharGlobal","tabCharGlobal","multipleSpaceGlobal","blankLine","doubleBlankLine","blockquoteStart","blockquoteSetextReplace","blockquoteSetextReplace2","listReplaceTabs","listReplaceNesting","listIsTask","listReplaceTask","anyLine","hrefBrackets","tableDelimiter","tableAlignChars","tableRowBlankLine","tableAlignRight","tableAlignCenter","tableAlignLeft","startATag","endATag","startPreScriptTag","endPreScriptTag","startAngleBracket","endAngleBracket","pedanticHrefTitle","unicodeAlphaNumeric","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","unescapeTest","percentDecode","findPipe","splitPipe","slashPipe","carriageReturn","spaceLine","notSpaceStart","endingNewline","listItemRegex","nextBulletRegex","Math","min","hrRegex","fencesBeginRegex","headingBeginRegex","htmlBeginRegex","C","j","se","ie","Te","F","Q","ye","Pe","v","U","Se","oe","K","blockquote","code","def","fences","heading","hr","html","lheading","list","newline","paragraph","table","re","_e","Le","ae","D","W","le","Ee","ue","pe","qe","ve","ce","De","He","Ze","Ge","Ne","je","Fe","q","Qe","he","de","X","_backpedal","anyPunctuation","autolink","blockSkip","br","del","emStrongLDelim","emStrongRDelimAst","emStrongRDelimUnd","escape","link","nolink","punctuation","reflink","reflinkSearch","tag","Ke","N","We","I","normal","M","Xe","ke","w","test","J","encodeURI","V","o","a","u","split","shift","length","at","pop","splice","push","z","charAt","slice","fe","href","title","other","state","inLink","type","raw","tokens","inlineTokens","y","options","rules","lexer","constructor","this","space","block","codeBlockStyle","match","map","join","Je","lang","inline","depth","p","c","f","top","blockTokens","k","x","g","T","ordered","start","loose","items","H","repeat","trimStart","search","ee","te","ne","me","A","Z","Y","task","checked","trimEnd","filter","some","pre","toLowerCase","header","align","rows","inRawBlock","ge","emStrong","lastIndex","index","codespan","inlineText","escaped","b","inlineQueue","links","Object","create","lex","lexInline","call","startBlock","forEach","charCodeAt","keys","lastIndexOf","emStrongMask","startInline","P","parser","parse","parseInline","listitem","checkbox","unshift","tablecell","tablerow","strong","em","image","textRenderer","$","R","renderers","S","static","Set","preprocess","postprocess","processAllTokens","provideLexer","provideParser","_","defaults","setOptions","parseMarkdown","Parser","Renderer","TextRenderer","Lexer","Tokenizer","Hooks","use","concat","childTokens","flat","apply","level","passThroughHooks","has","passThroughHooksRespectAsync","onError","prototype","toString","all","message","d","getDefaults","defaultMD","rulesReminder","createCloseButton","editorWrapper","jar","Memory","button","className","innerHTML","addEventListener","confirm","closeEditorButton","body","classList","remove","style","display","footer","updateCode","init","resetEditor","globalWindow","CodeJar","editor","highlight","opt","tab","indentOn","moveToNewLine","spellcheck","catchTab","preserveIdent","addClosing","history","listeners","prev","focus","onUpdate","setAttribute","outline","overflowWrap","overflowY","whiteSpace","doHighlight","pos","matchFirefoxVersion","navigator","userAgent","firefoxVersion","parseInt","isLegacy","contentEditable","debounceHighlight","debounce","save","restore","recording","shouldRecord","event","isUndo","isRedo","key","debounceRecordHistory","recordHistory","on","fn","getSelection","end","dir","undefined","anchorNode","anchorOffset","focusNode","focusOffset","textContent","nodeType","Node","ELEMENT_NODE","node","createTextNode","insertBefore","childNodes","visit","el","TEXT_NODE","nodeValue","normalize","startNode","endNode","startOffset","endOffset","current","len","startEl","uneditable","parentNode","endEl","setBaseAndExtent","beforeCursor","r0","getRangeAt","createRange","selectNodeContents","setEnd","startContainer","afterCursor","setStart","endContainer","legacyNewLineFix","preventDefault","stopPropagation","insert","lastRecord","visitor","queue","firstChild","nextSibling","isCtrl","metaKey","ctrlKey","shiftKey","getKeyCode","keyCode","which","String","fromCharCode","toUpperCase","execCommand","cb","wait","timeout","args","clearTimeout","setTimeout","findPadding","getRootNode","defaultPrevented","before","after","padding","newLinePadding","handleNewLine","handleTabCharacters","close","wrapText","handleSelfClosingCharacters","record","handleUndoRedo","isCopy","isComposing","_event","originalEvent","clipboardData","getData","handlePaste","selection","setData","handleCut","updateOptions","newOptions","assign","callOnUpdate","callback","destroy","removeEventListener","highlightCode","p1","p2","replaceAll","optionsEditor","spellCheck","eventKeyUpDebounceUpdateCards","editorElement","debouncedUpdateCards","func","md","updateCards","initMarkdownEditor","createEditor","initJar","initKeyboardEvents","contains","add","initMouseEvents","marked","defaultSettings","alignVert","alignHoriz","multiLine","detectMultiLine","minFontSize","maxFontSize","reProcess","widthOnly","alignVertWithFlexbox","processItem","settings","HTMLElement","nodeName","innerSpan","originalHeight","originalHTML","originalWidth","low","mid","high","getComputedStyle","getBoundingClientRect","width","getPropertyValue","innerWidth","height","innerHeight","outerHTML","hasClass","size","fontSize","innerSpanBoundingClientRect","getElementById","css","addStyleSheet","scrollHeight","element","cls","isNothing","subject","common","isObject","toArray","sequence","Array","isArray","string","count","cycle","result","isNegativeZero","number","Number","NEGATIVE_INFINITY","extend","target","sourceKeys","formatError","exception","compact","where","reason","mark","line","column","snippet","YAMLException$1","captureStackTrace","stack","getLine","buffer","lineStart","lineEnd","position","maxLineLength","tail","maxHalfLength","floor","str","padStart","max","maxLength","indent","linesBefore","linesAfter","lineStarts","lineEnds","foundLineNo","lineNoLength","TYPE_CONSTRUCTOR_OPTIONS","YAML_NODE_KINDS","kind","construct","data","instanceOf","predicate","represent","representName","defaultStyle","multi","styleAliases","alias","compileStyleAliases","compileList","schema","currentType","newIndex","previousType","previousIndex","Schema$1","definition","implicit","explicit","type$1","loadKind","compiledImplicit","compiledExplicit","compiledTypeMap","scalar","mapping","fallback","collectType","arguments","compileMap","failsafe","_null","object","canonical","lowercase","uppercase","camelcase","empty","bool","isHexCode","isOctCode","isDecCode","int","ch","hasDigits","sign","binary","obj","octal","decimal","hexadecimal","YAML_FLOAT_PATTERN","SCIENTIFIC_WITHOUT_DOT","float","POSITIVE_INFINITY","NaN","parseFloat","res","isNaN","core","YAML_DATE_REGEXP","YAML_TIMESTAMP_REGEXP","timestamp","year","month","day","hour","minute","second","date","fraction","delta","Date","UTC","setTime","getTime","toISOString","merge","BASE64_MAP","idx","bitlen","tailbits","bits","Uint8Array","_hasOwnProperty$3","hasOwnProperty","_toString$2","omap","pair","pairKey","pairHasKey","objectKeys","_toString$1","pairs","_hasOwnProperty$2","set","_default","_hasOwnProperty$1","PATTERN_NON_PRINTABLE","PATTERN_NON_ASCII_LINE_BREAKS","PATTERN_FLOW_INDICATORS","PATTERN_TAG_HANDLE","PATTERN_TAG_URI","_class","is_EOL","is_WHITE_SPACE","is_WS_OR_EOL","is_FLOW_INDICATOR","fromHexCode","lc","escapedHexLen","fromDecimalCode","simpleEscapeSequence","charFromCodepoint","simpleEscapeCheck","simpleEscapeMap","State$1","filename","onWarning","legacy","json","listener","implicitTypes","typeMap","lineIndent","firstTabInLine","documents","generateError","throwError","throwWarning","directiveHandlers","YAML","major","minor","version","checkLineBreaks","TAG","handle","prefix","tagMap","decodeURIComponent","err","captureSegment","checkJson","_position","_length","_character","_result","mergeMappings","destination","overridableKeys","quantity","storeMappingPair","keyTag","keyNode","valueNode","startLine","startLineStart","startPos","defineProperty","configurable","enumerable","writable","readLineBreak","skipSeparationSpace","allowComments","checkIndent","lineBreaks","testDocumentSeparator","writeFoldedLines","readBlockSequence","nodeIndent","_line","_tag","_anchor","anchor","detected","anchorMap","composeNode","readTagProperty","tagHandle","tagName","isVerbatim","isNamed","readAnchorProperty","parentIndent","nodeContext","allowToSeek","allowCompact","allowBlockStyles","allowBlockScalars","allowBlockCollections","typeIndex","typeQuantity","typeList","flowIndent","blockIndent","indentStatus","atNewLine","hasContent","following","_keyLine","_keyLineStart","_keyPos","atExplicitKey","readBlockMapping","_lineStart","_pos","terminator","isPair","isExplicitPair","isMapping","readNext","readFlowCollection","captureStart","folding","tmp","chomping","didReadContent","detectedIndent","textIndent","emptyLines","atMoreIndented","readBlockScalar","captureEnd","readSingleQuotedScalar","hexLength","hexResult","readDoubleQuotedScalar","readAlias","withinFlowCollection","hasPendingContent","_lineIndent","_kind","readPlainScalar","readDocument","directiveName","directiveArgs","documentStart","hasDirectives","load","nullpos","loadDocuments","resetCustomStyles","customCSSelement","processYAML","yaml","loadYAML","styleElement","maths","prefixCSS","rel","loadCSS","wintext","HtmlSanitizer","SanitizeHtml","log","sound","extractContentFromCardHtmlElement","card","cardContent","extractContentFromCardObject","content","audioMatch","markdownMatch","defaultOptions","memoryInfo","titleMatch","stripYAML","blockquoteMatch","contentStartIndex","startIndex","cardsContent","cards","cardSubCards","h1","initializeTitle","md2html","div","insertAdjacentElement","initializeInstructions","game","modal","overlay","restartButton","cardsArray","counts","reduce","acc","uniques","duplicateUniqueCards","numberOfCards","shuffleCards","setup","shuffle","buildHTML","memoryCards","querySelectorAll","paused","guess","binding","resize","heightGameElement","offsetHeight","heightHeaderElement","newHeightGameElement","frontCards","frontCard","els","elType","textFit","multiline","self","cardClicked","reset","$card","insideElement","pause","currentTime","audio","Audio","play","handleAudio","cardPickedContent","isMatch","firstCardContent","secondCardElement","secondCardContent","firstCardData","secondCardData","secondCardId","isCardMatch","pickedCard","win","showModal","hideModal","array","counter","random","temp","htmlFragment","markedKatex","once","throwOnError","handleDefaultContent","footerContent","footerContentHTML","newFooterContentHTML","addRedirectionToOnlineMarkdown","addButtonToOpenEditor","buildFooter","observer","MutationObserver","disconnect","observe","childList","subtree","initRedirectionEvents","toggle","mdFromEditor","isDefault","interval","setInterval","katex","clearInterval","createMemoryFromMarkdown"],"mappings":"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"}